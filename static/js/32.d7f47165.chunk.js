(this["webpackJsonptu-bon"]=this["webpackJsonptu-bon"]||[]).push([[32],{692:function(t,n,e){"use strict";e(0);var a=e(423),c=e(15),i=a.a.Summary,r=i.Row,o=i.Cell;n.a=function(t){var n,e=t.columns,a=t.dataSource;return Object(c.b)(r,{children:null===e||void 0===e||null===(n=e.map)||void 0===n?void 0:n.call(e,(function(t,n){var e=null===t||void 0===t?void 0:t.id,i=(null===t||void 0===t?void 0:t.colSpan)||0,r=(null===t||void 0===t?void 0:t.cellClassName)||"",u=(null===t||void 0===t?void 0:t.valueStyle)||{},l=(null===t||void 0===t?void 0:t.valueClassName)||"",d=null===t||void 0===t?void 0:t.render,b=(null===a||void 0===a?void 0:a[n])||{},s=(null===b||void 0===b?void 0:b[e])||"";return d&&(s=d(s,b,n)),Object(c.b)(o,{index:n,colSpan:i,className:r,children:Object(c.b)("div",{style:u,className:l,children:s})},e)}))})}},696:function(t,n,e){"use strict";e.d(n,"a",(function(){return s})),e.d(n,"b",(function(){return h})),e.d(n,"c",(function(){return g}));var a=e(14),c=(e(0),e(33)),i=e(426),r=e(687),o=e(670),u=e(217),l=e(10),d=e(677),b=e(15),s={giaThamKhao:{id:"giaThamKhao",name:"Gi\xe1 TK",width:100,className:"text-small font-weight-bold",align:"right"},giaNhapNCC:{id:"giaNhapNCC",name:"Gi\xe1 nh\u1eadp",width:100,className:"text-small font-weight-bold",align:"right",form:{type:"input-number-format"},render:l.numberRender},soLuongDat:{id:"soLuongDat",name:"SL \u0111\u1eb7t",width:100,className:"text-small font-weight-bold",align:"center",form:{type:"input-number-format"}},soLuongNhan:{id:"soLuongNhan",name:"SL nh\u1eadn",width:100,className:"text-small font-weight-bold",align:"center",form:{type:"input-number-format"}},thanhTien:{id:"thanhTien",name:"Th\xe0nh ti\u1ec1n",width:100,className:"text-small font-weight-bold",align:"right",render:l.numberRender},getTableColumns:function(){return[Object(a.a)(Object(a.a)({},c.a.stt),{},{fixed:!1}),Object(a.a)(Object(a.a)({},r.b.tenMatHang),{},{width:120,fixed:!1}),Object(a.a)(Object(a.a)({},o.a.tenNhomMatHang),{},{align:"center"}),Object(a.a)(Object(a.a)({},this.soLuongDat),{},{render:function(t,n,e,a){var c=a.onBlur;return Object(b.b)(i.a,{value:t||"",size:"small",name:"".concat(n.id,".soLuongDat"),onBlur:c,min:0})}}),Object(a.a)(Object(a.a)({},u.a.tenDonViTinh),{},{align:"center"}),this.giaThamKhao,this.thanhTien]},getInputFields:function(){return[]},getExcelFields:function(){return[]}},h={getTableColumns:function(){return[Object(a.a)(Object(a.a)({},c.a.stt),{},{fixed:!1}),Object(a.a)(Object(a.a)({},r.b.tenMatHang),{},{width:150,fixed:!1}),Object(a.a)(Object(a.a)({},o.a.tenNhomMatHang),{},{align:"center"}),Object(a.a)({},s.soLuongDat),Object(a.a)(Object(a.a)({},s.soLuongNhan),{},{render:function(t,n,e,a){var c=a.onBlur,r=a.isEdit,o=a.inputOptions,u=null===o||void 0===o?void 0:o.isNhapSLNhan;return r&&u?Object(b.b)(i.a,{value:t||"",size:"small",name:"".concat(n.id,".soLuongNhan"),onBlur:c,min:0}):Object(l.formatNumber)(t)}}),Object(a.a)(Object(a.a)({},u.a.tenDonViTinh),{},{align:"center",isSearch:!1,width:90}),Object(a.a)(Object(a.a)({},s.giaNhapNCC),{},{render:function(t,n,e,a){var c=a.onBlur;return a.isEdit?Object(b.b)(i.a,{value:t||"",size:"small",name:"".concat(n.id,".giaNhapNCC"),onBlur:c,min:0}):Object(l.formatNumber)(t)}}),s.thanhTien]}},g={getTableColumns:function(){return[Object(a.a)(Object(a.a)({},c.a.stt),{},{fixed:!1}),Object(a.a)(Object(a.a)({},r.b.tenMatHang),{},{width:150,fixed:!1}),s.giaNhapNCC,Object(a.a)(Object(a.a)({},u.a.tenDonViTinh),{},{align:"center",width:90}),Object(a.a)(Object(a.a)({},o.a.tenNhomMatHang),{},{align:"center"}),d.a.ngayNhan,d.a.donMuaHangId]}}},929:function(t,n,e){"use strict";e.r(n);var a=e(44),c=e(0),i=e.n(c),r=e(302),o=e(54),u=e(666),l=e(33),d=e(667),b=e(677),s=e(696),h=e(664),g=e(750),O=e(212),m=e(663),j=e(356),f=e(330),p=e(335),v=e(98),N=e(5),C=e.n(N),H=e(12),S=e(14),M=e(9),w=e(39),y=e.n(w),x=e(57),T=e(183),D=e(450),I=e(751),L=e(220),k=e(10),F=e(366),B=e(105),E=e(215),z=e(15),G=function(t){var n=t.form,e=Object(o.b)(),a=Object(o.c)((function(t){return t.donMuaHang})),c=a.isRutGon,r=a.isNhapSLNhan,d=Object(o.c)((function(t){return t.matHang})).matHangs,s=Object(o.c)((function(t){return t.matHangDat})),h=s.matHangDats,g=(s.tongTienDonHang,Object(o.c)((function(t){return t.nhaCungCap})).nhaCungCapId),O=Object(o.c)((function(t){return t.form})).datas[l.c.donMuaHangModal];function m(){return m=Object(M.a)(C.a.mark((function t(){var a,c,i;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(window.confirm("X\xe1c nh\u1eadn t\u1ea1o?")){t.next=2;break}return t.abrupt("return");case 2:return a=Object.values(h).filter((function(t){return t.soLuongDat})).reduce((function(t,n){return Object(S.a)(Object(S.a)({},t),{},Object(H.a)({},n.id,n))}),{}),t.next=5,n.validateFields();case 5:return c=t.sent,c=Object(k.convertMomentToString)(b.a.getInputFields(),c),t.next=9,e(Object(L.c)(c));case 9:return c=t.sent,i=Object(S.a)(Object(S.a)({},c),{},{matHangDats:a}),t.next=13,e(Object(j.c)(i));case 13:localStorage.setItem("matHangDats",JSON.stringify({})),e(Object(j.i)(!1)),e(Object(F.c)(c.nhaCungCapId));case 16:case"end":return t.stop()}}),t)}))),m.apply(this,arguments)}function f(){return(f=Object(M.a)(C.a.mark((function t(){var a,c,i,r,o;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.validateFields();case 2:if(a=t.sent,c=a.ngayNhan,i=y()(c).format("L"),window.confirm("X\xe1c nh\u1eadn c\u1eadp nh\u1eadt?")){t.next=7;break}return t.abrupt("return");case 7:return r=Object.values(h).filter((function(t){return t.soLuongDat||t.soLuongNhan})).reduce((function(t,n){return Object(S.a)(Object(S.a)({},t),{},Object(H.a)({},n.id,n))}),{}),o=Object(S.a)(Object(S.a)({},O),{},{matHangDats:r,ngayNhan:i}),t.next=11,e(Object(j.f)(o));case 11:localStorage.setItem("matHangDats",JSON.stringify({})),n.resetFields(),e(Object(E.a)({modalId:l.c.donMuaHangModal})),e(Object(j.i)(!1)),e(Object(F.c)(O.nhaCungCapId));case 16:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function p(){return v.apply(this,arguments)}function v(){return(v=Object(M.a)(C.a.mark((function t(){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(window.confirm("X\xe1c nh\u1eadn x\xf3a?")){t.next=2;break}return t.abrupt("return");case 2:localStorage.setItem("matHangDats",JSON.stringify({})),e(Object(E.a)({modalId:l.c.donMuaHangModal})),e(Object(F.c)(g)),e(Object(j.i)(!1)),n.resetFields(),Object(B.d)();case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return i.a.useEffect((function(){if(O)n.setFieldsValue(O),e(Object(F.b)(O)),localStorage.setItem("matHangDats",JSON.stringify((null===O||void 0===O?void 0:O.matHangDats)||{}));else{var t=localStorage.getItem("nhaCungCapId")||"";e(Object(L.a)(t)),t&&d&&e(Object(F.c)(t)),n.setFieldsValue({nhaCungCapId:t})}}),[d,c,O]),i.a.useEffect((function(){O&&e(Object(j.i)(!0))}),[O]),Object(z.b)(z.a,{children:Object(z.b)(u.a,{header:Object(z.b)("div",{className:"font-weight-bold mt-1",children:Object(z.b)("div",{children:"Th\xf4ng Tin \u0110\u01a1n H\xe0ng Mua"})}),body:Object(z.c)("div",{className:"form-input-aside",style:{padding:"5px"},children:[Object(z.b)(k.MyForm,{labelCol:{span:8},wrapperCol:{span:16},form:n,options:Object(k.getFormItemFields)(b.a.getInputFields()),children:Object(z.b)(I.a,{isAddNew:!0,isTrangQuanLy:!0,onAfterSelect:function(t){localStorage.setItem("nhaCungCapId",t),e(Object(F.c)(t))},rules:[{required:!0,message:"Ch\u01b0a nh\u1eadp"}],disabled:!!O})}),O?Object(z.b)("div",{children:Object(z.b)(x.a,{type:r?"primary":"dashed",onClick:function(){e(Object(j.g)(!r))},children:"M\u1edf nh\u1eadp s\u1ed1 l\u01b0\u1ee3ng nh\u1eadn"})}):null]}),footer:O?Object(z.c)("div",{children:[Object(z.b)(x.a,{danger:!0,type:"dashed",icon:Object(z.b)(T.a,{}),onClick:p,children:"X\xf3a SL"}),Object(z.b)(x.a,{type:"primary",icon:Object(z.b)(D.a,{}),onClick:function(){return f.apply(this,arguments)},children:"C\u1eadp nh\u1eadt phi\u1ebfu"})]}):Object(z.c)("div",{children:[Object(z.b)(x.a,{danger:!0,type:"dashed",icon:Object(z.b)(T.a,{}),onClick:p,children:"X\xf3a SL"}),Object(z.b)(x.a,{type:"primary",icon:Object(z.b)(D.a,{}),onClick:function(){return m.apply(this,arguments)},children:"T\u1ea1o phi\u1ebfu"})]})})})},J=e(692),V=e(687),K=e(670),R=e(217),X=l.c.donMuaHangModal,P=Object(c.memo)((function(t){var n=t.pageData,e=Object(o.c)((function(t){return t.hideColumns})),a=null===e||void 0===e?void 0:e[X||""],c=i.a.useMemo((function(){var t=[l.a.stt,V.b.tenMatHang,K.a.tenNhomMatHang,s.a.soLuongDat,s.a.soLuongNhan,R.a.tenDonViTinh,s.a.giaNhapNCC],n=[s.a.thanhTien];return[{id:0,colSpan:0+t.reduce((function(t,n){var e=n.id;return t+((null===a||void 0===a?void 0:a[e])?0:1)}),0),cellClassName:"text-center font-weight-bold text-danger"},{id:1,colSpan:n.reduce((function(t,n){var e=n.id;return t+((null===a||void 0===a?void 0:a[e])?0:1)}),0),cellClassName:"text-right font-weight-bold text-small text-danger",render:function(t){return Object(k.formatNumber)(t)}},{id:2,colSpan:[].reduce((function(t,n){var e=n.id;return t+((null===a||void 0===a?void 0:a[e])?0:1)}),0)}]}),[a]),r=i.a.useMemo((function(){return n.reduce((function(t,n){var e=t.thanhTien+(n.thanhTien||0);return Object(S.a)(Object(S.a)({},t),{},{thanhTien:e})}),{tong:"T\u1ed5ng ti\u1ec1n",thanhTien:0})}),[n]),u=i.a.useMemo((function(){return["tong","thanhTien"].map((function(t,n){return Object(H.a)({},n,r[t])}))}),[r]);return Object(z.b)(J.a,{columns:c,dataSource:u})})),A=l.c.donMuaHangModal;n.default=function(){var t=Object(o.b)(),n=Object(o.c)((function(t){var n;return null===(n=t.tagsPage)||void 0===n?void 0:n[A]})),e=Object(o.c)((function(t){return t.donMuaHang})),c=e.tabsData,i=e.loading,N=e.isRutGon,C=e.isNhapSLNhan,H=e.pageSize,S=Object(o.c)((function(t){return t.matHangDat})).matHangDats,M=Object(o.c)((function(t){return t.form})).datas[l.c.donMuaHangModal],w=Object(m.a)({Instance:O.a,onPending:j.e,addSelectedId:j.a}),y=Object(r.useForm)(),x=Object(a.a)(y,1)[0];return Object(z.c)("div",{className:"donMuaHang-page",css:d.a,children:[Object(z.b)(u.b,{className:"tabs",options:c,activeKey:N?"rutGon":n?"aside":"",onTabClick:function(n){"rutGon"===n?t(Object(j.i)(!N)):"aside"===n?t(Object(p.b)({tagPageId:A})):"taiExcel"===n?t(Object(f.b)({tableId:A,constants:b.a,fileSheet:"donMuaHangSheet",fileName:"donMuaHangName"})):"themMatHang"===n&&t(Object(E.c)({modalId:l.c.matHangModal}))}}),Object(z.c)("div",{className:"tabs-main",children:[n&&Object(z.b)(G,{form:x}),Object(z.b)("div",{className:"aside-main form-input-table",children:Object(z.b)(h.a,{pagination:!0,isEdit:!0,inputOptions:{isNhapSLNhan:C},onCallbackDataSource:function(t){return Object(v.orderBy)(t,"tenMatHang")},constants:M?s.b:s.a,actions:w,datas:S,loading:i,modalId:A,form:x,pageSize:H,onChange:function(n){return t(Object(j.h)(n.pageSize))},onBlur:function(n){return t(Object(F.d)({name:n.target.name,value:n.target.value}))},summary:function(t){return M?Object(z.b)(P,{pageData:t}):null}})})]}),Object(z.b)(g.a,{})]})}}}]);