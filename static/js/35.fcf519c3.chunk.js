(this["webpackJsonptu-bon"]=this["webpackJsonptu-bon"]||[]).push([[35],{1022:function(e,n,t){"use strict";t.r(n);var a=t(13),c=t(8),o=t(5),i=t.n(o),l=t(9),r=t(40),u=t(0),d=t.n(u),s=t(56),b=t(7),m=t(112),f=t(157),g=t(99),h=t(474),v=t(476),O=t(332),j=t(712),p=t(64),y=t(714),N=t(713),w=t(711),T=t(368),C=t(125),x=t(69),M=t(350),D=t(126),I=t(217),F=t(249),S={congNgay:{id:"congNgay",name:"C\xf4ng ng\xe0y",width:100,className:"text-small font-weight-bold",align:"center",isSearch:!0,form:{type:"input-number"}},congTangCaNgay:{id:"congTangCaNgay",name:"T\u0103ng ca",width:100,className:"text-small font-weight-bold",align:"center",form:{type:"input-number"}},hoTroXang:{id:"hoTroXang",name:"HT c\u01a1m",width:100,className:"text-small font-weight-bold",align:"center",form:{type:"input-number-format"}},lyDoVang:{id:"lyDoVang",name:"L\xfd do v\u1eafng",width:100,className:"text-small font-weight-bold",align:"center",form:{type:"select",options:[{label:"NP",value:"NP"},{label:"KP",value:"KP"},{label:"CG",value:"CG"}]}},getTableColumns:function(){return[Object(c.a)(Object(c.a)({},b.constants.stt),{},{fixed:!1}),Object(c.a)(Object(c.a)({},x.a.hoTen),{},{fixed:!1}),this.congNgay,F.a.luongNgay,I.a.tenCongTrinh,b.constants.capNhatRow]},getInputFields:function(){return[this.congNgay]},getExcelFields:function(){return[C.b.maNV,x.a.hoTen,C.b.boPhanId,D.a.chucVuName,M.a.caLamViecName,this.congNgay,this.congTangCaNgay,this.hoTroXang,this.lyDoVang]}},V={tong:{id:"tong",name:"T\u1ed5ng",width:70,className:"text-small font-weight-bold",align:"center"},diLam:{id:"diLam",name:"\u0110i l\xe0m",width:70,className:"text-small font-weight-bold",align:"center"},vang:{id:"vang",name:"v\u1eafng",width:70,className:"text-small font-weight-bold",align:"center"},getTableColumns:function(){return[Object(c.a)(Object(c.a)({},M.a.caLamViecName),{},{fixed:!1}),this.tong,this.diLam,this.vang]},getInputFields:function(){return[]}},k=t(402),P=t(794),E=t(178),L=t(25),A=p.c.diemDanhModal,K=function(e){var n,t=e.selectedTime,a=Object(O.useForm)(),o=Object(r.a)(a,1)[0],u=Object(O.useForm)(),m=Object(r.a)(u,1)[0],f=Object(s.b)(),g=Object(s.c)((function(e){return e.form})),h=g.modal,v=g.datas,j=d.a.useMemo((function(){var e;return!!(null===h||void 0===h||null===(e=h[A])||void 0===e?void 0:e.open)}),[null===(n=h[A])||void 0===n?void 0:n.open]),p=null===v||void 0===v?void 0:v[A];function y(){return(y=Object(l.a)(i.a.mark((function e(){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!0,e.next=3,m.validateFields();case 3:return n=e.sent,e.next=6,f(Object(E.d)(n));case 6:return a=e.sent,e.next=9,f(Object(k.e)({selectedTime:t,diemDanhData:Object(c.a)(Object(c.a)({},a),{},{id:p.id})}));case 9:e.sent&&f(Object(b.closeModal)({modalId:A}));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}d.a.useEffect((function(){var e=null===v||void 0===v?void 0:v[A];e?(o.setFieldsValue(e),m.setFieldsValue(e)):(o.resetFields(),m.resetFields())}),[p]);var N=[C.b.maNV,x.a.hoTen];return Object(L.c)(b.MyModal,{title:"\u0110i\u1ec3m Danh",visible:j,onClose:function(){f(Object(b.closeModal)({modalId:A}))},onOkModal:function(){return y.apply(this,arguments)},width:700,modalId:A,datas:v,children:[Object(L.b)(b.MyForm,{form:o,options:Object(b.getFormItemFields)(N),labelCol:{span:8},wrapperCol:{span:16}}),Object(L.b)(b.MyForm,{form:m,options:Object(b.getFormItemFields)(S.getInputFields()),labelCol:{span:8},wrapperCol:{span:16},children:Object(L.b)(P.a,{})})]})},R=p.c.thongKeDiemDanhModal,B=function(e){var n,t=e.datas,o=Object(s.b)(),i=Object(s.c)((function(e){return e.form})).modal,l=Object(s.c)((function(e){return e.caLamViec})).caLamViecs,r=d.a.useMemo((function(){var e;return!!(null===i||void 0===i||null===(e=i[R])||void 0===e?void 0:e.open)}),[null===(n=i[R])||void 0===n?void 0:n.open]),u=d.a.useMemo((function(){return r?Object.values(t).reduce((function(e,n){var t=n.caLamViecId,o=n.congNgay,i=n.congTangCaNgay,r=null===l||void 0===l?void 0:l[t||""],u=(null===e||void 0===e?void 0:e[t])||{},d=(null===u||void 0===u?void 0:u.tong)||0,s=(null===u||void 0===u?void 0:u.diLam)||0,b=o||i?1:0,m=(null===u||void 0===u?void 0:u.vang)||0,f=o||i?0:1;return Object(c.a)(Object(c.a)({},e),{},Object(a.a)({},t,Object(c.a)(Object(c.a)({},r),{},{tong:d+1,diLam:s+b,vang:m+f})))}),{}):{}}),[r,t,l]);return Object(L.b)(b.MyModal,{title:"Th\u1ed1ng K\xea \u0110i\u1ec3m Danh",visible:r,onClose:function(){return o(Object(b.closeModal)({modalId:R}))},width:700,modalId:R,datas:t,children:Object(L.b)(N.a,{pagination:!0,scroll:{x:500},constants:V,datas:u})})},W=t(233),X=t(14),G=t(718),J=p.c.diemDanhModal,H=Object(u.memo)((function(e){var n=e.pageData,t=Object(s.c)((function(e){return e.hideColumns})),o=null===t||void 0===t?void 0:t[J||""],i=d.a.useMemo((function(){var e=[b.constants.stt,x.a.hoTen,S.congNgay],n=[F.a.luongNgay],t=[I.a.tenCongTrinh,b.constants.capNhatRow];return[{id:0,colSpan:1+e.reduce((function(e,n){var t=n.id;return e+((null===o||void 0===o?void 0:o[t])?0:1)}),0),cellClassName:"text-center font-weight-bold text-danger"},{id:1,colSpan:n.reduce((function(e,n){var t=n.id;return e+((null===o||void 0===o?void 0:o[t])?0:1)}),0),cellClassName:"text-right font-weight-bold text-small text-danger",render:function(e){return Object(b.formatNumber)(e)}},{id:2,colSpan:t.reduce((function(e,n){var t=n.id;return e+((null===o||void 0===o?void 0:o[t])?0:1)}),0)}]}),[o]),l=d.a.useMemo((function(){return n.reduce((function(e,n){var t=e.luongNgay+(n.luongNgay||0);return Object(c.a)(Object(c.a)({},e),{},{luongNgay:t})}),{tong:"T\u1ed5ng ti\u1ec1n",luongNgay:0})}),[n]),r=d.a.useMemo((function(){return["tong","luongNgay"].map((function(e,n){return Object(a.a)({},n,l[e])}))}),[l]);return Object(L.b)(G.a,{columns:i,dataSource:r})})),U=p.c.diemDanhModal;n.default=function(){var e,n,t=Object(s.b)(),o=Object(s.c)((function(e){return e.congTrinh})).congTrinhs,u=Object(s.c)((function(e){return e.salary})).salaries,C=Object(O.useForm)(),x=Object(r.a)(C,1)[0],M=Object(b.useDatePicker)(),D=Object(r.a)(M,2),I=D[0],F=D[1];d.a.useEffect((function(){x.setFieldsValue({congNgay:1}),t(T.g())}),[]),d.a.useEffect((function(){function e(){return(e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))).apply(this,arguments)}o&&function(){e.apply(this,arguments)}()}),[o]),d.a.useEffect((function(){}),[I,u]),d.a.useEffect((function(){return t(Object(k.c)(I)),function(){Object(X.j)("diemDanhNgay")}}),[I]);var V=Object(s.c)((function(e){return{nhanSusWorking:e.nhanSu.nhanSusWorking,chucVus:e.chucVu.chucVus,selectedRows:e.table.selectedRows}})),A=V.nhanSusWorking,R=V.chucVus,G=V.selectedRows,J=Object(s.c)((function(e){return e.diemDanh})),q=J.tabsData,z=J.loading,Q=J.diemDanhsDay,Y=Object(w.a)({Instance:W.a,onPending:k.d,addSelectedId:k.a}),Z=Object(s.c)((function(e){return e.account})).accountData,$=null===Z||void 0===Z||null===(e=Z.paths)||void 0===e||null===(n=e.diemDanh)||void 0===n?void 0:n.edit;function _(){return(_=Object(l.a)(i.a.mark((function e(){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=x.getFieldsValue(),e.next=3,t(Object(E.d)(n));case 3:if(n=e.sent,0!==(a=G[U]||[]).length){e.next=7;break}return e.abrupt("return",m.b.info("Ch\u01b0a ch\u1ecdn d\u1eef li\u1ec7u!"));case 7:return e.next=9,t(Object(k.f)({selectedTime:I,nhanSuArray:a,noiDungDiemDanhs:n}));case 9:t(Object(b.initTableState)());case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ee=d.a.useMemo((function(){var e=t(Object(T.c)(A,{congTyId:"thuanPhat"}));return Object.entries(e).reduce((function(e,n){var t=Object(r.a)(n,2),o=t[0],i=t[1],l=(null===Q||void 0===Q?void 0:Q[o])||{},u=Object(c.a)(Object(c.a)({},i),l);return Object(c.a)(Object(c.a)({},e),{},Object(a.a)({},o,u))}),{})}),[A,R,u,Q]);return Object(L.c)("div",{className:"diemDanh-page",css:y.a,children:[Object(L.b)(j.b,{className:"tabs",options:q,activeKey:"all",onTabClick:function(e){"taiExcel"===e?t(Object(b.downloadExcel)({tableId:U,constants:S,fileSheet:"diemDanhTP",fileName:"diemDanhTP"})):"xemThongKe"===e&&t(Object(b.openModal)({modalId:p.c.thongKeDiemDanhModal}))}}),Object(L.c)(f.a,{className:"form-selects",gutter:10,style:{marginTop:"7px"},children:[Object(L.b)(g.a,{sm:6,md:5,lg:5,children:F.getDayRender()}),Object(L.b)(g.a,{sm:4,md:5,lg:6,children:Object(L.b)(P.a,{label:"CT",form:x})}),Object(L.b)(g.a,{sm:14,md:14,lg:13,children:Object(L.c)(h.a,{layout:"inline",form:x,children:[Object(L.b)(h.a.Item,{name:S.congNgay.id,children:Object(L.b)(v.a,{placeholder:"C\xf4ng ng\xe0y",min:0})}),Object(L.b)(b.MyButton,{onClick:function(){return _.apply(this,arguments)},children:"\u0110i\u1ec3m danh"})]})})]}),Object(L.b)("div",{className:"tabs-main",children:Object(L.b)("div",{className:"aside-main",children:Object(L.b)(N.a,{isEdit:$,pagination:!0,constants:S,actions:Y,datas:ee,loading:z,modalId:U,summary:function(e){return Object(L.b)(H,{pageData:e})},isSelection:!0})})}),Object(L.b)(K,{selectedTime:I}),Object(L.b)(B,{datas:ee})]})}},715:function(e,n,t){"use strict";t.d(n,"a",(function(){return o}));var a=t(0),c=(t(331),t(158)),o=(t(78),t(215),t(124),t(239),t(330),t(360),function(e,n){var t=arguments;if(null==n||!c.d.call(n,"css"))return a.createElement.apply(void 0,t);var o=t.length,i=new Array(o);i[0]=c.a,i[1]=Object(c.c)(e,n);for(var l=2;l<o;l++)i[l]=t[l];return a.createElement.apply(null,i)})},716:function(e,n,t){"use strict";function a(e,n){if(null==e)return{};var t,a,c=function(e,n){if(null==e)return{};var t,a,c={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||(c[t]=e[t]);return c}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(c[t]=e[t])}return c}t.d(n,"a",(function(){return a}))},718:function(e,n,t){"use strict";t(0);var a=t(473),c=t(25),o=a.a.Summary,i=o.Row,l=o.Cell;n.a=function(e){var n,t=e.columns,a=e.dataSource;return Object(c.b)(i,{children:null===t||void 0===t||null===(n=t.map)||void 0===n?void 0:n.call(t,(function(e,n){var t=null===e||void 0===e?void 0:e.id,o=(null===e||void 0===e?void 0:e.colSpan)||0,i=(null===e||void 0===e?void 0:e.cellClassName)||"",r=(null===e||void 0===e?void 0:e.valueStyle)||{},u=(null===e||void 0===e?void 0:e.valueClassName)||"",d=null===e||void 0===e?void 0:e.render,s=(null===a||void 0===a?void 0:a[n])||{},b=(null===s||void 0===s?void 0:s[t])||"";return d&&(b=d(b,s,n)),Object(c.b)(l,{index:n,colSpan:o,className:i,children:Object(c.b)("div",{style:r,className:u,children:b})},t)}))})}},794:function(e,n,t){"use strict";var a=t(0),c=t.n(a),o=t(59),i=t(110),l=t(7),r=t(56),u=t(178),d=t(5),s=t.n(d),b=t(9),m=t(217),f=t(711),g=t(129),h=t(64),v=t(25),O=h.c.congTrinhModal,j=function(e){var n=e.onAfterAddFinish,t=Object(f.a)({Instance:g.a,onPending:u.f,addSelectedId:u.a}),a=Object(r.b)(),o=Object(r.c)((function(e){return e.form})),i=o.modal,d=o.datas,h=c.a.useMemo((function(){var e;return!!(null===i||void 0===i||null===(e=i[O])||void 0===e?void 0:e.open)}),[i[O]]);function j(){return(j=Object(b.a)(s.a.mark((function e(c,o){var i,r,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=!0,r=Object(l.convertMomentToString)(m.a.getInputFields(),o),!o){e.next=16;break}if(null===c||void 0===c?void 0:c.id){e.next=11;break}return e.next=6,a(t.onAddAsync({validatedValues:r}));case 6:i=e.sent,null===n||void 0===n||n(null===(u=i)||void 0===u?void 0:u.id),i=Boolean(i),e.next=16;break;case 11:return e.t0=Boolean,e.next=14,a(t.onUpdateAsync({currentData:c,validatedValues:r}));case 14:e.t1=e.sent,i=(0,e.t0)(e.t1);case 16:i&&a(Object(l.closeModal)({modalId:O}));case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(v.b)(l.MyModal,{form:!0,title:"CongTrinh",visible:h,onClose:function(){a(Object(l.closeModal)({modalId:O}))},onOkModal:function(e,n){return j.apply(this,arguments)},formOptions:Object(l.getFormItemFields)(m.a.getInputFields()),formProps:{labelCol:{span:8},wrapperCol:{span:16}},width:700,modalId:O,datas:d})},p=t(55);n.a=function(e){var n=e.form,t=e.name,a=e.mode,d=e.label,s=e.labelCol,b=e.wrapperCol,m=e.rules,f=e.isAddNew,g=Object(r.b)(),O=Object(r.c)((function(e){return e.congTrinh})).congTrinhs,y=c.a.useMemo((function(){return Object.values(O).filter((function(e){return e.active})).map((function(e){var n="".concat(e.tenCongTrinh);return{value:e.id,label:n}}))}),[O]);var N=Object(v.b)(l.MyFormItem,{label:d||"C\xf4ng tr\xecnh",type:"select",name:t||"congTrinhId",innerProps:{mode:a,showSearch:!0,allowClear:!0,filterOption:l.onSelectSearch,onChange:function(e){g(Object(u.a)(e))},notFoundContent:f?Object(v.b)("div",{children:Object(v.b)(o.a,{icon:Object(v.b)(p.a,{}),type:"primary",onClick:function(){return g(Object(l.openModal)({modalId:h.c.congTrinhModal}))},children:"Th\xeam m\u1edbi"})}):Object(v.b)(i.a,{})},options:y,rules:m||[]});return n?Object(v.c)(v.a,{children:[Object(v.b)(l.MyForm,{form:n,labelCol:s||{span:8},wrapperCol:b||{span:16},children:N}),Object(v.b)(j,{onAfterAddFinish:function(e){n.setFieldsValue({congTrinhId:e})}})]}):Object(v.c)(v.a,{children:[N,Object(v.b)(j,{})]})}}}]);