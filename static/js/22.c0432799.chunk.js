(this["webpackJsonptu-bon"]=this["webpackJsonptu-bon"]||[]).push([[22],{702:function(t,e,a){"use strict";a.d(e,"a",(function(){return d}));var n=a(13),i=a(5),o=a.n(i),c=a(30),r=a(8),u=a(15),l=a(122);function d(t){var e=t.Instance,a=t.onPending,i=t.addSelectedId,d=t.onDelete,s=t.onActive;return{onAddAsync:function(t){return function(){var n=Object(r.a)(o.a.mark((function n(r){var l,d,s,b,h;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return l=t.validatedValues,d=l.otherPath,r(a(!0)),s=new e,b=d?[].concat(Object(c.a)(s.pathDatas),Object(c.a)(d)):s.pathDatas,n.next=7,Object(u.a)(b,l);case 7:return h=n.sent,i&&r(null===i||void 0===i?void 0:i(null===h||void 0===h?void 0:h.id)),r(a(!1)),n.abrupt("return",h);case 11:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()},onUpdateAsync:function(t){return function(){var n=Object(r.a)(o.a.mark((function n(i){var r,d,s,b,h,f;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.currentData,d=t.validatedValues,s=r.id,b=r.otherPath,s){n.next=4;break}return n.abrupt("return",l.b.error("Ch\u01b0a c\xf3 id"));case 4:return i(a(!0)),h=new e,f=b?[].concat(Object(c.a)(h.pathDatas),Object(c.a)(b),[s]):[].concat(Object(c.a)(h.pathDatas),[s]),n.next=9,Object(u.h)(f,d);case 9:return i(a(!1)),n.abrupt("return",!0);case 11:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()},onActiveAsync:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){var i=Object(r.a)(o.a.mark((function i(r){var l,d,b,h,f,g,v;return o.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(l=t.id,d=t.active,b=t.otherPath,h=t.name,!s){i.next=3;break}return i.abrupt("return",r(s(l,d)));case 3:if(window.confirm("X\xe1c nh\u1eadn?")){i.next=5;break}return i.abrupt("return",null);case 5:return r(a(!0)),f=new e,g=b?[].concat(Object(c.a)(f.pathDatas),Object(c.a)(b),[l]):[].concat(Object(c.a)(f.pathDatas),[l]),v=h||"active",i.next=11,Object(u.h)(g,Object(n.a)({},v,d));case 11:r(a(!1));case 12:case"end":return i.stop()}}),i)})));return function(t){return i.apply(this,arguments)}}()},onDeleteAsync:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){var i=Object(r.a)(o.a.mark((function i(r){var l,s,b,h,f,g,v,m;return o.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!d){i.next=2;break}return i.abrupt("return",r(d(t)));case 2:return s=t.id,b=t.otherPath,r(a(!0)),h=new e,f=b?[].concat(Object(c.a)(b),[s]).join("/"):s,g=h.getPathDatas(f),v=h.getPathDeleted(f),l={},Object(n.a)(l,g,null),Object(n.a)(l,v,t),m=l,i.next=11,Object(u.h)(null,m);case 11:return r(a(!1)),i.abrupt("return",!0);case 13:case"end":return i.stop()}}),i)})));return function(t){return i.apply(this,arguments)}}()}}}},703:function(t,e,a){"use strict";var n=a(42),i=a(12),o=a(228),c=a(0),r=a.n(c),u=a(57),l=a(9),d=a(350),s=a(41),b=a(17),h=["modalId","constants","actions","datas","loading","isSelection","form","rowSelection","summary","isEdit","onBlur","inputOptions"];e.a=function(t){var e=t.modalId,a=t.constants,c=t.actions,f=t.datas,g=t.loading,v=t.isSelection,m=t.form,O=t.rowSelection,j=t.summary,p=t.isEdit,w=t.onBlur,y=t.inputOptions,D=Object(o.a)(t,h),N=Object(u.b)(),T=Object(u.c)((function(t){return t.table})).selectedRowKeys,x=Object(u.c)((function(t){return t.hideColumns})),C=null===x||void 0===x?void 0:x[e||""],S=r.a.useMemo((function(){var t={};return v?t.rowSelection=Object(i.a)({selectedRowKeys:T[e||""]||[],onChange:function(t,a){N(Object(d.d)({tableId:e,selectedRowKeys:t,selectedRows:a}))}},O):delete t.rowSelection,t}),[v,T]);function M(t,e,a){if(!p)return Object(s.e)();var n=a||"active",o=Object(i.a)(Object(i.a)({},t),{},{active:e,name:n});N(null===c||void 0===c?void 0:c.onActiveAsync(o))}function k(t){if(!p)return Object(s.e)();(null===c||void 0===c?void 0:c.onDeleteAsync)&&N(c.onDeleteAsync(t))}var P=Object(l.useSearchText)(),B=Object(n.a)(P,3),I=B[0],A=B[1],H=B[2],Y=r.a.useMemo((function(){var t=Object(l.getTableColumns)(a,{onActiveItem:M,onDeleteItem:k,searchText:I,searchInput:H,setSearchText:A,modalId:e,isEdit:p,constants:a,form:m,onBlur:w,inputOptions:y});return C&&(t=t.filter((function(t){return!(null===C||void 0===C?void 0:C[t.id])}))),t}),[I,C,a,y]),R=r.a.useMemo((function(){var e=Object.values(f||{});return(null===t||void 0===t?void 0:t.onCallbackDataSource)&&(e=t.onCallbackDataSource(e)),e}),[f]);return Object(b.b)("div",{className:"table",children:Object(b.b)(l.MyTable,Object(i.a)(Object(i.a)(Object(i.a)({},S),D),{},{rowKey:"id",height:"100%",loading:g,columns:Y,dataSource:R,summary:j||null}))})}},706:function(t,e,a){"use strict";a.d(e,"a",(function(){return g}));var n=a(42),i=a(0),o=a.n(i),c=a(36),r=a.n(c),u=a(456),l=a(216),d=a(83),s=a(41),b=a(230),h=a(17),f=function(t){var e=t||{},a=e.disabledDate,c=e.editabledDate,d=e.className,f=e.defaultTime,g=void 0===f?r()():f,v=e.disabled,m=Object(i.useState)(g),O=Object(n.a)(m,2),j=O[0],p=O[1],w=Object(i.useState)((function(){return Object(s.a)(g)})),y=Object(n.a)(w,2),D=y[0],N=y[1],T=o.a.useMemo((function(){return null===c||void 0===c?void 0:c(j)}),[j,c]);function x(t){var e=Object(s.a)(t);N(e),p(t)}var C=function(t){var e=t.label,n=t.format,i=t.width,o=t.picker;return Object(h.b)(u.a.Item,{label:e,children:Object(h.b)(l.a,{locale:b.a,style:{width:i},format:n,picker:o,value:j,onChange:x,disabledDate:a,disabled:v,className:d})})};return[j,{getDayRender:function(){return C({picker:"date",label:"Ng\xe0y: ",format:"DD/MM/YY",width:"110px"})},getMonthRender:function(){return C({picker:"month",label:"Th\xe1ng: ",format:"MM/YYYY",width:"110px"})},getYearRender:function(){return C({picker:"year",label:"N\u0103m: ",format:"YYYY",width:"110px"})},isEditabledDate:T,selectedTime:j,yearAndDayOfYear:D,getDayOfAll:function(){return null===D||void 0===D?void 0:D.dayOfAll},onUpdate:x}]};f.defaultProps={disabledDate:d.noop,width:"105px",format:"DD/MM/YY",className:"",defaultTime:r()(),disabled:!1};var g=f},710:function(t,e,a){"use strict";a(702);var n=a(706);a.d(e,"a",(function(){return n.a}))},711:function(t,e,a){"use strict";a(0);var n=a(455),i=a(17),o=n.a.Summary,c=o.Row,r=o.Cell;e.a=function(t){var e,a=t.columns,n=t.dataSource;return Object(i.b)(c,{children:null===a||void 0===a||null===(e=a.map)||void 0===e?void 0:e.call(a,(function(t,e){var a=null===t||void 0===t?void 0:t.id,o=(null===t||void 0===t?void 0:t.colSpan)||0,c=(null===t||void 0===t?void 0:t.cellClassName)||"",u=(null===t||void 0===t?void 0:t.valueStyle)||{},l=(null===t||void 0===t?void 0:t.valueClassName)||"",d=null===t||void 0===t?void 0:t.render,s=(null===n||void 0===n?void 0:n[e])||{},b=(null===s||void 0===s?void 0:s[a])||"";return d&&(b=d(b,s,e)),Object(i.b)(r,{index:e,colSpan:o,className:c,children:Object(i.b)("div",{style:u,className:l,children:b})},a)}))})}},977:function(t,e,a){"use strict";a.r(e);var n=a(42),i=a(0),o=a.n(i),c=a(57),r=a(350),u=a(351),l=a(227),d=a(704),s=a(29),b=a(705),h=a(12),f=a(139),g=a(157),v=a(316),m=a(9),O={tonDau:{id:"tonDau",name:"T\u1ed3n \u0111\u1ea7u",width:60,className:"text-small",align:"right"},nhap:{id:"nhap",name:"Nh\u1eadp",width:50,className:"text-small font-weight-bold text-danger",align:"right"},tongSoLuong:{id:"tongSoLuong",name:"T\u1ed5ng SL",width:65,className:"text-small font-weight-bold",align:"right"},xuat:{id:"xuat",name:"Xu\u1ea5t",width:50,className:"text-small font-weight-bold text-danger",align:"right"},tonCuoi:{id:"tonCuoi",name:"T\u1ed3n cu\u1ed1i",width:65,className:"text-small font-weight-bold",align:"right"},chiPhi:{id:"chiPhi",name:"Chi ph\xed",width:80,className:"text-small font-weight-bold",align:"right",render:m.numberRender},doanhThu:{id:"doanhThu",name:"Doanh thu",width:80,className:"text-small font-weight-bold",align:"right",render:m.numberRender},getTableColumns:function(){return[s.a.stt,Object(h.a)(Object(h.a)({},f.a.tenMatHang),{},{width:130}),Object(h.a)(Object(h.a)({},v.a.tenNhomMatHang),{},{width:110}),Object(h.a)(Object(h.a)({},f.a.giaNhapMatHang),{},{width:70}),Object(h.a)(Object(h.a)({},f.a.giaBanMatHang),{},{width:70}),Object(h.a)(Object(h.a)({},g.a.tenDonViTinh),{},{width:90}),this.tonDau,this.nhap,this.tongSoLuong,this.xuat,this.tonCuoi,this.chiPhi,this.doanhThu]},getInputFields:function(){return[]},getExcelFields:function(){return[s.a.stt,f.a.tenMatHang,v.a.tenNhomMatHang,f.a.giaNhapMatHang,f.a.giaBanMatHang,g.a.tenDonViTinh,this.tonDau,this.nhap,this.tongSoLuong,this.xuat,this.tonCuoi,this.chiPhi,this.doanhThu]}},j=a(703),p=a(11),w=a(20),y=a(21),D=function(t){Object(w.a)(a,t);var e=Object(y.a)(a);function a(){var t;Object(p.a)(this,a);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))).pathDatas=["quanLyBaoCao","baoCaoTuBon","datas"],t.pathDeleted=["quanLyBaoCao","baoCaoTuBon","deleted"],t.tonCuoiPaths=["quanLyBaoCao","baoCaoTuBon","tonCuoi"],t.initData={},t}return a}(m.AppClass),N=a(702),T=a(397),x=a(60),C=a(66),S=a(17);var M=function(t){var e,a=t.selectedTime,n=t.dateTimePicker,i=Object(c.b)();return Object(S.b)(S.a,{children:Object(S.b)(d.a,{header:Object(S.b)("div",{className:"font-weight-bold",children:Object(S.b)("span",{children:"Th\xf4ng Tin Trang "})}),body:Object(S.c)("div",{className:"form-input-aside",style:{padding:"5px"},children:[Object(S.b)("div",{children:(null===n||void 0===n||null===(e=n.getDayRender)||void 0===e?void 0:e.call(n))||null}),Object(S.b)("div",{className:"mt-1",children:Object(S.b)(x.a,{block:!0,type:"primary",onClick:function(){return i(Object(T.e)(a))},children:"L\u01b0u b\xe1o c\xe1o ng\xe0y"})}),Object(S.b)("div",{className:"mt-1",children:Object(S.b)(x.a,{block:!0,type:"primary",onClick:function(){return i(Object(T.f)(a))},children:"L\u01b0u b\xe1o c\xe1o t\u1eeb \u0111\u1ea7u th\xe1ng t\u1edbi cu\u1ed1i th\xe1ng"})})]}),footer:Object(S.b)("div",{children:Object(S.b)(x.a,{icon:Object(S.b)(C.a,{}),onClick:function(){i(Object(u.b)({tagPageId:s.d.baoCaoTuBonNgayModal}))},children:"\u0110\xf3ng m\u1edf r\u1ed9ng"})})})})},k=a(41),P=a(710),B=a(13),I=a(711),A=s.d.baoCaoTuBonNgayModal;var H=function(t){var e=t.pageData,a=Object(c.c)((function(t){return t.hideColumns})),n=null===a||void 0===a?void 0:a[A||""],i=o.a.useMemo((function(){return[{id:0,colSpan:[s.a.stt,f.a.tenMatHang,v.a.tenNhomMatHang,f.a.giaNhapMatHang,f.a.giaBanMatHang,g.a.tenDonViTinh,O.tonDau,O.nhap,O.tongSoLuong,O.xuat,O.tonCuoi].reduce((function(t,e){var a=e.id;return t+((null===n||void 0===n?void 0:n[a])?0:1)}),0),cellClassName:"text-center font-weight-bold text-danger"},{id:1,colSpan:1,cellClassName:"text-right font-weight-bold text-small text-danger",render:function(t){return Object(m.formatNumber)(t)}},{id:2,colSpan:1,cellClassName:"text-right font-weight-bold text-small text-danger",render:function(t){return Object(m.formatNumber)(t)}}]}),[n]),r=o.a.useMemo((function(){return e.reduce((function(t,e){var a=t.chiPhi+(e.chiPhi||0),n=t.doanhThu+(e.doanhThu||0);return Object(h.a)(Object(h.a)({},t),{},{chiPhi:a,doanhThu:n})}),{tong:"T\u1ed5ng ti\u1ec1n",chiPhi:0,doanhThu:0})}),[e]),u=o.a.useMemo((function(){return["tong","chiPhi","doanhThu"].map((function(t,e){return Object(B.a)({},e,r[t])}))}),[r]);return Object(S.b)(I.a,{columns:i,dataSource:u})},Y=a(382),R=s.d.baoCaoTuBonNgayModal;e.default=function(){var t,e,a=Object(c.b)(),i=Object(P.a)({}),s=Object(n.a)(i,2),h=s[0],f=s[1],g=Object(c.c)((function(t){return t.baoCaoTuBonNgay})),v=g.tabsData,m=g.loading,p=g.pageSize,w=g.baoCaoTuBonNgays,y=Object(c.c)((function(t){var e;return null===(e=t.tagsPage)||void 0===e?void 0:e[R]})),x=Object(c.c)((function(t){return t.account})).accountData,C=null===x||void 0===x||null===(t=x.paths)||void 0===t||null===(e=t.baoCaoTuBonNgay)||void 0===e?void 0:e.edit,B=Object(c.c)((function(t){return t.dsMatHang})).dsMatHangs,I=Object(N.a)({Instance:D,onPending:T.d,addSelectedId:T.a});return o.a.useEffect((function(){a(Object(T.c)(h))}),[h,B]),Object(S.c)("div",{className:"baoCaoTuBonNgay-page",css:b.a,children:[Object(S.b)(d.b,{className:"tabs",options:v,activeKey:y?"aside":"",onTabClick:function(t){if("add"===t&&C){if(!C)return Object(k.e)();var e=new D;a(Object(l.c)({modalId:R,data:e.initData}))}else"aside"===t?a(Object(u.b)({tagPageId:R})):"taiExcel"===t&&a(Object(r.b)({tableId:R,constants:O,fileSheet:"baoCaoTuBonNgaySheet",fileName:"baoCaoTuBonNgayName",pageDatas:w}))}}),Object(S.c)("div",{className:"tabs-main",style:{marginTop:"10px"},children:[y&&Object(S.b)(M,{selectedTime:h,dateTimePicker:f}),Object(S.b)("div",{className:"aside-main",children:Object(S.b)(j.a,{isEdit:C,onCallbackDataSource:function(t){return Object(Y.a)("tenMatHang",t)},constants:O,actions:I,datas:w,loading:m,modalId:R,isSelection:!1,pagination:!0,pageSize:p,onChange:function(t){a(Object(T.g)(t.pageSize))},onRow:function(t){return{onClick:function(){C&&a(Object(l.c)({modalId:R,data:t}))}}},summary:function(t){return Object(S.b)(H,{pageData:t})}})})]})]})}}}]);