(this["webpackJsonptu-bon"]=this["webpackJsonptu-bon"]||[]).push([[11],{1036:function(e,n,t){"use strict";t.r(n);var a=t(13),i=t(8),o=t(40),c=t(0),u=t.n(c),r=t(56),l=t(7),d=t(713),s=t(64),h=t(716),b=t(159),m=t(793),f=t(123),O=t(367),v={getTableColumns:function(){return[Object(i.a)(Object(i.a)({},l.constants.stt),{},{fixed:!1}),O.a.tenNguyenVatLieuChaLua,Object(i.a)(Object(i.a)({},b.a.tenNhomMatHang),{},{width:140}),m.a.soLuong,f.a.tenDonViTinh,m.a.donGia,m.a.thanhTien]},getInputFields:function(){return[]},getExcelFields:function(){return this.getTableColumns()}},j=t(714),g=t(213),p=t(712),C=t(141),L=t(59),y=t(359),T=t(493),M=t(65),N=t(778),w=t(33),x=t(779),I=t(25);var K=function(e){var n,t,a=e.dateTimePicker,i=Object(r.b)(),o=Object(r.c)((function(e){return e.account})).accountData,c=null===o||void 0===o||null===(n=o.paths)||void 0===n||null===(t=n.khoChaLua)||void 0===t?void 0:t.edit;return Object(I.c)(I.a,{children:[Object(I.b)(d.a,{header:Object(I.b)("div",{className:"font-weight-bold",children:Object(I.b)("span",{children:"Th\xf4ng Tin Trang "})}),body:Object(I.c)("div",{className:"form-input-aside",style:{padding:"5px"},children:[Object(I.b)("div",{children:(null===a||void 0===a?void 0:a.getMonthRender())||null}),Object(I.b)("div",{className:"mt-1",children:Object(I.b)(L.a,{icon:Object(I.b)(y.a,{}),onClick:function(){if(!c)return Object(w.l)();i(Object(l.openModal)({modalId:s.c.phieuKhoNhapChaLuaModal}))},block:!0,children:"Th\xeam phi\u1ebfu nh\u1eadp kho"})}),Object(I.b)("div",{className:"mt-1",children:Object(I.b)(L.a,{icon:Object(I.b)(T.a,{}),onClick:function(){if(!c)return Object(w.l)();i(Object(l.openModal)({modalId:s.c.phieuKhoXuatChaLuaModal}))},block:!0,children:"Th\xeam phi\u1ebfu xu\u1ea5t kho"})})]}),footer:Object(I.b)("div",{children:Object(I.b)(L.a,{icon:Object(I.b)(M.a,{}),onClick:function(){i(Object(l.toggleAside)({tagPageId:s.c.khoChaLuaModal}))},children:"\u0110\xf3ng m\u1edf r\u1ed9ng"})})}),Object(I.b)(N.a,{}),Object(I.b)(x.a,{})]})},S=t(14),P=t(366),k=t(719),F=t(216),D=s.c.khoChaLuaModal;var V=function(e){var n=e.pageData,t=Object(r.c)((function(e){return e.hideColumns})),o=null===t||void 0===t?void 0:t[D||""],c=u.a.useMemo((function(){var e=[l.constants.stt,F.a.tenMatHang,b.a.tenNhomMatHang,m.a.soLuong,f.a.tenDonViTinh,m.a.donGia],n=[m.a.thanhTien];return[{id:0,colSpan:2+e.reduce((function(e,n){var t=n.id;return e+((null===o||void 0===o?void 0:o[t])?0:1)}),0),cellClassName:"text-center font-weight-bold text-danger"},{id:1,colSpan:n.reduce((function(e,n){var t=n.id;return e+((null===o||void 0===o?void 0:o[t])?0:1)}),0),cellClassName:"text-right font-weight-bold text-small text-danger",render:function(e){return Object(l.formatNumber)(e)}},{id:2,colSpan:[].reduce((function(e,n){var t=n.id;return e+((null===o||void 0===o?void 0:o[t])?0:1)}),0)}]}),[o]),d=u.a.useMemo((function(){return n.reduce((function(e,n){var t=e.thanhTien+(n.thanhTien||0);return Object(i.a)(Object(i.a)({},e),{},{thanhTien:t})}),{tong:"T\u1ed5ng ti\u1ec1n",thanhTien:0})}),[n]),s=u.a.useMemo((function(){return["tong","thanhTien"].map((function(e,n){return Object(a.a)({},n,d[e])}))}),[d]);return Object(I.b)(k.a,{columns:c,dataSource:s})},E=t(31),R=t.n(E),G=s.c.khoChaLuaModal;n.default=function(){var e,n,t=Object(r.b)(),c=Object(l.useDatePicker)(),s=Object(o.a)(c,2),b=s[0],m=s[1],f=Object(r.c)((function(e){return e.khoChaLua})),O=f.tabsData,L=f.loading,y=f.pageSize,T=f.khoChaLuas,M=f.phieuKhoChaLuas,N=Object(r.c)((function(e){return e.nguyenVatLieuChaLua})).nguyenVatLieuChaLuas,x=Object(r.c)((function(e){var n;return null===(n=e.tagsPage)||void 0===n?void 0:n[G]})),k=Object(r.c)((function(e){return e.account})).accountData,F=null===k||void 0===k||null===(e=k.paths)||void 0===e||null===(n=e.khoChaLua)||void 0===n?void 0:n.edit,D=Object(p.a)({Instance:g.a,onPending:C.g,addSelectedId:C.a,isEdit:F});u.a.useEffect((function(){return t(Object(C.f)(b)),function(){Object(S.j)("phieuKhoChaLuaByMonth")}}),[b]),u.a.useEffect((function(){return t(Object(C.e)()),function(){Object(S.j)("khoChaLua")}}),[]);var E=u.a.useMemo((function(){return Object.values(T).map((function(e){var n=e.soLuong,t=void 0===n?0:n,a=e.donGia,o=void 0===a?0:a,c=(null===N||void 0===N?void 0:N[null===e||void 0===e?void 0:e.id])||{},u=Math.round(t*o);return Object(i.a)(Object(i.a)(Object(i.a)({},c),e),{},{thanhTien:u})})).reduce((function(e,n){return Object(i.a)(Object(i.a)({},e),{},Object(a.a)({},n.id,n))}),{})}),[N,T]);return Object(I.c)("div",{className:"khoChaLua-page",css:h.a,children:[Object(I.b)(d.b,{className:"tabs",options:O,activeKey:x?"aside":"",onTabClick:function(e){if("add"===e&&F){if(!F)return Object(w.l)();var n=new g.a;t(Object(l.openModal)({modalId:G,data:n.initData}))}else"aside"===e?t(Object(l.toggleAside)({tagPageId:G})):"taiExcel"===e&&t(Object(l.downloadExcel)({tableId:G,constants:v,fileSheet:"khoChaLuaSheet",fileName:"khoChaLuaName"}))}}),Object(I.c)("div",{className:"tabs-main",style:{marginTop:"10px"},children:[x&&Object(I.b)(K,{dateTimePicker:m}),Object(I.b)("div",{className:"aside-main",children:Object(I.b)(j.a,{isEdit:F,onCallbackDataSource:function(e){return Object(P.a)("tenMatHang",e)},constants:v,actions:D,datas:E,loading:L,modalId:G,expandable:{expandedRowRender:function(e){var n=Object.entries((null===M||void 0===M?void 0:M[e.id])||{}).map((function(e){var n=Object(o.a)(e,2),t=n[0],a=n[1],i=R()(Number(t)).format("DD/MM/YYYY HH:mm"),c=a.soLuong,u=void 0===c?0:c,r=a.donGia,d=void 0===r?0:r,s="xuat"===a.loaiPhieuId?"Xu\u1ea5t":"Nh\u1eadp",h=u*d;return"".concat(i," - ").concat(s,": ").concat(u," x ").concat(Object(l.formatNumber)(d)," = ").concat(Object(l.formatNumber)(h)," - M\xe3 \u0111\u01a1n: ").concat(t)}));return Object(I.b)("div",{children:n.map((function(e,n){return Object(I.c)("div",{children:[n+1,": ",e]},n)}))})},expandRowByClick:!1},isSelection:!0,pagination:!0,pageSize:y,onChange:function(e){t(Object(C.i)(e.pageSize))},summary:function(e){return Object(I.b)(V,{pageData:e})}})})]})]})}},719:function(e,n,t){"use strict";t(0);var a=t(474),i=t(25),o=a.a.Summary,c=o.Row,u=o.Cell;n.a=function(e){var n,t=e.columns,a=e.dataSource;return Object(i.b)(c,{children:null===t||void 0===t||null===(n=t.map)||void 0===n?void 0:n.call(t,(function(e,n){var t=null===e||void 0===e?void 0:e.id,o=(null===e||void 0===e?void 0:e.colSpan)||0,c=(null===e||void 0===e?void 0:e.cellClassName)||"",r=(null===e||void 0===e?void 0:e.valueStyle)||{},l=(null===e||void 0===e?void 0:e.valueClassName)||"",d=null===e||void 0===e?void 0:e.render,s=(null===a||void 0===a?void 0:a[n])||{},h=(null===s||void 0===s?void 0:s[t])||"";return d&&(h=d(h,s,n)),Object(i.b)(u,{index:n,colSpan:o,className:c,children:Object(i.b)("div",{style:r,className:l,children:h})},t)}))})}},722:function(e,n,t){"use strict";t.d(n,"c",(function(){return i})),t.d(n,"d",(function(){return o})),t.d(n,"b",(function(){return c})),t.d(n,"a",(function(){return u}));var a=t(8),i={nguyenLieu:{id:"nguyenLieu",tenLoaiPhieuKho:"Nguy\xean li\u1ec7u",active:!0},ccdc:{id:"ccdc",tenLoaiPhieuKho:"CCDC",active:!0},thanhPham:{id:"thanhPham",tenLoaiPhieuKho:"Th\xe0nh ph\u1ea7m",active:!0}},o={sanXuat:{id:"sanXuat",tenLoaiPhieuKho:"S\u1ea3n xu\u1ea5t",active:!0},ban:{id:"ban",tenLoaiPhieuKho:"B\xe1n",active:!0}},c=Object(a.a)(Object(a.a)({},i),o),u={tenLoaiPhieuKho:{id:"tenLoaiPhieuKho",name:"T\xean lo\u1ea1i \u0110H",className:"text-small",width:110,isSearch:!0},getTableColumns:function(){return[]},getInputFields:function(){return[]}}},723:function(e,n,t){"use strict";t.d(n,"a",(function(){return i}));var a=t(7),i={soLuong:{id:"soLuong",name:"S\u1ed1 l\u01b0\u1ee3ng",width:100,className:"text-small font-weight-bold",align:"right",sorter:Object(a.sortByNumber)("soLuong"),render:Object(a.renderNumberInput)("SoLuong")},donGia:{id:"donGia",name:"\u0110\u01a1n gi\xe1",width:100,className:"text-small font-weight-bold",align:"right",sorter:Object(a.sortByNumber)("donGia"),render:a.numberRender},thanhTien:{id:"thanhTien",name:"Th\xe0nh ti\u1ec1n",width:100,className:"text-small font-weight-bold",align:"right",isSearch:!0,sorter:Object(a.sortByNumber)("thanhTien"),render:a.numberRender}}},727:function(e,n,t){"use strict";t.d(n,"a",(function(){return i}));var a=t(7),i={maPhieuKho:{id:"maPhieuKho",name:"M\xe3 phi\u1ebfu",width:100,className:"text-small",align:"center",isSearch:!0,sorter:Object(a.sortByText)("maPhieuKho"),form:{type:"input"}},ngay:{id:"ngay",name:"Ng\xe0y",width:100,className:"text-small font-weight-bold",align:"center",isSearch:!0,sorter:Object(a.sortByText)("ngay"),form:{type:"date-picker",rules:[{required:!0,message:"Ch\u01b0a nh\u1eadp"}]}},tongTienPhieuKho:{id:"tongTienPhieuKho",name:"T\u1ed5ng ti\u1ec1n",width:100,className:"text-small font-weight-bold",align:"right",render:a.numberRender},loaiPhieuId:{id:"loaiPhieuId",name:"Lo\u1ea1i phi\u1ebfu",width:90,className:"text-small font-weight-bold",isSearch:!0,align:"center"},getTableColumns:function(){return[]},getInputFields:function(){return[]}}},735:function(e,n,t){"use strict";function a(){return window.confirm("D\u1eef li\u1ec7u d\xe3 thay \u0111\u1ed5i, b\u1ea1n c\xf3 mu\u1ed1n tho\xe1t?")}function i(e){return window.confirm(e||"X\xe1c nh\u1eadn?")}t.d(n,"a",(function(){return a})),t.d(n,"b",(function(){return i}))},736:function(e,n,t){"use strict";t.d(n,"a",(function(){return c}));t(0);var a=t(7),i=t(226),o=t(25);function c(e){var n=e.name,t=e.label,c=e.rules,u=e.disabled;return Object(o.b)(a.MyFormItem,{name:n,label:t,rules:c,children:Object(o.b)(i.a,{disabled:u,style:{width:"100%"}})})}},739:function(e,n,t){"use strict";t.d(n,"a",(function(){return c}));t(0);var a=t(7),i=t(477),o=t(25);function c(e){var n=e.name,t=e.label,c=e.rules,u=e.disabled,r=e.onPressEnter;return Object(o.b)(a.MyFormItem,{name:n,label:t,rules:c,children:Object(o.b)(i.a,{disabled:u,style:{width:"100%"},onPressEnter:r})})}},742:function(e,n,t){"use strict";t.d(n,"a",(function(){return l})),t.d(n,"b",(function(){return d}));var a=t(8),i=t(7),o=t(367),c=t(123),u=t(159),r=t(723),l={getTableColumns:function(){return[i.constants.stt,o.a.tenNguyenVatLieuChaLua,Object(a.a)(Object(a.a)({},u.a.tenNhomMatHang),{},{className:"text-small"}),r.a.soLuong,Object(a.a)(Object(a.a)({},c.a.tenDonViTinh),{},{align:"center",className:"text-small"}),r.a.donGia,r.a.thanhTien,i.constants.editRow]},getInputFields:function(){return[i.constants.id]},getExcelFields:function(){return[i.constants.active]}},d={getTableColumns:function(){return[i.constants.stt,o.a.tenNguyenVatLieuChaLua,Object(a.a)(Object(a.a)({},u.a.tenNhomMatHang),{},{className:"text-small"}),r.a.soLuong,Object(a.a)(Object(a.a)({},c.a.tenDonViTinh),{},{className:"text-small"}),r.a.donGia,r.a.thanhTien]}}},743:function(e,n,t){"use strict";t.d(n,"a",(function(){return l})),t.d(n,"b",(function(){return d}));var a=t(8),i=t(7),o=t(367),c=t(723),u=t(123),r=t(159),l={getTableColumns:function(){return[Object(a.a)(Object(a.a)({},i.constants.stt),{},{fixed:!1}),o.a.tenNguyenVatLieuChaLua,r.a.tenNhomMatHang,c.a.soLuong,u.a.tenDonViTinh,c.a.donGia,c.a.thanhTien,i.constants.deleteRowButton]},getInputFields:function(){return[]},getExcelFields:function(){return[i.constants.stt,i.constants.active]}},d={getTableColumns:function(){return[Object(a.a)(Object(a.a)({},i.constants.stt),{},{fixed:!1}),o.a.tenNguyenVatLieuChaLua,c.a.soLuong,c.a.donGia,c.a.thanhTien]}}},749:function(e,n,t){"use strict";t.d(n,"a",(function(){return o}));var a=t(8),i=t(722),o=function(e){return function(){var n,t;if(!(null===e||void 0===e?void 0:e.loaiPhieuKhoId))return Object(a.a)(Object(a.a)({},e),{},{tenLoaiPhieuKho:""});if((null===e||void 0===e||null===(n=e.loaiPhieuKhoId)||void 0===n?void 0:n.length)&&"string"!==typeof e.loaiPhieuKhoId)t=e.loaiPhieuKhoId.map((function(e){var n=(null===i.b||void 0===i.b?void 0:i.b[e])||{};return"".concat(n.tenLoaiPhieuKho||"")})).join(", ");else{var o=(null===i.b||void 0===i.b?void 0:i.b[e.loaiPhieuKhoId])||{};t="".concat(o.tenLoaiPhieuKho||"")}return Object(a.a)(Object(a.a)({},e),{},{tenLoaiPhieuKho:t})}}},763:function(e,n,t){"use strict";t.d(n,"a",(function(){return u}));t(0);var a=t(7),i=t(477),o=t(33),c=t(25);function u(e){var n=e.name,t=e.label,u=e.rules,r=e.onPressEnter;return Object(c.b)(a.MyFormItem,{name:n,label:t,rules:u,children:Object(c.b)(i.a,{style:{width:"100%"},onPressEnter:r,formatter:o.a.formatter,parser:o.a.parser})})}},773:function(e,n,t){"use strict";t.d(n,"a",(function(){return u}));var a=t(8),i=t(7),o=t(727),c=t(722),u={ngay:{id:"ngay",name:"Ng\xe0y",width:100,className:"text-small",form:{type:"date-picker",rules:[{required:!0,message:"Ch\u01b0a nh\u1eadp"}]}},getTableColumns:function(){return[Object(a.a)(Object(a.a)({},i.constants.stt),{},{fixed:!1}),o.a.maPhieuKho,Object(a.a)(Object(a.a)({},o.a.ngay),{},{defaultSortOrder:"ascend",sortDirections:["ascend"]}),o.a.tongTienPhieuKho,c.a.tenLoaiPhieuKho,i.constants.capNhatRow,i.constants.deleteRowButton,i.constants.createdAt,i.constants.createdBy,i.constants.updatedAt,i.constants.updatedBy]},getInputFields:function(){return[i.constants.id,this.ngay]},getExcelFields:function(){return[this.ngay,i.constants.active]}}},778:function(e,n,t){"use strict";var a=t(5),i=t.n(a),o=t(9),c=t(40),u=t(0),r=t.n(u),l=t(7),d=t(475),s=t(56),h=t(773),b=t(64),m=t(33),f=t(13),O=t(8),v=t(59),j=t(55),g=t(716),p=t(742),C=t(714),L=t(375),y=t(762),T=t(739),M=t(376),N=t(751),w=t(763),x=t(724),I=t(723),K=t(25),S=b.c.phieuKhoNhapChaLuaChiTietModal,P="nguyenVatLieuChaLuaId";var k=function(e){var n=Object(s.b)(),t=d.a.useForm(),a=Object(c.a)(t,1)[0],u=Object(s.c)((function(e){return e.form})),h=u.modal,b=u.datas,m=r.a.useMemo((function(){var e;return!!(null===h||void 0===h||null===(e=h[S])||void 0===e?void 0:e.open)}),[h[S]]),f=null===b||void 0===b?void 0:b[S];function O(){return v.apply(this,arguments)}function v(){return(v=Object(o.a)(i.a.mark((function e(){var t,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.validateFields();case 2:t=e.sent,o=Object(l.convertMomentToString)(p.a.getInputFields(),t),o=n(Object(M.c)(o)),n(Object(L.d)({convertedData:o,nameOfId:"nguyenVatLieuChaLuaId"})),a.resetFields(),Object(N.a)(P);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.useEffect((function(){m||a.resetFields()}),[m]),r.a.useEffect((function(){a.setFieldsValue(f)}),[f]),Object(K.b)(l.MyModal,{title:Object(K.b)("div",{children:"Nguy\xean v\u1eadt li\u1ec7u, s\u1ed1 l\u01b0\u1ee3ng"}),visible:m,onClose:function(){n(Object(l.closeModal)({modalId:S}))},onOkModal:O,width:900,modalId:S,datas:b,children:Object(K.c)(l.MyForm,{form:a,labelCol:{span:8},wrapperCol:{span:16},children:[Object(K.b)(x.a,{name:"id",label:"ID",disabled:!0}),Object(K.b)(y.a,{rules:[{required:!0}],isAddNew:!0}),Object(K.b)(T.a,{name:I.a.soLuong.id,label:I.a.soLuong.name,onPressEnter:O}),Object(K.b)(w.a,{name:I.a.donGia.id,label:I.a.donGia.name,onPressEnter:O})]})})},F=t(719),D=t(367),V=t(159),E=t(123),R=b.c.phieuDiChoTuBonModal;var G=function(e){var n=e.pageData,t=Object(s.c)((function(e){return e.hideColumns})),a=null===t||void 0===t?void 0:t[R||""],i=r.a.useMemo((function(){var e=[l.constants.stt,D.a.tenNguyenVatLieuChaLua,V.a.tenNhomMatHang,I.a.soLuong,E.a.tenDonViTinh,I.a.donGia],n=[I.a.thanhTien],t=[l.constants.editRow];return[{id:0,colSpan:0+e.reduce((function(e,n){var t=n.id;return e+((null===a||void 0===a?void 0:a[t])?0:1)}),0),cellClassName:"text-center font-weight-bold text-danger"},{id:1,colSpan:n.reduce((function(e,n){var t=n.id;return e+((null===a||void 0===a?void 0:a[t])?0:1)}),0),cellClassName:"text-right font-weight-bold text-small text-danger",render:function(e){return Object(l.formatNumber)(e)}},{id:2,colSpan:t.reduce((function(e,n){var t=n.id;return e+((null===a||void 0===a?void 0:a[t])?0:1)}),0)}]}),[a]),o=r.a.useMemo((function(){return n.reduce((function(e,n){var t=e.thanhTien+(n.thanhTien||0);return Object(O.a)(Object(O.a)({},e),{},{thanhTien:t})}),{tong:"T\u1ed5ng ti\u1ec1n",thanhTien:0})}),[n]),c=r.a.useMemo((function(){return["tong","thanhTien"].map((function(e,n){return Object(f.a)({},n,o[e])}))}),[o]);return Object(K.b)(F.a,{columns:i,dataSource:c})},X=b.c.phieuKhoNhapChaLuaChiTietModal;var A=function(e){var n=Object(s.b)(),t=Object(s.c)((function(e){return e.phieuKhoNhapChaLuaChiTiet})).phieuKhoNhapChaLuaChiTiets,a=Object(s.c)((function(e){return e.nguyenVatLieuChaLua})).nguyenVatLieuChaLuas,i=r.a.useMemo((function(){return Object.values(t||{}).reduce((function(e,n){var t=(null===a||void 0===a?void 0:a[n.id])||{},i=n.soLuong,o=void 0===i?0:i,c=n.donGia,u=void 0===c?0:c,r=Math.round(o*u);return Object(O.a)(Object(O.a)({},e),{},Object(f.a)({},n.id,Object(O.a)(Object(O.a)(Object(O.a)({},t),n),{},{thanhTien:r})))}),{})}),[t,a]);return Object(K.c)("div",{className:"phieuKhoNhapChaLuaChiTiet-page",css:g.a,children:[Object(K.b)("div",{style:{marginBottom:"7px"},children:Object(K.b)(v.a,{icon:Object(K.b)(j.a,{}),type:"primary",onClick:function(){n(Object(l.openModal)({modalId:X}))},children:"Th\xeam m\u1eb7t h\xe0ng, s\u1ed1 l\u01b0\u1ee3ng"})}),Object(K.b)(C.a,{isEdit:!0,constants:p.a,datas:i,modalId:X,isSelection:!1,pagination:!1,inputOptions:{onDeleteItem:function(e){n(Object(L.b)(e))}},summary:function(e){return Object(K.b)(G,{pageData:e})}}),Object(K.b)(k,{})]})},B=t(736),H=t(31),q=t.n(H),Y=t(722);var z=function(e){var n=e.form,t=e.name,a=e.mode,i=e.label,o=e.labelCol,c=e.wrapperCol,u=e.rules,d=e.onAfterSelect,s=e.disabled,h=r.a.useMemo((function(){return Object.values(Y.c).filter((function(e){return e.active})).map((function(e){var n="".concat(e.tenLoaiPhieuKho);return{value:e.id,label:n}}))}),[Y.c]),b=Object(K.b)(l.MyFormItem,{label:i||"Lo\u1ea1i phi\u1ebfu nh\u1eadp",type:"select",name:t||"loaiPhieuKhoId",innerProps:{mode:a,showSearch:!0,allowClear:!0,filterOption:l.onSelectSearch,onChange:function(e){null===d||void 0===d||d(e)},disabled:s},options:h,rules:u||[]});return n?Object(K.b)(K.a,{children:Object(K.b)(l.MyForm,{form:n,labelCol:o||{span:8},wrapperCol:c||{span:16},children:b})}):b},J=t(749),Q=t(391),U=t(727),W=b.c.phieuKhoNhapChaLuaModal;n.a=function(e){var n,t,a=e.onAfterAddFinish,u=Object(s.b)(),b=d.a.useForm(),f=Object(c.a)(b,1)[0],O=Object(s.c)((function(e){return e.form})),v=O.modal,j=O.datas,g=null===j||void 0===j?void 0:j[W],p=Object(s.c)((function(e){return e.account})).accountData,C=null===p||void 0===p||null===(n=p.paths)||void 0===n||null===(t=n.phieuKhoNhapChaLua)||void 0===t?void 0:t.edit,y=r.a.useMemo((function(){var e;return!!(null===v||void 0===v||null===(e=v[W])||void 0===e?void 0:e.open)}),[v[W]]);function T(){return(T=Object(o.a)(i.a.mark((function e(){var n,t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C){e.next=2;break}return e.abrupt("return",Object(m.l)());case 2:if(window.confirm("X\xe1c nh\u1eadn c\u1eadp nh\u1eadt?")){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,f.validateFields();case 6:n=e.sent,t=Object(l.convertMomentToString)([h.a.ngay],n),t=u(Object(J.a)(t)),t=u(Object(L.c)(t)),u(Object(Q.e)(t)),u(Object(l.closeModal)({modalId:W})),null===a||void 0===a||a(t);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.useEffect((function(){y||(f.resetFields(),u(Object(L.e)({})))}),[y]),r.a.useEffect((function(){g?(u(Object(L.e)((null===g||void 0===g?void 0:g.phieuKhoNhapChaLuaChiTiets)||{})),f.setFieldsValue(g)):f.setFieldsValue({ngay:q()(),loaiPhieuKhoId:Y.c.nguyenLieu.id})}),[g]),Object(K.c)(l.MyModal,{title:Object(K.b)("div",{children:"Phi\u1ebfu Nh\u1eadp Kho Ch\u1ea3 L\u1ee5a"}),visible:y,onClose:function(){u(Object(l.closeModal)({modalId:W}))},onOkModal:function(){return T.apply(this,arguments)},width:1e3,modalId:W,datas:j,children:[Object(K.c)(l.MyForm,{form:f,labelCol:{span:6},wrapperCol:{span:18},children:[Object(K.b)(x.a,{name:l.constants.id.id,label:l.constants.id.name,disabled:!0}),Object(K.b)(x.a,{name:U.a.maPhieuKho.id,label:U.a.maPhieuKho.name}),Object(K.b)(B.a,{name:"ngay",label:"Ng\xe0y",rules:[{required:!0}]}),Object(K.b)(z,{rules:[{required:!0}]})]}),Object(K.b)(A,{})]})}},779:function(e,n,t){"use strict";var a=t(5),i=t.n(a),o=t(9),c=t(40),u=t(0),r=t.n(u),l=t(7),d=t(475),s=t(56),h=t(64),b=t(390),m=t(33),f=t(724),O=t(727),v=t(736),j=t(722),g=t(25);var p=function(e){var n=e.form,t=e.name,a=e.mode,i=e.label,o=e.labelCol,c=e.wrapperCol,u=e.rules,d=e.onAfterSelect,s=e.disabled,h=r.a.useMemo((function(){return Object.values(j.d).filter((function(e){return e.active})).map((function(e){var n="".concat(e.tenLoaiPhieuKho);return{value:e.id,label:n}}))}),[j.d]),b=Object(g.b)(l.MyFormItem,{label:i||"Lo\u1ea1i phi\u1ebfu xu\u1ea5t",type:"select",name:t||"loaiPhieuKhoId",innerProps:{mode:a,showSearch:!0,allowClear:!0,filterOption:l.onSelectSearch,onChange:function(e){null===d||void 0===d||d(e)},disabled:s},options:h,rules:u||[]});return n?Object(g.b)(g.a,{children:Object(g.b)(l.MyForm,{form:n,labelCol:o||{span:8},wrapperCol:c||{span:16},children:b})}):b},C=t(13),L=t(8),y=t(59),T=t(55),M=t(193),N=t(716),w=t(743),x=t(714),I=t(241),K=t(762),S=t(739),P=t(723),k=t(751),F=t(141),D=h.c.phieuKhoXuatChaLuaChiTietModal;var V=function(e){var n=Object(s.b)(),t=d.a.useForm(),a=Object(c.a)(t,1)[0],u=Object(s.c)((function(e){return e.form})),h=u.modal,b=u.datas,m=r.a.useMemo((function(){var e;return!!(null===h||void 0===h||null===(e=h[D])||void 0===e?void 0:e.open)}),[h[D]]),O=null===b||void 0===b?void 0:b[D];function v(){return j.apply(this,arguments)}function j(){return(j=Object(o.a)(i.a.mark((function e(){var t,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.validateFields();case 2:t=e.sent,o=Object(l.convertMomentToString)(w.a.getInputFields(),t),o=n(Object(F.c)(o)),n(Object(I.e)({convertedData:o,nameOfId:"nguyenVatLieuChaLuaId"})),a.resetFields(),Object(k.a)("nguyenVatLieuChaLuaId");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.useEffect((function(){m||a.resetFields()}),[m]),r.a.useEffect((function(){a.setFieldsValue(O)}),[O]),Object(g.b)(l.MyModal,{title:Object(g.b)("div",{children:"Nguy\xean Li\u1ec7u V\xe0 S\u1ed1 L\u01b0\u1ee3ng"}),visible:m,onClose:function(){n(Object(l.closeModal)({modalId:D}))},onOkModal:v,width:900,modalId:D,datas:b,children:Object(g.c)(l.MyForm,{form:a,labelCol:{span:6},wrapperCol:{span:18},children:[Object(g.b)(f.a,{name:"id",label:"id",disabled:!0}),Object(g.b)(K.a,{rules:[{required:!0}],isAddNew:!0,onAfterSelect:function(e,n){a.setFieldsValue(n)},onAfterAddFinish:function(e,n){a.setFieldsValue(n)}}),Object(g.b)(S.a,{name:P.a.soLuong.id,label:P.a.soLuong.name,onPressEnter:v})]})})},E=t(735),R=t(719),G=t(367),X=t(159),A=t(123),B=h.c.phieuDiChoTuBonModal;var H=function(e){var n=e.pageData,t=Object(s.c)((function(e){return e.hideColumns})),a=null===t||void 0===t?void 0:t[B||""],i=r.a.useMemo((function(){var e=[l.constants.stt,G.a.tenNguyenVatLieuChaLua,X.a.tenNhomMatHang,P.a.soLuong,A.a.tenDonViTinh,P.a.donGia],n=[P.a.thanhTien],t=[l.constants.editRow];return[{id:0,colSpan:1+e.reduce((function(e,n){var t=n.id;return e+((null===a||void 0===a?void 0:a[t])?0:1)}),0),cellClassName:"text-center font-weight-bold text-danger"},{id:1,colSpan:n.reduce((function(e,n){var t=n.id;return e+((null===a||void 0===a?void 0:a[t])?0:1)}),0),cellClassName:"text-right font-weight-bold text-small text-danger",render:function(e){return Object(l.formatNumber)(e)}},{id:2,colSpan:t.reduce((function(e,n){var t=n.id;return e+((null===a||void 0===a?void 0:a[t])?0:1)}),0)}]}),[a]),o=r.a.useMemo((function(){return n.reduce((function(e,n){var t=e.thanhTien+(n.thanhTien||0);return Object(L.a)(Object(L.a)({},e),{},{thanhTien:t})}),{tong:"T\u1ed5ng ti\u1ec1n",thanhTien:0})}),[n]),c=r.a.useMemo((function(){return["tong","thanhTien"].map((function(e,n){return Object(C.a)({},n,o[e])}))}),[o]);return Object(g.b)(R.a,{columns:i,dataSource:c})},q=h.c.phieuKhoXuatChaLuaChiTietModal;var Y=function(e){var n=Object(s.b)(),t=Object(s.c)((function(e){return e.nguyenVatLieuChaLua})).nguyenVatLieuChaLuas,a=Object(s.c)((function(e){return e.phieuKhoXuatChaLuaChiTiet})).phieuKhoXuatChaLuaChiTiets,i=Object(s.c)((function(e){return e.table})).selectedRows,o=r.a.useMemo((function(){return Object(l.onCallbackDataSource)("tenNguyenVatLieuChaLua",Object.values(a||{}))}),[a]),c=r.a.useMemo((function(){return Object.values(a||{}).reduce((function(e,n){var a=(null===t||void 0===t?void 0:t[n.id])||{},i=n.soLuong,o=void 0===i?0:i,c=n.donGia,u=void 0===c?0:c,r=Math.round(o*u);return Object(L.a)(Object(L.a)({},e),{},Object(C.a)({},n.id,Object(L.a)(Object(L.a)(Object(L.a)({},a),n),{},{thanhTien:r})))}),{})}),[a,t]);return Object(g.c)("div",{className:"phieuKhoXuatChaLuaChiTiet-page",css:N.a,children:[Object(g.c)("div",{style:{marginBottom:"7px"},children:[Object(g.b)(y.a,{icon:Object(g.b)(T.a,{}),type:"primary",onClick:function(){n(Object(l.openModal)({modalId:q}))},children:"Th\xeam nguy\xean li\u1ec7u, s\u1ed1 l\u01b0\u1ee3ng"}),Object(g.b)(y.a,{icon:Object(g.b)(M.a,{}),type:"dashed",danger:!0,onClick:function(){var e=(null===i||void 0===i?void 0:i[q])||[];if(0===e.length)return Object(m.h)("Ch\u01b0a ch\u1ecdn m\u1eb7t h\xe0ng!");Object(E.b)("X\xe1c nh\u1eadn x\xf3a m\u1eb7t h\xe0ng \u0111\xe3 ch\u1ecdn?")&&(n(Object(I.c)({phieuKhoXuatChaLuaChiTietDataArray:e})),n(Object(l.onChangeSelectedRowKeys)({tableId:q,selectedRowKeys:[],selectedRows:[]})))},children:"X\xf3a \u0111\xe3 ch\u1ecdn"})]}),Object(g.b)(x.a,{isEdit:!0,constants:w.a,onCallbackDataSource:function(e){return Object(l.onCallbackDataSource)("tenNguyenVatLieuChaLua",e)},datas:c,modalId:q,isSelection:!0,pagination:!1,inputOptions:{onDelete:function(e){n(Object(I.b)(e))},openEditSoLuong:function(e){n(Object(l.openModal)({modalId:h.c.openEditSoLuong,data:e}))}},summary:function(e){return Object(g.b)(H,{pageData:e})}}),Object(g.b)(l.SoLuongInputModal,{modalId:h.c.openEditSoLuong,soLuongName:"soLuong",titleId:"tenNguyenVatLieuChaLua",dataSource:o,onOk:function(e){n(Object(I.e)({convertedData:e}))}}),Object(g.b)(V,{})]})},z=t(749),J=h.c.phieuKhoXuatChaLuaModal;n.a=function(e){var n,t,a=e.onAfterAddFinish,u=d.a.useForm(),h=Object(c.a)(u,1)[0],j=Object(s.b)(),C=Object(s.c)((function(e){return e.form})),L=C.modal,y=C.datas,T=Object(s.c)((function(e){return e.account})).accountData,M=null===T||void 0===T||null===(n=T.paths)||void 0===n||null===(t=n.phieuKhoXuatChaLua)||void 0===t?void 0:t.edit,N=r.a.useMemo((function(){var e;return!!(null===L||void 0===L||null===(e=L[J])||void 0===e?void 0:e.open)}),[L[J]]),w=null===y||void 0===y?void 0:y[J];function x(){return(x=Object(o.a)(i.a.mark((function e(){var n,t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(M){e.next=2;break}return e.abrupt("return",Object(m.l)());case 2:if(Object(E.b)("X\xe1c nh\u1eadn th\xeam phi\u1ebfu xu\u1ea5t?")){e.next=4;break}return e.abrupt("return",null);case 4:return e.next=6,h.validateFields();case 6:n=e.sent,t=Object(l.convertMomentToString)([O.a.ngay],n),t=j(Object(z.a)(t)),t=j(Object(I.d)(t)),j(Object(b.e)(t)),j(Object(l.closeModal)({modalId:J})),null===a||void 0===a||a(t);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.useEffect((function(){var e=Object(l.convertToMoment)([O.a.ngay],w);h.setFieldsValue(e),j(Object(I.f)((null===e||void 0===e?void 0:e.phieuKhoXuatChaLuaChiTiets)||{}))}),[w]),r.a.useEffect((function(){N||(h.resetFields(),j(Object(I.f)({})))}),[N]),Object(g.c)(l.MyModal,{title:Object(g.b)("div",{children:"Phi\u1ebfu Kho Xu\u1ea5t Ch\u1ea3 L\u1ee5a"}),visible:N,onClose:function(){j(Object(l.closeModal)({modalId:J}))},onOkModal:function(){return x.apply(this,arguments)},width:999,modalId:J,datas:y,children:[Object(g.c)(l.MyForm,{form:h,labelCol:{span:6},wrapperCol:{span:18},children:[Object(g.b)(f.a,{name:l.constants.id.id,label:l.constants.id.name,disabled:!0}),Object(g.b)(f.a,{name:O.a.maPhieuKho.id,label:O.a.maPhieuKho.name}),Object(g.b)(v.a,{name:"ngay",label:"Ng\xe0y",rules:[{required:!0}]}),Object(g.b)(p,{rules:[{required:!0}]})]}),Object(g.b)(Y,{})]})}},793:function(e,n,t){"use strict";t.d(n,"a",(function(){return i}));var a=t(7),i={khoId:{id:"khoId",name:"khoId"},tenKho:{id:"tenKho",name:"T\xean kho",width:100,className:"text-small font-weight-bold",form:{type:"input",rules:[{required:!0,message:"Ch\u01b0a nh\u1eadp"}]}},diaChiKho:{id:"diaChiKho",name:"\u0110\u1ecba ch\u1ec9",width:150,className:"text-small",form:{type:"input"}},soLuong:{id:"soLuong",name:"SL t\u1ed3n kho",width:100,className:"text-small font-weight-bold",align:"right"},donGia:{id:"donGia",name:"\u0110\u01a1n gi\xe1",width:100,className:"text-small font-weight-bold",align:"right",render:a.numberRender},thanhTien:{id:"thanhTien",name:"Th\xe0nh ti\u1ec1n",width:100,className:"text-small font-weight-bold",align:"right",render:a.numberRender},getTableColumns:function(){return[]},getInputFields:function(){return[]}}}}]);