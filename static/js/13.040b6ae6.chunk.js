(this["webpackJsonptu-bon"]=this["webpackJsonptu-bon"]||[]).push([[13],{1047:function(e,t,n){"use strict";n.r(t);var a=n(40),i=n(0),o=n.n(i),u=n(56),c=n(7),r=n(714),d=n(64),l=n(717),s=n(8),h=n(728),b=n(723),f={getTableColumns:function(){return[Object(s.a)(Object(s.a)({},c.constants.stt),{},{fixed:!1}),h.a.maPhieuKho,h.a.ngay,h.a.tongTienPhieuKho,b.a.tenLoaiPhieuKho,c.constants.capNhatRow,c.constants.deleteRowButton,c.constants.createdAt,c.constants.createdBy,c.constants.updatedAt,c.constants.updatedBy]},getInputFields:function(){return[]},getExcelFields:function(){return[c.constants.active]}},v=n(715),m=n(780),O=n(205),j=n(713),g=n(391),p=n(59),L=n(65),C=n(25);var y=function(e){e.selectedTime;var t=e.dateTimePicker,n=Object(u.b)();return Object(C.b)(C.a,{children:Object(C.b)(r.a,{header:Object(C.b)("div",{className:"font-weight-bold",children:Object(C.b)("span",{children:"Th\xf4ng Tin Trang "})}),body:Object(C.c)("div",{className:"form-input-aside",style:{padding:"5px"},children:[Object(C.b)("div",{children:(null===t||void 0===t?void 0:t.getMonthRender())||null}),Object(C.b)("div",{})]}),footer:Object(C.b)("div",{children:Object(C.b)(p.a,{icon:Object(C.b)(L.a,{}),onClick:function(){n(Object(c.toggleAside)({tagPageId:d.c.phieuKhoXuatChaLuaModal}))},children:"\u0110\xf3ng m\u1edf r\u1ed9ng"})})})})},w=n(33),K=n(141),T=n(14),M=n(820),P=d.c.phieuKhoXuatChaLuaModal;t.default=function(){var e,t,n=Object(u.b)(),i=Object(c.useDatePicker)(),d=Object(a.a)(i,2),s=d[0],h=d[1],b=Object(u.c)((function(e){return e.phieuKhoXuatChaLua})),p=b.tabsData,L=b.phieuKhoXuatChaLuaLoading,N=b.pageSize,S=b.phieuKhoXuatChaLuas,x=Object(u.c)((function(e){var t;return null===(t=e.tagsPage)||void 0===t?void 0:t[P]})),I=Object(u.c)((function(e){return e.account})).accountData,F=null===I||void 0===I||null===(e=I.paths)||void 0===e||null===(t=e.phieuKhoXuatChaLua)||void 0===t?void 0:t.edit,X=Object(j.a)({Instance:O.a,onPending:g.g,addSelectedId:g.a,isEdit:F});return o.a.useEffect((function(){n(Object(g.d)(s))}),[s]),o.a.useEffect((function(){return n(Object(K.e)()),function(){Object(T.j)("khoChaLua")}}),[]),Object(C.c)("div",{className:"phieuKhoXuatChaLua-page",css:l.a,children:[Object(C.b)(r.b,{className:"tabs",options:p,activeKey:x?"aside":"",onTabClick:function(e){if("add"===e){if(!F)return Object(w.l)();var t=new O.a;n(Object(c.openModal)({modalId:P,data:t.initData}))}else"aside"===e?n(Object(c.toggleAside)({tagPageId:P})):"taiExcel"===e&&n(Object(c.downloadExcel)({tableId:P,constants:f,fileSheet:"phieuKhoXuatChaLuaSheet",fileName:"phieuKhoXuatChaLuaName"}))}}),Object(C.c)("div",{className:"tabs-main",style:{marginTop:"10px"},children:[x&&Object(C.b)(y,{dateTimePicker:h}),Object(C.b)("div",{className:"aside-main",children:Object(C.b)(v.a,{isEdit:F,constants:f,actions:X,datas:S,loading:L,modalId:P,expandable:{expandedRowRender:function(e){return Object(C.b)("div",{children:Object(C.b)(M.a,{record:e})})},expandRowByClick:!1},isSelection:!1,pagination:!0,inputOptions:{onDelete:function(e){n(Object(g.c)(e))}},pageSize:N,onChange:function(e){n(Object(g.f)(e.pageSize))}})})]}),Object(C.b)(m.a,{})]})}},720:function(e,t,n){"use strict";n(0);var a=n(475),i=n(25),o=a.a.Summary,u=o.Row,c=o.Cell;t.a=function(e){var t,n=e.columns,a=e.dataSource;return Object(i.b)(u,{children:null===n||void 0===n||null===(t=n.map)||void 0===t?void 0:t.call(n,(function(e,t){var n=null===e||void 0===e?void 0:e.id,o=(null===e||void 0===e?void 0:e.colSpan)||0,u=(null===e||void 0===e?void 0:e.cellClassName)||"",r=(null===e||void 0===e?void 0:e.valueStyle)||{},d=(null===e||void 0===e?void 0:e.valueClassName)||"",l=null===e||void 0===e?void 0:e.render,s=(null===a||void 0===a?void 0:a[t])||{},h=(null===s||void 0===s?void 0:s[n])||"";return l&&(h=l(h,s,t)),Object(i.b)(c,{index:t,colSpan:o,className:u,children:Object(i.b)("div",{style:r,className:d,children:h})},n)}))})}},723:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return c}));var a=n(8),i={nguyenLieu:{id:"nguyenLieu",tenLoaiPhieuKho:"Nguy\xean li\u1ec7u",active:!0},ccdc:{id:"ccdc",tenLoaiPhieuKho:"CCDC",active:!0},thanhPham:{id:"thanhPham",tenLoaiPhieuKho:"Th\xe0nh ph\u1ea7m",active:!0}},o={sanXuat:{id:"sanXuat",tenLoaiPhieuKho:"S\u1ea3n xu\u1ea5t",active:!0},ban:{id:"ban",tenLoaiPhieuKho:"B\xe1n",active:!0}},u=Object(a.a)(Object(a.a)({},i),o),c={tenLoaiPhieuKho:{id:"tenLoaiPhieuKho",name:"T\xean lo\u1ea1i \u0110H",className:"text-small",width:110,isSearch:!0},getTableColumns:function(){return[]},getInputFields:function(){return[]}}},724:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(7),i={soLuong:{id:"soLuong",name:"S\u1ed1 l\u01b0\u1ee3ng",width:100,className:"text-small font-weight-bold",align:"right",sorter:Object(a.sortByNumber)("soLuong"),render:Object(a.renderNumberInput)("SoLuong")},donGia:{id:"donGia",name:"\u0110\u01a1n gi\xe1",width:100,className:"text-small font-weight-bold",align:"right",sorter:Object(a.sortByNumber)("donGia"),render:a.numberRender},thanhTien:{id:"thanhTien",name:"Th\xe0nh ti\u1ec1n",width:100,className:"text-small font-weight-bold",align:"right",isSearch:!0,sorter:Object(a.sortByNumber)("thanhTien"),render:a.numberRender}}},728:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(7),i={maPhieuKho:{id:"maPhieuKho",name:"M\xe3 phi\u1ebfu",width:100,className:"text-small",align:"center",isSearch:!0,sorter:Object(a.sortByText)("maPhieuKho"),form:{type:"input"}},ngay:{id:"ngay",name:"Ng\xe0y",width:100,className:"text-small font-weight-bold",align:"center",isSearch:!0,sorter:Object(a.sortByText)("ngay"),form:{type:"date-picker",rules:[{required:!0,message:"Ch\u01b0a nh\u1eadp"}]}},tongTienPhieuKho:{id:"tongTienPhieuKho",name:"T\u1ed5ng ti\u1ec1n",width:100,className:"text-small font-weight-bold",align:"right",render:a.numberRender},loaiPhieuId:{id:"loaiPhieuId",name:"Lo\u1ea1i phi\u1ebfu",width:90,className:"text-small font-weight-bold",isSearch:!0,align:"center"},getTableColumns:function(){return[]},getInputFields:function(){return[]}}},736:function(e,t,n){"use strict";function a(){return window.confirm("D\u1eef li\u1ec7u d\xe3 thay \u0111\u1ed5i, b\u1ea1n c\xf3 mu\u1ed1n tho\xe1t?")}function i(e){return window.confirm(e||"X\xe1c nh\u1eadn?")}n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}))},737:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));n(0);var a=n(7),i=n(226),o=n(25);function u(e){var t=e.name,n=e.label,u=e.rules,c=e.disabled;return Object(o.b)(a.MyFormItem,{name:t,label:n,rules:u,children:Object(o.b)(i.a,{disabled:c,style:{width:"100%"}})})}},740:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));n(0);var a=n(7),i=n(478),o=n(25);function u(e){var t=e.name,n=e.label,u=e.rules,c=e.disabled,r=e.onPressEnter;return Object(o.b)(a.MyFormItem,{name:t,label:n,rules:u,children:Object(o.b)(i.a,{disabled:c,style:{width:"100%"},onPressEnter:r})})}},744:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return l}));var a=n(8),i=n(7),o=n(368),u=n(724),c=n(123),r=n(159),d={getTableColumns:function(){return[Object(a.a)(Object(a.a)({},i.constants.stt),{},{fixed:!1}),o.a.tenNguyenVatLieuChaLua,r.a.tenNhomMatHang,u.a.soLuong,c.a.tenDonViTinh,u.a.donGia,u.a.thanhTien,i.constants.deleteRowButton]},getInputFields:function(){return[]},getExcelFields:function(){return[i.constants.stt,i.constants.active]}},l={getTableColumns:function(){return[Object(a.a)(Object(a.a)({},i.constants.stt),{},{fixed:!1}),o.a.tenNguyenVatLieuChaLua,u.a.soLuong,u.a.donGia,u.a.thanhTien]}}},750:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(8),i=n(723),o=function(e){return function(){var t,n;if(!(null===e||void 0===e?void 0:e.loaiPhieuKhoId))return Object(a.a)(Object(a.a)({},e),{},{tenLoaiPhieuKho:""});if((null===e||void 0===e||null===(t=e.loaiPhieuKhoId)||void 0===t?void 0:t.length)&&"string"!==typeof e.loaiPhieuKhoId)n=e.loaiPhieuKhoId.map((function(e){var t=(null===i.b||void 0===i.b?void 0:i.b[e])||{};return"".concat(t.tenLoaiPhieuKho||"")})).join(", ");else{var o=(null===i.b||void 0===i.b?void 0:i.b[e.loaiPhieuKhoId])||{};n="".concat(o.tenLoaiPhieuKho||"")}return Object(a.a)(Object(a.a)({},e),{},{tenLoaiPhieuKho:n})}}},780:function(e,t,n){"use strict";var a=n(5),i=n.n(a),o=n(9),u=n(40),c=n(0),r=n.n(c),d=n(7),l=n(476),s=n(56),h=n(64),b=n(391),f=n(33),v=n(725),m=n(728),O=n(737),j=n(723),g=n(25);var p=function(e){var t=e.form,n=e.name,a=e.mode,i=e.label,o=e.labelCol,u=e.wrapperCol,c=e.rules,l=e.onAfterSelect,s=e.disabled,h=r.a.useMemo((function(){return Object.values(j.d).filter((function(e){return e.active})).map((function(e){var t="".concat(e.tenLoaiPhieuKho);return{value:e.id,label:t}}))}),[j.d]),b=Object(g.b)(d.MyFormItem,{label:i||"Lo\u1ea1i phi\u1ebfu xu\u1ea5t",type:"select",name:n||"loaiPhieuKhoId",innerProps:{mode:a,showSearch:!0,allowClear:!0,filterOption:d.onSelectSearch,onChange:function(e){null===l||void 0===l||l(e)},disabled:s},options:h,rules:c||[]});return t?Object(g.b)(g.a,{children:Object(g.b)(d.MyForm,{form:t,labelCol:o||{span:8},wrapperCol:u||{span:16},children:b})}):b},L=n(13),C=n(8),y=n(59),w=n(55),K=n(193),T=n(717),M=n(744),P=n(715),N=n(241),S=n(763),x=n(740),I=n(724),F=n(752),X=n(141),k=h.c.phieuKhoXuatChaLuaChiTietModal;var D=function(e){var t=Object(s.b)(),n=l.a.useForm(),a=Object(u.a)(n,1)[0],c=Object(s.c)((function(e){return e.form})),h=c.modal,b=c.datas,f=r.a.useMemo((function(){var e;return!!(null===h||void 0===h||null===(e=h[k])||void 0===e?void 0:e.open)}),[h[k]]),m=null===b||void 0===b?void 0:b[k];function O(){return j.apply(this,arguments)}function j(){return(j=Object(o.a)(i.a.mark((function e(){var n,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.validateFields();case 2:n=e.sent,o=Object(d.convertMomentToString)(M.a.getInputFields(),n),o=t(Object(X.c)(o)),t(Object(N.e)({convertedData:o,nameOfId:"nguyenVatLieuChaLuaId"})),a.resetFields(),Object(F.a)("nguyenVatLieuChaLuaId");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.useEffect((function(){f||a.resetFields()}),[f]),r.a.useEffect((function(){a.setFieldsValue(m)}),[m]),Object(g.b)(d.MyModal,{title:Object(g.b)("div",{children:"Nguy\xean Li\u1ec7u V\xe0 S\u1ed1 L\u01b0\u1ee3ng"}),visible:f,onClose:function(){t(Object(d.closeModal)({modalId:k}))},onOkModal:O,width:900,modalId:k,datas:b,children:Object(g.c)(d.MyForm,{form:a,labelCol:{span:6},wrapperCol:{span:18},children:[Object(g.b)(v.a,{name:"id",label:"id",disabled:!0}),Object(g.b)(S.a,{rules:[{required:!0}],isAddNew:!0,onAfterSelect:function(e,t){a.setFieldsValue(t)},onAfterAddFinish:function(e,t){a.setFieldsValue(t)}}),Object(g.b)(x.a,{name:I.a.soLuong.id,label:I.a.soLuong.name,onPressEnter:O})]})})},E=n(736),V=n(720),R=n(368),B=n(159),A=n(123),G=h.c.phieuDiChoTuBonModal;var q=function(e){var t=e.pageData,n=Object(s.c)((function(e){return e.hideColumns})),a=null===n||void 0===n?void 0:n[G||""],i=r.a.useMemo((function(){var e=[d.constants.stt,R.a.tenNguyenVatLieuChaLua,B.a.tenNhomMatHang,I.a.soLuong,A.a.tenDonViTinh,I.a.donGia],t=[I.a.thanhTien],n=[d.constants.editRow];return[{id:0,colSpan:1+e.reduce((function(e,t){var n=t.id;return e+((null===a||void 0===a?void 0:a[n])?0:1)}),0),cellClassName:"text-center font-weight-bold text-danger"},{id:1,colSpan:t.reduce((function(e,t){var n=t.id;return e+((null===a||void 0===a?void 0:a[n])?0:1)}),0),cellClassName:"text-right font-weight-bold text-small text-danger",render:function(e){return Object(d.formatNumber)(e)}},{id:2,colSpan:n.reduce((function(e,t){var n=t.id;return e+((null===a||void 0===a?void 0:a[n])?0:1)}),0)}]}),[a]),o=r.a.useMemo((function(){return t.reduce((function(e,t){var n=e.thanhTien+(t.thanhTien||0);return Object(C.a)(Object(C.a)({},e),{},{thanhTien:n})}),{tong:"T\u1ed5ng ti\u1ec1n",thanhTien:0})}),[t]),u=r.a.useMemo((function(){return["tong","thanhTien"].map((function(e,t){return Object(L.a)({},t,o[e])}))}),[o]);return Object(g.b)(V.a,{columns:i,dataSource:u})},z=h.c.phieuKhoXuatChaLuaChiTietModal;var H=function(e){var t=Object(s.b)(),n=Object(s.c)((function(e){return e.nguyenVatLieuChaLua})).nguyenVatLieuChaLuas,a=Object(s.c)((function(e){return e.phieuKhoXuatChaLuaChiTiet})).phieuKhoXuatChaLuaChiTiets,i=Object(s.c)((function(e){return e.table})).selectedRows,o=r.a.useMemo((function(){return Object(d.onCallbackDataSource)("tenNguyenVatLieuChaLua",Object.values(a||{}))}),[a]),u=r.a.useMemo((function(){return Object.values(a||{}).reduce((function(e,t){var a=(null===n||void 0===n?void 0:n[t.id])||{},i=t.soLuong,o=void 0===i?0:i,u=t.donGia,c=void 0===u?0:u,r=Math.round(o*c);return Object(C.a)(Object(C.a)({},e),{},Object(L.a)({},t.id,Object(C.a)(Object(C.a)(Object(C.a)({},a),t),{},{thanhTien:r})))}),{})}),[a,n]);return Object(g.c)("div",{className:"phieuKhoXuatChaLuaChiTiet-page",css:T.a,children:[Object(g.c)("div",{style:{marginBottom:"7px"},children:[Object(g.b)(y.a,{icon:Object(g.b)(w.a,{}),type:"primary",onClick:function(){t(Object(d.openModal)({modalId:z}))},children:"Th\xeam nguy\xean li\u1ec7u, s\u1ed1 l\u01b0\u1ee3ng"}),Object(g.b)(y.a,{icon:Object(g.b)(K.a,{}),type:"dashed",danger:!0,onClick:function(){var e=(null===i||void 0===i?void 0:i[z])||[];if(0===e.length)return Object(f.h)("Ch\u01b0a ch\u1ecdn m\u1eb7t h\xe0ng!");Object(E.b)("X\xe1c nh\u1eadn x\xf3a m\u1eb7t h\xe0ng \u0111\xe3 ch\u1ecdn?")&&(t(Object(N.c)({phieuKhoXuatChaLuaChiTietDataArray:e})),t(Object(d.onChangeSelectedRowKeys)({tableId:z,selectedRowKeys:[],selectedRows:[]})))},children:"X\xf3a \u0111\xe3 ch\u1ecdn"})]}),Object(g.b)(P.a,{isEdit:!0,constants:M.a,onCallbackDataSource:function(e){return Object(d.onCallbackDataSource)("tenNguyenVatLieuChaLua",e)},datas:u,modalId:z,isSelection:!0,pagination:!1,inputOptions:{onDelete:function(e){t(Object(N.b)(e))},openEditSoLuong:function(e){t(Object(d.openModal)({modalId:h.c.openEditSoLuong,data:e}))}},summary:function(e){return Object(g.b)(q,{pageData:e})}}),Object(g.b)(d.SoLuongInputModal,{modalId:h.c.openEditSoLuong,soLuongName:"soLuong",titleId:"tenNguyenVatLieuChaLua",dataSource:o,onOk:function(e){t(Object(N.e)({convertedData:e}))}}),Object(g.b)(D,{})]})},J=n(750),Q=h.c.phieuKhoXuatChaLuaModal;t.a=function(e){var t,n,a=e.onAfterAddFinish,c=l.a.useForm(),h=Object(u.a)(c,1)[0],j=Object(s.b)(),L=Object(s.c)((function(e){return e.form})),C=L.modal,y=L.datas,w=Object(s.c)((function(e){return e.account})).accountData,K=null===w||void 0===w||null===(t=w.paths)||void 0===t||null===(n=t.phieuKhoXuatChaLua)||void 0===n?void 0:n.edit,T=r.a.useMemo((function(){var e;return!!(null===C||void 0===C||null===(e=C[Q])||void 0===e?void 0:e.open)}),[C[Q]]),M=null===y||void 0===y?void 0:y[Q];function P(){return(P=Object(o.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(K){e.next=2;break}return e.abrupt("return",Object(f.l)());case 2:if(Object(E.b)("X\xe1c nh\u1eadn th\xeam phi\u1ebfu xu\u1ea5t?")){e.next=4;break}return e.abrupt("return",null);case 4:return e.next=6,h.validateFields();case 6:t=e.sent,n=Object(d.convertMomentToString)([m.a.ngay],t),n=j(Object(J.a)(n)),n=j(Object(N.d)(n)),j(Object(b.e)(n)),j(Object(d.closeModal)({modalId:Q})),null===a||void 0===a||a(n);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.useEffect((function(){var e=Object(d.convertToMoment)([m.a.ngay],M);h.setFieldsValue(e),j(Object(N.f)((null===e||void 0===e?void 0:e.phieuKhoXuatChaLuaChiTiets)||{}))}),[M]),r.a.useEffect((function(){T||(h.resetFields(),j(Object(N.f)({})))}),[T]),Object(g.c)(d.MyModal,{title:Object(g.b)("div",{children:"Phi\u1ebfu Kho Xu\u1ea5t Ch\u1ea3 L\u1ee5a"}),visible:T,onClose:function(){j(Object(d.closeModal)({modalId:Q}))},onOkModal:function(){return P.apply(this,arguments)},width:999,modalId:Q,datas:y,children:[Object(g.c)(d.MyForm,{form:h,labelCol:{span:6},wrapperCol:{span:18},children:[Object(g.b)(v.a,{name:d.constants.id.id,label:d.constants.id.name,disabled:!0}),Object(g.b)(v.a,{name:m.a.maPhieuKho.id,label:m.a.maPhieuKho.name}),Object(g.b)(O.a,{name:"ngay",label:"Ng\xe0y",rules:[{required:!0}]}),Object(g.b)(p,{rules:[{required:!0}]})]}),Object(g.b)(H,{})]})}},820:function(e,t,n){"use strict";var a=n(13),i=n(8),o=n(0),u=n.n(o),c=n(744),r=n(715),d=n(56),l=n(25);t.a=function(e){var t=e.record,n=Object(d.c)((function(e){return e.nguyenVatLieuChaLua})).nguyenVatLieuChaLuas,o=u.a.useMemo((function(){return(null===t||void 0===t?void 0:t.phieuKhoXuatChaLuaChiTiets)||{}}),[t]),s=u.a.useMemo((function(){return Object.values(o||{}).reduce((function(e,t){var o=(null===n||void 0===n?void 0:n[t.id])||{},u=t.soLuong,c=void 0===u?0:u,r=t.donGia,d=void 0===r?0:r,l=Math.round(c*d);return Object(i.a)(Object(i.a)({},e),{},Object(a.a)({},t.id,Object(i.a)(Object(i.a)(Object(i.a)({},o),t),{},{thanhTien:l})))}),{})}),[o,n]);return Object(l.b)(r.a,{constants:c.b,datas:s})}}}]);