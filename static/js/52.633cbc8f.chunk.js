(this["webpackJsonptu-bon"]=this["webpackJsonptu-bon"]||[]).push([[52],{971:function(n,a,e){"use strict";e.r(a);var t=e(42),c=e(0),i=e.n(c),o=e(57),r=e(704),d=e(46),u=e(29),l=e(705),b=e(12),s=e(715),h=e(729),g={getTableColumns:function(){return[Object(b.a)(Object(b.a)({},u.a.stt),{},{fixed:!1}),s.a.donHangId,h.b.tenNhaCungCap,s.a.ngayGiao,s.a.tongTienDonHang,s.a.ngayDat,u.f.tenTrangThai,u.a.editRow]},getInputFields:function(){return[]},getExcelFields:function(){return[u.a.active]}},O=e(703),j=e(11),f=e(20),v=e(21),m=e(36),p=e.n(m),N=e(9),H=function(n){Object(f.a)(e,n);var a=Object(v.a)(e);function e(){var n;Object(j.a)(this,e);for(var t=arguments.length,c=new Array(t),i=0;i<t;i++)c[i]=arguments[i];return(n=a.call.apply(a,[this].concat(c))).pathDatas=["quanLyHangNhap","datas"],n.pathDeleted=["quanLyHangNhap","deleted"],n.initData={inputText:"",inputNumber:0,time:p()()},n}return e}(N.AppClass),y=e(702),D=e(393),M=e(350),T=e(351),S=e(60),I=e(66),C=e(17);function w(n){var a,e=n.dateTimePicker,t=Object(o.b)();return Object(C.b)(C.a,{children:Object(C.b)(r.a,{header:Object(C.b)("div",{className:"font-weight-bold",children:Object(C.b)("span",{children:"Th\xf4ng Tin Trang "})}),body:Object(C.b)("div",{className:"form-input-aside",style:{padding:"5px"},children:Object(C.b)("div",{children:(null===e||void 0===e||null===(a=e.getMonthRender)||void 0===a?void 0:a.call(e))||null})}),footer:Object(C.b)("div",{children:Object(C.b)(S.a,{icon:Object(C.b)(I.a,{}),onClick:function(){t(Object(T.b)({tagPageId:u.d.danhSachDHNModal}))},children:"\u0110\xf3ng m\u1edf r\u1ed9ng"})})})})}var x=e(41),k=e(710),F=e(15),E="/quan-ly-hang-nhap/tao-don-hang-nhap",G=e(13),L=e(711),P=u.d.danhSachDHNModal,R=Object(c.memo)((function(n){var a=n.pageData,e=Object(o.c)((function(n){return n.hideColumns})),t=null===e||void 0===e?void 0:e[P||""],c=i.a.useMemo((function(){var n=[u.a.stt,s.a.donHangId,s.a.ngayGiao,h.b.tenNhaCungCap],a=[s.a.tongTienDonHang],e=[s.a.ngayDat,u.f.tenTrangThai,u.a.capNhatRow];return[{id:0,colSpan:2+n.reduce((function(n,a){var e=a.id;return n+((null===t||void 0===t?void 0:t[e])?0:1)}),0),cellClassName:"text-center font-weight-bold text-danger"},{id:1,colSpan:a.reduce((function(n,a){var e=a.id;return n+((null===t||void 0===t?void 0:t[e])?0:1)}),0),cellClassName:"text-right font-weight-bold text-small text-danger",render:function(n){return Object(N.formatNumber)(n)}},{id:2,colSpan:e.reduce((function(n,a){var e=a.id;return n+((null===t||void 0===t?void 0:t[e])?0:1)}),0)}]}),[t]),r=i.a.useMemo((function(){return a.reduce((function(n,a){var e=n.tongTienDonHang+(a.tongTienDonHang||0);return Object(b.a)(Object(b.a)({},n),{},{tongTienDonHang:e})}),{tong:"T\u1ed5ng ti\u1ec1n",tongTienDonHang:0})}),[a]),d=i.a.useMemo((function(){return["tong","tongTienDonHang"].map((function(n,a){return Object(G.a)({},a,r[n])}))}),[r]);return Object(C.b)(L.a,{columns:c,dataSource:d})})),z=e(5),A=e.n(z),q=e(8),V=e(456),B=e(216),J=e(61),K=e(227),X=e(315),Q=e(721),U=e(83),W=e(793),Y=e(488),Z=e(458),$=u.d.openEditGiaNhapMatHang;var _=function(n){var a=n.dataSource,e=n.onOk,r=Object(o.c)((function(n){return n.form})),d=r.modal,u=r.datas,l=null===u||void 0===u?void 0:u[$],s=Object(o.b)(),h=Object(c.useRef)(null),g=Object(X.useForm)(),O=Object(t.a)(g,1)[0];i.a.useEffect((function(){return O.setFieldsValue(l),(null===h||void 0===h?void 0:h.current)&&h.current.focus(),function(){O.resetFields()}}),[l]);var j=i.a.useMemo((function(){var n;return!!(null===d||void 0===d||null===(n=d[$])||void 0===n?void 0:n.open)}),[d[$]]);function f(){return v.apply(this,arguments)}function v(){return(v=Object(q.a)(A.a.mark((function n(){var t,c,i;return A.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,O.validateFields();case 2:t=n.sent,c=t.giaNhapMatHang,null===e||void 0===e||e(Object(b.a)(Object(b.a)({},l),{},{giaNhapMatHang:c})),(i=null===a||void 0===a?void 0:a[(null===l||void 0===l?void 0:l.index)+1])?(O.resetFields(),s(Object(K.c)({modalId:$,data:i}))):s(Object(K.a)({modalId:$}));case 7:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return Object(C.b)(N.MyModal,{title:Object(C.c)("div",{children:["Gi\xe1 m\u1eb7t h\xe0ng - ",(null===l||void 0===l?void 0:l.tenMatHang)||""]}),visible:j,width:700,modalId:$,datas:u,onOkModal:f,onClose:function(){return s(Object(K.a)({modalId:$}))},children:Object(C.c)(N.MyForm,{form:O,labelCol:{span:8},wrapperCol:{span:16},children:[Object(C.b)(N.MyFormItem,{name:"giaNhapMatHang",label:"Gi\xe1 nguy\xean li\u1ec7u:",children:Object(C.b)(Z.a,{ref:h,min:0,style:{width:"100%"},onPressEnter:f,autoFocus:!0})}),Object(C.b)(N.MyFormItem,{label:"Ch\u1ee9c n\u0103ng",children:Object(C.b)(S.a,{type:"primary",onClick:f,icon:Object(C.b)(Y.a,{}),children:"L\u01b0u"})})]})})},nn=e(210),an=e(110),en=e(794),tn=u.d.donHangNhapModal,cn=function(n){var a=n.donHangNhapData,e=Object(o.b)(),c=Object(o.c)((function(n){return n.donHangNhap})).loading,r=Object(o.c)((function(n){return n.chiTietDonHang})).chiTietDonHangs,d=Object(X.useForm)(),l=Object(t.a)(d,1)[0];function s(n){var a=n.map((function(n,a){var e=Object(N.xoaDauVietNam)(n.tenMatHang);return Object(b.a)(Object(b.a)({},n),{},{index:a,searchName:e})}));return a=Object(U.orderBy)(a,"searchName")}i.a.useEffect((function(){return e(Object(nn.h)((null===a||void 0===a?void 0:a.chiTietDonHangs)||{})),function(){e(Object(nn.h)({}))}}),[a]);var h=i.a.useMemo((function(){return r?Object.values(r).map((function(n){var a=n.soLuongThuc,e=void 0===a?0:a,t=n.giaNhapMatHang,c=void 0===t?0:t,i=Math.round(e*c);return Object(b.a)(Object(b.a)({},n),{},{thanhTien:i})})).reduce((function(n,a){return Object(b.a)(Object(b.a)({},n),{},Object(G.a)({},a.id,a))}),{}):{}}),[r]),g=i.a.useMemo((function(){return s(Object.values(h))}),[h]);return Object(C.c)(C.a,{children:[Object(C.b)(O.a,{onCallbackDataSource:s,constants:Q.b,datas:h,loading:c,modalId:tn,form:l,pageSize:50,summary:function(n){return Object(C.b)(W.a,{pageData:n})},inputOptions:{openEditGiaNhapMatHang:function(n){e(Object(K.c)({modalId:u.d.openEditGiaNhapMatHang,data:n}))},openEditSoLuongThuc:function(n){e(Object(K.c)({modalId:u.d.openEditSoLuongThuc,data:n}))}}}),Object(C.b)(_,{dataSource:g,onOk:function(n){e(Object(nn.f)(n)),e(Object(an.e)(!0))}}),Object(C.b)(en.a,{dataSource:g,onOk:function(n){e(Object(nn.g)(n)),e(Object(an.e)(!0))}})]})},on=e(828),rn=u.d.danhSachDHNModal,dn=function(n){var a,e,c=Object(o.b)(),r=Object(o.c)((function(n){return n.form})),d=r.modal,l=r.datas,s=Object(o.c)((function(n){return n.donHang})).donHangDirty,h=Object(o.c)((function(n){return n.danhSachDHN})).donHangNhapData,g=Object(o.c)((function(n){return n.account})).accountData,O=null===g||void 0===g||null===(a=g.paths)||void 0===a||null===(e=a.danhSachDHN)||void 0===e?void 0:e.edit,j=V.a.useForm(),f=Object(t.a)(j,1)[0],v=null===l||void 0===l?void 0:l[rn],m=i.a.useMemo((function(){var n;return!!(null===d||void 0===d||null===(n=d[rn])||void 0===n?void 0:n.open)}),[d[rn]]);function H(){if(s&&!window.confirm("\u0110\u01a1n h\xe0ng \u0111\xe3 thay \u0111\u1ed5i, b\u1ea1n c\xf3 mu\u1ed1n tho\xe1t?"))return null;c(K.a({modalId:rn})),c(Object(an.e)(!1))}function y(){return M.apply(this,arguments)}function M(){return(M=Object(q.a)(A.a.mark((function n(){var a,e,t;return A.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(O){n.next=2;break}return n.abrupt("return",Object(x.e)());case 2:if(window.confirm("X\xe1c nh\u1eadn l\u01b0u \u0111\u01a1n h\xe0ng?")){n.next=4;break}return n.abrupt("return",null);case 4:return n.next=6,f.validateFields();case 6:a=n.sent,e=a.ngayGiao,t=e.format("L"),c(Object(D.g)(Object(b.a)(Object(b.a)({},h),{},{ngayGiao:t}))),c(K.a({modalId:rn})),c(Object(an.e)(!1));case 12:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return i.a.useEffect((function(){return c(Object(D.c)(v)),function(){return Object(F.g)("donHangNhapData")}}),[v]),i.a.useEffect((function(){if(h){var n=p()(null===h||void 0===h?void 0:h.ngayGiao,"L");f.setFieldsValue({ngayGiao:n})}else f.resetFields()}),[h]),(null===h||void 0===h?void 0:h.trangThaiId)===u.h.daHuy.trangThaiId?Object(C.b)(N.MyModal,{title:Object(C.c)("div",{children:["\u0110\u01a1n \u0111\u1eb7t h\xe0ng nh\xe0 cung c\u1ea5p: ",null===h||void 0===h?void 0:h.tenNhaCungCap]}),visible:m,onClose:H,onOkModal:y,width:1200,maskClosable:!s,modalId:rn,datas:l,children:Object(C.b)("div",{children:"\u0110\u01a1n h\xe0ng \u0111\xe3 h\u1ee7y"})}):Object(C.c)(N.MyModal,{title:Object(C.c)("div",{children:["\u0110\u01a1n \u0111\u1eb7t h\xe0ng nh\xe0 cung c\u1ea5p: ",null===h||void 0===h?void 0:h.tenNhaCungCap]}),visible:m,onClose:H,onOkModal:y,width:1200,maskClosable:!s,modalId:rn,datas:l,children:[Object(C.c)(N.MyForm,{form:f,labelCol:{span:4},wrapperCol:{span:20},children:[Object(C.b)(N.MyFormItem,{label:"Ng\xe0y giao: ",name:"ngayGiao",rules:[{required:!0}],children:Object(C.b)(B.a,{style:{width:"100%"}})}),Object(C.b)(N.MyFormItem,{label:"Ch\u1ee9c n\u0103ng",children:Object(C.b)(S.a,{type:"primary",icon:Object(C.b)(J.a,{}),onClick:function(){return c(Object(K.c)({modalId:u.d.matHangAddSoLuongModal}))},children:"Th\xeam m\u1eb7t h\xe0ng"})}),Object(C.c)("div",{className:"mt-1",children:[Object(C.b)("div",{className:"font-weight-bold",style:{marginBottom:"7px"},children:"Chi Ti\u1ebft \u0110\u01a1n H\xe0ng:"}),Object(C.b)(cn,{donHangNhapData:h})]})]}),Object(C.b)(on.a,{giatMatHangName:"giaNhapMatHang",onAfterAddFinish:function(n){c(Object(nn.b)(n)),c(Object(an.e)(!0))}})]})},un=function(n){var a=n.donHangNhapData,e=i.a.useState({}),c=Object(t.a)(e,2),o=c[0],r=c[1],d=Object(X.useForm)(),u=Object(t.a)(d,1)[0];i.a.useEffect((function(){r((null===a||void 0===a?void 0:a.chiTietDonHangs)||{})}),[a]);var l=i.a.useMemo((function(){return o?Object.values(o).map((function(n){var a=n.soLuongThuc,e=void 0===a?0:a,t=n.giaNhapMatHang,c=void 0===t?0:t,i=Math.round(e*c);return Object(b.a)(Object(b.a)({},n),{},{thanhTien:i})})).reduce((function(n,a){return Object(b.a)(Object(b.a)({},n),{},Object(G.a)({},a.id,a))}),{}):{}}),[o]);return Object(C.b)(C.a,{children:Object(C.b)(O.a,{onCallbackDataSource:function(n){var a=n.map((function(n,a){var e=Object(N.xoaDauVietNam)(n.tenMatHang);return Object(b.a)(Object(b.a)({},n),{},{index:a,searchName:e})}));return Object(U.orderBy)(a,"searchName")},constants:Q.b,datas:l,form:u,pageSize:50})})},ln=e(795),bn=u.d.danhSachDHNModal;a.default=function(){var n,a,e=Object(o.b)(),c=Object(d.u)(),b=Object(o.c)((function(n){return n.danhSachDHN})),s=b.tabsData,h=b.loading,j=b.pageSize,f=b.danhSachDHNs,v=Object(o.c)((function(n){var a;return null===(a=n.tagsPage)||void 0===a?void 0:a[bn]})),m=Object(k.a)(),p=Object(t.a)(m,2),N=p[0],S=p[1],I=Object(o.c)((function(n){return n.account})).accountData,G=null===I||void 0===I||null===(n=I.paths)||void 0===n||null===(a=n.danhSachDHN)||void 0===a?void 0:a.edit,L=Object(y.a)({Instance:H,onPending:D.f,addSelectedId:D.a,onDelete:D.e});return i.a.useEffect((function(){return e(Object(D.d)(N)),function(){Object(F.g)("danhSachDHM")}}),[N]),Object(C.c)("div",{className:"danhSachDHN-page",css:l.a,children:[Object(C.b)(r.b,{className:"tabs",options:s,activeKey:v?"aside":"",onTabClick:function(n){if("add"===n){if(!G)return Object(x.e)();c(E)}else"aside"===n?e(Object(T.b)({tagPageId:bn})):"print"===n?(console.log(n),e(Object(K.c)({modalId:u.e.inDonHang}))):"taiExcel"===n&&e(Object(M.b)({tableId:bn,constants:g,fileSheet:"danhSachDHNSheet",fileName:"danhSachDHNName"}))}}),Object(C.c)("div",{className:"tabs-main",style:{marginTop:"10px"},children:[v&&Object(C.b)(w,{dateTimePicker:S}),Object(C.b)("div",{className:"aside-main",children:Object(C.b)(O.a,{constants:g,actions:L,datas:f,loading:h,modalId:bn,isEdit:G,expandable:{expandedRowRender:function(n){return Object(C.b)(un,{donHangNhapData:n})}},isSelection:!0,pagination:!0,pageSize:j,onChange:function(n){return e(Object(D.h)(n.pageSize))},summary:function(n){return Object(C.b)(R,{pageData:n})},rowClassName:function(n){return n.trangThaiId===u.h.daHuy.trangThaiId?"bg-danger":n.trangThaiId===u.h.chuaNhan.trangThaiId?"bg-gold-light":""}})})]}),Object(C.b)(dn,{}),Object(C.b)(ln.a,{modalId:u.e.inDonHang,title:"In \u0110\u01a1n \u0110\u1eb7t H\xe0ng",onPrint:function(n){console.log(n)}})]})}}}]);