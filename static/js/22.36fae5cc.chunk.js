(this["webpackJsonptu-bon"]=this["webpackJsonptu-bon"]||[]).push([[22],{1006:function(n,e,t){"use strict";t.r(e);var a=t(40),i=t(0),c=t.n(i),o=t(326),r=t(56),l=t(706),d=t(64),s=t(710),u=t(8),b=t(7),h=t(721),g=t(32),f=t.n(g),m={getTableColumns:function(){return[]},getInputFields:function(){return[h.a.donHangId,Object(u.a)(Object(u.a)({},h.a.ngayGiao),{},{form:{type:"date-picker",rules:[{required:!0,message:"Ch\u01b0a nh\u1eadp"}],innerProps:{disabledDate:function(n){return n<f()().subtract(3,"day")}}}})]},getExcelFields:function(){return[h.a.donHangId,h.a.ngayDat,h.a.ngayGiao,b.constants.active]}},p=t(708),O=t(94),j=t(705),v=t(400),T=t(72),C=t(5),y=t.n(C),M=t(13),w=t(10),x=t(59),F=t(193),N=t(497),H=t(113),I=t(44),S=t(365),k=t(811),A=t(55),V=t(279),D=t(711),L=t(24),B=function(n){var e,t,a=n.form,i=n.name,o=n.mode,l=n.label,s=n.labelCol,u=n.wrapperCol,h=n.rules,g=n.isAddNew,f=n.isTrangQuanLy,m=n.onAfterSelect,p=n.onAfterAddFinish,O=n.disabled,j=Object(r.b)(),v=Object(I.u)(),T=Object(r.c)((function(n){return n.nhaCungCap})).nhaCungCaps,C=Object(r.c)((function(n){return n.account})).accountData,y=null===C||void 0===C||null===(e=C.paths)||void 0===e||null===(t=e.nhaCungCap)||void 0===t?void 0:t.edit,M=c.a.useMemo((function(){return Object.values(T).filter((function(n){return n.active})).map((function(n){var e="".concat(n.tenNhaCungCap);return{value:n.id,label:e}}))}),[T]);var w=Object(L.b)(b.MyFormItem,{label:l||"NCC",type:"select",name:i||"nhaCungCapId",innerProps:{mode:o,showSearch:!0,allowClear:!0,filterOption:b.onSelectSearch,onChange:function(n){j(Object(S.a)(n)),null===m||void 0===m||m(n)},disabled:O,notFoundContent:y?Object(L.c)("div",{children:[g?Object(L.b)(x.a,{icon:Object(L.b)(A.a,{}),type:"primary",onClick:function(){j(Object(b.openModal)({modalId:d.c.nhaCungCapModal}))}}):null,f?Object(L.b)(x.a,{icon:Object(L.b)(V.a,{}),type:"dashed",onClick:function(){v(D.a.nhaCungCap)},children:"Q. l\xfd"}):null]}):Object(L.b)(H.a,{})},options:M,rules:h||[]});return a?Object(L.c)(L.a,{children:[Object(L.b)(b.MyForm,{form:a,labelCol:s||{span:8},wrapperCol:u||{span:16},children:w}),y&&Object(L.b)(k.a,{onAfterAddFinish:function(n){a.setFieldsValue({nhaCungCapId:n})}})]}):Object(L.c)(L.a,{children:[w,y&&Object(L.b)(k.a,{onAfterAddFinish:function(n){function e(e){return n.apply(this,arguments)}return e.toString=function(){return n.toString()},e}((function(n){null===p||void 0===p||p(n)}))})]})},E=t(213),G=t(36),P=t(87);var R=function(n){var e=n.form,t=Object(r.b)(),a=Object(r.c)((function(n){return n.chiTietDonHang})).chiTietDonHangs,i=Object(r.c)((function(n){return n.nhaCungCap})).nhaCungCapId,o=Object(r.c)((function(n){return n.donHang})).isRutGon,s=Object(r.c)((function(n){return n.dsMatHang})).dsMatHangs,h=Object(r.c)((function(n){return n.giaNhapMatHang})).giaNhapMatHangs;function g(){return(g=Object(w.a)(y.a.mark((function n(){var i,c,o;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.validateFields();case 2:if(i=n.sent,window.confirm("X\xe1c nh\u1eadn t\u1ea1o \u0111\u01a1n?")){n.next=5;break}return n.abrupt("return");case 5:return c=Object.values(a).filter((function(n){return n.soLuong})).reduce((function(n,e){return Object(u.a)(Object(u.a)({},n),{},Object(M.a)({},e.id,e))}),{}),i=Object(b.convertMomentToString)(m.getInputFields(),i),n.next=9,t(Object(S.c)(i));case 9:return i=n.sent,o=Object(u.a)(Object(u.a)({},i),{},{chiTietDonHangs:c}),n.next=13,t(Object(v.c)(o));case 13:return n.next=15,f();case 15:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function f(){return p.apply(this,arguments)}function p(){return(p=Object(w.a)(y.a.mark((function n(){return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t(Object(b.closeModal)({modalId:d.c.donHangNhapModal})),t(Object(E.e)(null)),t(Object(P.i)(!1)),e.resetFields(),Object(G.j)();case 5:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return c.a.useEffect((function(){t(Object(E.e)(i))}),[s,h,o,i]),Object(L.b)(L.a,{children:Object(L.b)(l.a,{header:Object(L.b)("div",{className:"font-weight-bold mt-1",children:Object(L.b)("div",{children:"Th\xf4ng Tin \u0110\u01a1n H\xe0ng Mua"})}),body:Object(L.b)("div",{className:"form-input-aside",style:{padding:"5px"},children:Object(L.b)(b.MyForm,{labelCol:{span:8},wrapperCol:{span:16},form:e,options:Object(b.getFormItemFields)(m.getInputFields()),children:Object(L.b)(B,{isAddNew:!0,isTrangQuanLy:!0,onAfterSelect:function(n){t(Object(S.a)(n))},onAfterAddFinish:function(n){t(Object(S.a)(n)),e.setFieldsValue({nhaCungCapId:n})},rules:[{required:!0,message:"Ch\u01b0a nh\u1eadp"}]})})}),footer:Object(L.c)("div",{children:[Object(L.b)(x.a,{danger:!0,type:"dashed",icon:Object(L.b)(F.a,{}),onClick:f,children:"X\xf3a SL"}),Object(L.b)(x.a,{type:"primary",icon:Object(L.b)(N.a,{}),onClick:function(){return g.apply(this,arguments)},children:"T\u1ea1o phi\u1ebfu"})]})})})},q=t(738),Q=t(775),z=d.c.donHangNhapModal;e.default=function(){var n=Object(r.b)(),e=Object(r.c)((function(n){var e;return null===(e=n.tagsPage)||void 0===e?void 0:e[z]})),t=Object(r.c)((function(n){return n.donHang})),i=t.isRutGon,c=t.isNhapSLThuc,u=Object(r.c)((function(n){return n.donHangNhap})),h=u.tabsData,g=u.loading,f=u.pageSize,C=Object(r.c)((function(n){return n.chiTietDonHang})).chiTietDonHangs,y=Object(j.a)({Instance:O.a,onPending:v.d,addSelectedId:v.a}),M=Object(o.useForm)(),w=Object(a.a)(M,1)[0];return Object(L.c)("div",{className:"taoDonHangNhap-page",css:s.a,children:[Object(L.b)(l.b,{className:"tabs",options:h,activeKey:i?"rutGon":e?"aside":"",onTabClick:function(e){"rutGon"===e?n(Object(P.i)(!i)):"aside"===e?n(Object(b.toggleAside)({tagPageId:z})):"taiExcel"===e?n(Object(b.downloadExcel)({tableId:z,constants:m,fileSheet:"donHangNhapSheet",fileName:"donHangNhapName"})):"themMatHang"===e&&n(Object(b.openModal)({modalId:d.c.dsMatHangModal}))}}),Object(L.c)("div",{className:"tabs-main",children:[e&&Object(L.b)(R,{form:w}),Object(L.b)("div",{className:"aside-main form-input-table",children:Object(L.b)(p.a,{pagination:!0,isEdit:!0,inputOptions:{isNhapSLThuc:c},onCallbackDataSource:function(n){return Object(T.orderBy)(n,["tenMatHang"])},constants:Q.a,actions:y,datas:C,loading:g,modalId:z,form:w,pageSize:f,onChange:function(e){return n(Object(v.e)(e.pageSize))},onBlur:function(e){return n(Object(E.f)({name:e.target.name,value:e.target.value}))}})})]}),Object(L.b)(q.a,{})]})}},716:function(n,e,t){"use strict";var a=t(0),i=t.n(a),c=t(59),o=t(113),r=t(44),l=t(7),d=t(56),s=t(357),u=t(5),b=t.n(u),h=t(10),g=t(103),f=t(705),m=t(371),p=t(64),O=t(24),j=p.c.donViTinhModal,v=function(n){var e=n.onAfterAddFinish,t=Object(f.a)({Instance:m.a,onPending:s.f,addSelectedId:s.a}),a=Object(d.b)(),c=Object(d.c)((function(n){return n.form})),o=c.modal,r=c.datas,u=i.a.useMemo((function(){var n;return!!(null===o||void 0===o||null===(n=o[j])||void 0===n?void 0:n.open)}),[o[j]]);function p(){return(p=Object(h.a)(b.a.mark((function n(i,c){var o,r;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=!0,!c){n.next=16;break}if(null===i||void 0===i?void 0:i.id){n.next=11;break}return n.next=5,a(t.onAddAsync({validatedValues:c}));case 5:o=n.sent,console.log(c,"validatedValues dvt"),null===e||void 0===e||e(null===(r=o)||void 0===r?void 0:r.id),o=Boolean(o),n.next=16;break;case 11:return n.t0=Boolean,n.next=14,a(t.onUpdateAsync({currentData:i,validatedValues:c}));case 14:n.t1=n.sent,o=(0,n.t0)(n.t1);case 16:o&&a(Object(l.closeModal)({modalId:j}));case 17:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return Object(O.b)(l.MyModal,{form:!0,title:"\u0110\u01a1n V\u1ecb T\xednh",visible:u,onClose:function(){a(Object(l.closeModal)({modalId:j}))},onOkModal:function(n,e){return p.apply(this,arguments)},formOptions:Object(l.getFormItemFields)(g.a.getInputFields()),formProps:{labelCol:{span:8},wrapperCol:{span:16}},width:700,modalId:j,datas:r})},T=t(711),C=t(55),y=t(279);e.a=function(n){var e,t,a=n.form,u=n.name,b=n.mode,h=n.label,g=n.labelCol,f=n.wrapperCol,m=n.rules,j=n.isAddNew,M=n.isTrangQuanLy,w=n.onAfterSelect,x=Object(d.b)(),F=Object(r.u)(),N=Object(d.c)((function(n){return n.donViTinh})).donViTinhs,H=Object(d.c)((function(n){return n.account})).accountData,I=i.a.useMemo((function(){return Object.values(N).filter((function(n){return n.active})).map((function(n){var e="".concat(n.tenDonViTinh);return{value:n.id,label:e}}))}),[N]),S=null===H||void 0===H||null===(e=H.paths)||void 0===e||null===(t=e.donViTinh)||void 0===t?void 0:t.edit;var k=Object(O.b)(l.MyFormItem,{label:h||"\u0110\u01a1n v\u1ecb t\xednh",type:"select",name:u||"donViTinhId",innerProps:{mode:b,showSearch:!0,allowClear:!0,filterOption:l.onSelectSearch,onChange:function(n){x(Object(s.a)(n)),null===w||void 0===w||w(n)},notFoundContent:S?Object(O.c)("div",{children:[j?Object(O.b)(c.a,{icon:Object(O.b)(C.a,{}),type:"primary",onClick:function(){return x(Object(l.openModal)({modalId:p.c.donViTinhModal}))},children:"Th\xeam"}):null,M?Object(O.b)(c.a,{icon:Object(O.b)(y.a,{}),type:"dashed",onClick:function(){F(T.a.donViTinh)},children:"Q. l\xfd"}):null]}):Object(O.b)(o.a,{})},options:I,rules:m||[]});return a?Object(O.c)(O.a,{children:[Object(O.b)(l.MyForm,{form:a,labelCol:g||{span:8},wrapperCol:f||{span:16},children:k}),S&&Object(O.b)(v,{onAfterAddFinish:function(n){a.setFieldsValue({donViTinhId:n})}})]}):Object(O.c)(O.a,{children:[k,S&&Object(O.b)(v,{})]})}},719:function(n,e,t){"use strict";t.d(e,"a",(function(){return o}));t(0);var a=t(7),i=t(72),c=t(24),o={soLuong:{id:"soLuong",name:"S\u1ed1 l\u01b0\u1ee3ng",width:100,className:"text-small font-weight-bold",align:"right",form:{type:"input-number-format"}},soLuongThuc:{id:"soLuongThuc",name:"SL nh\u1eadn",width:100,className:"text-small font-weight-bold",align:"right",form:{type:"input-number-format"}},thanhTien:{id:"thanhTien",name:"Th\xe0nh ti\u1ec1n",width:100,className:"text-small font-weight-bold",align:"right",render:a.numberRender},thanhTienSauVAT:{id:"thanhTienSauVAT",name:"Th\xe0nh ti\u1ec1n",width:100,className:"text-small font-weight-bold",align:"right",render:a.numberRender},ghiChu:{id:"ghiChu",name:"Ghi ch\xfa",width:100,className:"text-small",form:{type:"text-area"},render:function(n,e,t,a){var o,r=(null===a||void 0===a||null===(o=a.inputOptions)||void 0===o?void 0:o.openEditGhiChu)||i.noop;return Object(c.b)("div",{className:"hoverClassBG",onClick:function(){return r(e)},children:n||"--"})}},getTableColumns:function(){return[]},getInputFields:function(){return[]}}},721:function(n,e,t){"use strict";t.d(e,"a",(function(){return c}));var a=t(7),i=t(372),c={donHangId:{id:"donHangId",name:"M\xe3 \u0110H",width:100,className:"text-small",isSearch:!0,align:"center",sorter:Object(a.sortByText)("donHangId"),form:{type:"input",innerProps:{disabled:!0}}},ngayDat:{id:"ngayDat",name:"Ng\xe0y \u0111\u1eb7t",width:100,className:"text-small",isSearch:!0,align:"center",form:{type:"date-picker",rules:[{required:!0,message:"Ch\u01b0a nh\u1eadp"}]}},ngayGiao:{id:"ngayGiao",name:"Ng\xe0y giao",width:110,className:"text-small font-weight-bold",isSearch:!0,sorter:Object(a.sortByText)("dayId"),align:"center",form:{type:"date-picker",rules:[{required:!0,message:"Ch\u01b0a nh\u1eadp"}]}},ngayNhan:{id:"ngayNhan",name:"Ng\xe0y nh\u1eadn",width:110,className:"text-small font-weight-bold",isSearch:!0,sorter:Object(a.sortByText)("dayId"),align:"center",form:{type:"date-picker",rules:[{required:!0,message:"Ch\u01b0a nh\u1eadp"}]}},tongTienMatHang:{id:"tongTienMatHang",name:"T\u1ed5ng ti\u1ec1n m\u1eb7t h\xe0ng",width:100,className:"text-small font-weight-bold",align:"right",render:a.numberRender},tongTienMatHangTra:{id:"tongTienMatHangTra",name:"T\u1ed5ng ti\u1ec1n tr\u1ea3",width:100,className:"text-small font-weight-bold",align:"right",render:a.numberRender},tongTienDonHang:{id:"tongTienDonHang",name:"T\u1ed5ng ti\u1ec1n",width:100,className:"text-small font-weight-bold",align:"right",render:a.numberRender},daThanhToan:{id:"daThanhToan",name:"\u0110\xe3 giao",width:90,className:"text-small",filters:a.trueFalseFilter.filters,onFilter:a.trueFalseFilter.onFilter("daThanhToan"),align:"center",render:Object(i.a)("daThanhToan")},getTableColumns:function(){return[a.constants.stt,a.constants.active,a.constants.editRow]},getInputFields:function(){return[]},getExcelFields:function(){return[a.constants.active]}}},734:function(n,e,t){"use strict";t.d(e,"a",(function(){return l}));var a=t(8),i=t(7),c=t(116),o=t(103),r=t(96),l={getTableColumns:function(){return[i.constants.stt,r.a.tenMatHang,Object(a.a)(Object(a.a)({},o.a.tenDonViTinh),{},{align:"center"}),Object(a.a)(Object(a.a)({},c.a.tenNhomMatHang),{},{width:150,align:"center",isSearch:!1}),i.constants.active,r.a.chaLua,i.constants.editRow]},getInputFields:function(){return[i.constants.id,r.a.tenMatHang]},getExcelFields:function(){return[i.constants.stt,i.constants.id,Object(a.a)(Object(a.a)({},r.a.tenMatHang),{},{name:"tenDSMatHang"}),o.a.donViTinhId,o.a.tenDonViTinh,c.a.nhomMatHangId,c.a.tenNhomMatHang,Object(a.a)(Object(a.a)({},i.constants.active),{},{name:"active"})]}}},738:function(n,e,t){"use strict";var a=t(5),i=t.n(a),c=t(10),o=t(40),r=t(0),l=t.n(r),d=t(326),s=t(59),u=t(279),b=t(44),h=t(7),g=t(56),f=t(734),m=t(705),p=t(377),O=t(64),j=t(362),v=t(715),T=t(716),C=t(357),y=t(365),M=t(358),w=t(36),x="/quan-ly-mat-hang/ds-mat-hang",F=t(24),N=O.c.dsMatHangModal;e.a=function(n){var e,t,a=n.onAfterAddFinish,r=Object(g.b)(),O=Object(b.u)(),H=Object(g.c)((function(n){return n.form})),I=H.modal,S=H.datas,k=null===S||void 0===S?void 0:S[N],A=Object(g.c)((function(n){return n.account})).accountData,V=null===A||void 0===A||null===(e=A.paths)||void 0===e||null===(t=e.dsMatHang)||void 0===t?void 0:t.edit,D=Object(m.a)({Instance:p.a,onPending:j.d,addSelectedId:j.a,isEdit:V}),L=Object(d.useForm)(),B=Object(o.a)(L,1)[0];l.a.useEffect((function(){k?B.setFieldsValue(k):B.resetFields()}),[k]);var E=l.a.useMemo((function(){var n;return!!(null===I||void 0===I||null===(n=I[N])||void 0===n?void 0:n.open)}),[I[N]]);function G(){return(G=Object(c.a)(i.a.mark((function n(){var e,t,c,o;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(V){n.next=2;break}return n.abrupt("return",Object(w.k)());case 2:return e=!0,n.next=5,B.validateFields();case 5:return t=n.sent,n.next=8,r(Object(C.c)(t));case 8:return c=n.sent,n.next=11,r(Object(y.c)(c));case 11:return c=n.sent,n.next=14,r(Object(M.c)(c));case 14:if(c=n.sent,!t){n.next=29;break}if(null===k||void 0===k?void 0:k.id){n.next=24;break}return n.next=19,r(D.onAddAsync({validatedValues:c}));case 19:e=n.sent,null===a||void 0===a||a(null===(o=e)||void 0===o?void 0:o.id),e=Boolean(e),n.next=29;break;case 24:return n.t0=Boolean,n.next=27,r(D.onUpdateAsync({currentData:k,validatedValues:c}));case 27:n.t1=n.sent,e=(0,n.t0)(n.t1);case 29:e&&r(Object(h.closeModal)({modalId:N}));case 30:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return Object(F.c)(h.MyModal,{title:Object(F.c)("div",{children:["M\u1eb7t H\xe0ng ",Object(F.b)(s.a,{icon:Object(F.b)(u.a,{}),onClick:function(){r(Object(h.closeModal)({modalId:N})),O(x)},children:"Trang qu\u1ea3n l\xfd"})]}),visible:E,onClose:function(){r(Object(h.closeModal)({modalId:N}))},onOkModal:function(){return G.apply(this,arguments)},width:700,modalId:N,datas:S,children:[Object(F.b)(h.MyForm,{labelCol:{span:8},wrapperCol:{span:16},form:B,options:Object(h.getFormItemFields)(f.a.getInputFields())}),Object(F.b)(T.a,{form:B,isAddNew:!0,isTrangQuanLy:!0}),Object(F.b)(v.a,{form:B,isAddNew:!0,isTrangQuanLy:!0})]})}},775:function(n,e,t){"use strict";t.d(e,"a",(function(){return u}));var a=t(8),i=(t(0),t(7)),c=t(470),o=t(116),r=t(103),l=t(96),d=t(719),s=t(24),u={getTableColumns:function(){return[Object(a.a)(Object(a.a)({},i.constants.stt),{},{fixed:!1}),Object(a.a)(Object(a.a)({},l.a.tenMatHang),{},{width:120,fixed:!1}),Object(a.a)(Object(a.a)({},o.a.tenNhomMatHang),{},{align:"center"}),Object(a.a)(Object(a.a)({},d.a.soLuong),{},{render:function(n,e,t,a){var i=a.onBlur;return Object(s.b)(c.a,{value:n||"",size:"small",name:"".concat(e.id,".soLuong"),onBlur:i,min:0})}}),Object(a.a)(Object(a.a)({},r.a.tenDonViTinh),{},{align:"center"}),l.a.giaNhapMatHang]},getInputFields:function(){return[]},getExcelFields:function(){return[i.constants.stt,l.a.tenMatHang,o.a.tenNhomMatHang,d.a.soLuongThuc,r.a.tenDonViTinh,l.a.giaNhapMatHang]}}}}]);