(this["webpackJsonptu-bon"]=this["webpackJsonptu-bon"]||[]).push([[21],{704:function(e,n,t){"use strict";t.d(n,"a",(function(){return o}));var a=t(0),c=(t(320),t(159)),o=(t(79),t(209),t(124),t(231),t(319),t(351),function(e,n){var t=arguments;if(null==n||!c.d.call(n,"css"))return a.createElement.apply(void 0,t);var o=t.length,i=new Array(o);i[0]=c.a,i[1]=Object(c.c)(e,n);for(var r=2;r<o;r++)i[r]=t[r];return a.createElement.apply(null,i)})},707:function(e,n,t){"use strict";t.d(n,"a",(function(){return g}));var a=t(42),c=t(0),o=t.n(c),i=t(35),r=t.n(i),l=t(457),d=t(218),u=t(84),s=t(40),b=t(233),m=t(17),f=function(e){var n=e||{},t=n.disabledDate,i=n.editabledDate,u=n.className,f=n.defaultTime,g=void 0===f?r()():f,h=n.disabled,v=Object(c.useState)(g),O=Object(a.a)(v,2),j=O[0],p=O[1],y=Object(c.useState)((function(){return Object(s.a)(g)})),N=Object(a.a)(y,2),w=N[0],T=N[1],C=o.a.useMemo((function(){return null===i||void 0===i?void 0:i(j)}),[j,i]);function D(e){var n=Object(s.a)(e);T(n),p(e)}var x=function(e){var n=e.label,a=e.format,c=e.width,o=e.picker;return Object(m.b)(l.a.Item,{label:n,children:Object(m.b)(d.a,{locale:b.a,style:{width:c},format:a,picker:o,value:j,onChange:D,disabledDate:t,disabled:h,className:u})})};return[j,{getDayRender:function(){return x({picker:"date",label:"Ng\xe0y: ",format:"DD/MM/YY",width:"110px"})},getMonthRender:function(){return x({picker:"month",label:"Th\xe1ng: ",format:"MM/YYYY",width:"110px"})},getYearRender:function(){return x({picker:"year",label:"N\u0103m: ",format:"YYYY",width:"110px"})},isEditabledDate:C,selectedTime:j,yearAndDayOfYear:w,getDayOfAll:function(){return null===w||void 0===w?void 0:w.dayOfAll},onUpdate:D}]};f.defaultProps={disabledDate:u.noop,width:"105px",format:"DD/MM/YY",className:"",defaultTime:r()(),disabled:!1};var g=f},710:function(e,n,t){"use strict";var a=t(702);t.d(n,"a",(function(){return a.a}));var c=t(707);t.d(n,"b",(function(){return c.a}))},712:function(e,n,t){"use strict";t(0);var a=t(456),c=t(17),o=a.a.Summary,i=o.Row,r=o.Cell;n.a=function(e){var n,t=e.columns,a=e.dataSource;return Object(c.b)(i,{children:null===t||void 0===t||null===(n=t.map)||void 0===n?void 0:n.call(t,(function(e,n){var t=null===e||void 0===e?void 0:e.id,o=(null===e||void 0===e?void 0:e.colSpan)||0,i=(null===e||void 0===e?void 0:e.cellClassName)||"",l=(null===e||void 0===e?void 0:e.valueStyle)||{},d=(null===e||void 0===e?void 0:e.valueClassName)||"",u=null===e||void 0===e?void 0:e.render,s=(null===a||void 0===a?void 0:a[n])||{},b=(null===s||void 0===s?void 0:s[t])||"";return u&&(b=u(b,s,n)),Object(c.b)(r,{index:n,colSpan:o,className:i,children:Object(c.b)("div",{style:l,className:d,children:b})},t)}))})}},767:function(e,n,t){"use strict";var a=t(0),c=t.n(a),o=t(60),i=t(112),r=t(9),l=t(57),d=t(178),u=t(5),s=t.n(u),b=t(8),m=t(230),f=t(210),g=t(702),h=t(129),v=t(30),O=t(17),j=v.d.congTrinhModal,p=function(e){var n=e.onAfterAddFinish,t=Object(g.a)({Instance:h.a,onPending:d.f,addSelectedId:d.a}),a=Object(l.b)(),o=Object(l.c)((function(e){return e.form})),i=o.modal,u=o.datas,v=c.a.useMemo((function(){var e;return!!(null===i||void 0===i||null===(e=i[j])||void 0===e?void 0:e.open)}),[i[j]]);function p(){return(p=Object(b.a)(s.a.mark((function e(c,o){var i,l,d;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=!0,l=Object(r.convertMomentToString)(f.a.getInputFields(),o),!o){e.next=16;break}if(null===c||void 0===c?void 0:c.id){e.next=11;break}return e.next=6,a(t.onAddAsync({validatedValues:l}));case 6:i=e.sent,null===n||void 0===n||n(null===(d=i)||void 0===d?void 0:d.id),i=Boolean(i),e.next=16;break;case 11:return e.t0=Boolean,e.next=14,a(t.onUpdateAsync({currentData:c,validatedValues:l}));case 14:e.t1=e.sent,i=(0,e.t0)(e.t1);case 16:i&&a(m.a({modalId:j}));case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(O.b)(r.MyModal,{form:!0,title:"CongTrinh",visible:v,onClose:function(){a(m.a({modalId:j}))},onOkModal:function(e,n){return p.apply(this,arguments)},formOptions:Object(r.getFormItemFields)(f.a.getInputFields()),formProps:{labelCol:{span:8},wrapperCol:{span:16}},width:700,modalId:j,datas:u})},y=t(61);n.a=function(e){var n=e.form,t=e.name,a=e.mode,u=e.label,s=e.labelCol,b=e.wrapperCol,f=e.rules,g=e.isAddNew,h=Object(l.b)(),j=Object(l.c)((function(e){return e.congTrinh})).congTrinhs,N=c.a.useMemo((function(){return Object.values(j).filter((function(e){return e.active})).map((function(e){var n="".concat(e.tenCongTrinh);return{value:e.id,label:n}}))}),[j]);var w=Object(O.b)(r.MyFormItem,{label:u||"C\xf4ng tr\xecnh",type:"select",name:t||"congTrinhId",innerProps:{mode:a,showSearch:!0,allowClear:!0,filterOption:r.onSelectSearch,onChange:function(e){h(Object(d.a)(e))},notFoundContent:g?Object(O.b)("div",{children:Object(O.b)(o.a,{icon:Object(O.b)(y.a,{}),type:"primary",onClick:function(){return h(Object(m.c)({modalId:v.d.congTrinhModal}))},children:"Th\xeam m\u1edbi"})}):Object(O.b)(i.a,{})},options:N,rules:f||[]});return n?Object(O.c)(O.a,{children:[Object(O.b)(r.MyForm,{form:n,labelCol:s||{span:8},wrapperCol:b||{span:16},children:w}),Object(O.b)(p,{onAfterAddFinish:function(e){n.setFieldsValue({congTrinhId:e})}})]}):Object(O.c)(O.a,{children:[w,Object(O.b)(p,{})]})}},985:function(e,n,t){"use strict";t.r(n);var a=t(13),c=t(11),o=t(5),i=t.n(o),r=t(8),l=t(42),d=t(0),u=t.n(d),s=t(57),b=t(710),m=t(123),f=t(157),g=t(102),h=t(457),v=t(459),O=t(322),j=t(703),p=t(30),y=t(706),N=t(705),w=t(702),T=t(352),C=t(230),D=t(358),x=t(9),M=t(125),I=t(71),F=t(339),S=t(126),k=t(210),V=t(239),Y={congNgay:{id:"congNgay",name:"C\xf4ng ng\xe0y",width:100,className:"text-small font-weight-bold",align:"center",isSearch:!0,form:{type:"input-number"}},congTangCaNgay:{id:"congTangCaNgay",name:"T\u0103ng ca",width:100,className:"text-small font-weight-bold",align:"center",form:{type:"input-number"}},hoTroXang:{id:"hoTroXang",name:"HT c\u01a1m",width:100,className:"text-small font-weight-bold",align:"center",form:{type:"input-number-format"}},lyDoVang:{id:"lyDoVang",name:"L\xfd do v\u1eafng",width:100,className:"text-small font-weight-bold",align:"center",form:{type:"select",options:[{label:"NP",value:"NP"},{label:"KP",value:"KP"},{label:"CG",value:"CG"}]}},getTableColumns:function(){return[Object(c.a)(Object(c.a)({},p.a.stt),{},{fixed:!1}),Object(c.a)(Object(c.a)({},I.a.hoTen),{},{fixed:!1}),this.congNgay,V.a.luongNgay,k.a.tenCongTrinh,p.a.capNhatRow]},getInputFields:function(){return[this.congNgay]},getExcelFields:function(){return[M.b.maNV,I.a.hoTen,M.b.boPhanId,S.a.chucVuName,F.a.caLamViecName,this.congNgay,this.congTangCaNgay,this.hoTroXang,this.lyDoVang]}},A={tong:{id:"tong",name:"T\u1ed5ng",width:70,className:"text-small font-weight-bold",align:"center"},diLam:{id:"diLam",name:"\u0110i l\xe0m",width:70,className:"text-small font-weight-bold",align:"center"},vang:{id:"vang",name:"v\u1eafng",width:70,className:"text-small font-weight-bold",align:"center"},getTableColumns:function(){return[Object(c.a)(Object(c.a)({},F.a.caLamViecName),{},{fixed:!1}),this.tong,this.diLam,this.vang]},getInputFields:function(){return[]}},P=t(394),E=t(767),L=t(178),R=t(17),K=p.d.diemDanhModal,B=function(e){var n,t=e.selectedTime,a=Object(O.useForm)(),o=Object(l.a)(a,1)[0],d=Object(O.useForm)(),b=Object(l.a)(d,1)[0],m=Object(s.b)(),f=Object(s.c)((function(e){return e.form})),g=f.modal,h=f.datas,v=u.a.useMemo((function(){var e;return!!(null===g||void 0===g||null===(e=g[K])||void 0===e?void 0:e.open)}),[null===(n=g[K])||void 0===n?void 0:n.open]),j=null===h||void 0===h?void 0:h[K];function p(){return(p=Object(r.a)(i.a.mark((function e(){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!0,e.next=3,b.validateFields();case 3:return n=e.sent,e.next=6,m(Object(L.d)(n));case 6:return a=e.sent,e.next=9,m(Object(P.e)({selectedTime:t,diemDanhData:Object(c.a)(Object(c.a)({},a),{},{id:j.id})}));case 9:e.sent&&m(C.a({modalId:K}));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}u.a.useEffect((function(){var e=null===h||void 0===h?void 0:h[K];e?(o.setFieldsValue(e),b.setFieldsValue(e)):(o.resetFields(),b.resetFields())}),[j]);var y=[M.b.maNV,I.a.hoTen];return Object(R.c)(x.MyModal,{title:"\u0110i\u1ec3m Danh",visible:v,onClose:function(){m(C.a({modalId:K}))},onOkModal:function(){return p.apply(this,arguments)},width:700,modalId:K,datas:h,children:[Object(R.b)(x.MyForm,{form:o,options:Object(x.getFormItemFields)(y),labelCol:{span:8},wrapperCol:{span:16}}),Object(R.b)(x.MyForm,{form:b,options:Object(x.getFormItemFields)(Y.getInputFields()),labelCol:{span:8},wrapperCol:{span:16},children:Object(R.b)(E.a,{})})]})},W=p.d.thongKeDiemDanhModal,X=function(e){var n,t=e.datas,o=Object(s.b)(),i=Object(s.c)((function(e){return e.form})).modal,r=Object(s.c)((function(e){return e.caLamViec})).caLamViecs,l=u.a.useMemo((function(){var e;return!!(null===i||void 0===i||null===(e=i[W])||void 0===e?void 0:e.open)}),[null===(n=i[W])||void 0===n?void 0:n.open]),d=u.a.useMemo((function(){return l?Object.values(t).reduce((function(e,n){var t=n.caLamViecId,o=n.congNgay,i=n.congTangCaNgay,l=null===r||void 0===r?void 0:r[t||""],d=(null===e||void 0===e?void 0:e[t])||{},u=(null===d||void 0===d?void 0:d.tong)||0,s=(null===d||void 0===d?void 0:d.diLam)||0,b=o||i?1:0,m=(null===d||void 0===d?void 0:d.vang)||0,f=o||i?0:1;return Object(c.a)(Object(c.a)({},e),{},Object(a.a)({},t,Object(c.a)(Object(c.a)({},l),{},{tong:u+1,diLam:s+b,vang:m+f})))}),{}):{}}),[l,t,r]);return Object(R.b)(x.MyModal,{title:"Th\u1ed1ng K\xea \u0110i\u1ec3m Danh",visible:l,onClose:function(){return o(C.a({modalId:W}))},width:700,modalId:W,datas:t,children:Object(R.b)(N.a,{pagination:!0,scroll:{x:500},constants:A,datas:d})})},G=t(224),J=t(15),U=t(712),H=p.d.diemDanhModal,q=Object(d.memo)((function(e){var n=e.pageData,t=Object(s.c)((function(e){return e.hideColumns})),o=null===t||void 0===t?void 0:t[H||""],i=u.a.useMemo((function(){var e=[p.a.stt,I.a.hoTen,Y.congNgay],n=[V.a.luongNgay],t=[k.a.tenCongTrinh,p.a.capNhatRow];return[{id:0,colSpan:1+e.reduce((function(e,n){var t=n.id;return e+((null===o||void 0===o?void 0:o[t])?0:1)}),0),cellClassName:"text-center font-weight-bold text-danger"},{id:1,colSpan:n.reduce((function(e,n){var t=n.id;return e+((null===o||void 0===o?void 0:o[t])?0:1)}),0),cellClassName:"text-right font-weight-bold text-small text-danger",render:function(e){return Object(x.formatNumber)(e)}},{id:2,colSpan:t.reduce((function(e,n){var t=n.id;return e+((null===o||void 0===o?void 0:o[t])?0:1)}),0)}]}),[o]),r=u.a.useMemo((function(){return n.reduce((function(e,n){var t=e.luongNgay+(n.luongNgay||0);return Object(c.a)(Object(c.a)({},e),{},{luongNgay:t})}),{tong:"T\u1ed5ng ti\u1ec1n",luongNgay:0})}),[n]),l=u.a.useMemo((function(){return["tong","luongNgay"].map((function(e,n){return Object(a.a)({},n,r[e])}))}),[r]);return Object(R.b)(U.a,{columns:i,dataSource:l})})),z=p.d.diemDanhModal;n.default=function(){var e,n,t=Object(s.b)(),o=Object(s.c)((function(e){return e.congTrinh})).congTrinhs,d=Object(s.c)((function(e){return e.salary})).salaries,M=Object(O.useForm)(),I=Object(l.a)(M,1)[0],F=Object(b.b)(),S=Object(l.a)(F,2),k=S[0],V=S[1];u.a.useEffect((function(){I.setFieldsValue({congNgay:1}),t(D.g())}),[]),u.a.useEffect((function(){function e(){return(e=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))).apply(this,arguments)}o&&function(){e.apply(this,arguments)}()}),[o]),u.a.useEffect((function(){}),[k,d]),u.a.useEffect((function(){return t(Object(P.c)(k)),function(){Object(J.h)("diemDanhNgay")}}),[k]);var A=Object(s.c)((function(e){return{nhanSusWorking:e.nhanSu.nhanSusWorking,chucVus:e.chucVu.chucVus,selectedRows:e.table.selectedRows}})),K=A.nhanSusWorking,W=A.chucVus,U=A.selectedRows,H=Object(s.c)((function(e){return e.diemDanh})),Q=H.tabsData,Z=H.loading,$=H.diemDanhsDay,_=Object(w.a)({Instance:G.a,onPending:P.d,addSelectedId:P.a}),ee=Object(s.c)((function(e){return e.account})).accountData,ne=null===ee||void 0===ee||null===(e=ee.paths)||void 0===e||null===(n=e.diemDanh)||void 0===n?void 0:n.edit;function te(){return(te=Object(r.a)(i.a.mark((function e(){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=I.getFieldsValue(),e.next=3,t(Object(L.d)(n));case 3:if(n=e.sent,0!==(a=U[z]||[]).length){e.next=7;break}return e.abrupt("return",m.b.info("Ch\u01b0a ch\u1ecdn d\u1eef li\u1ec7u!"));case 7:return e.next=9,t(Object(P.f)({selectedTime:k,nhanSuArray:a,noiDungDiemDanhs:n}));case 9:t(Object(T.c)());case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ae=u.a.useMemo((function(){var e=t(Object(D.c)(K,{congTyId:"thuanPhat"}));return Object.entries(e).reduce((function(e,n){var t=Object(l.a)(n,2),o=t[0],i=t[1],r=(null===$||void 0===$?void 0:$[o])||{},d=Object(c.a)(Object(c.a)({},i),r);return Object(c.a)(Object(c.a)({},e),{},Object(a.a)({},o,d))}),{})}),[K,W,d,$]);return Object(R.c)("div",{className:"diemDanh-page",css:y.a,children:[Object(R.b)(j.b,{className:"tabs",options:Q,activeKey:"all",onTabClick:function(e){"taiExcel"===e?t(Object(T.b)({tableId:z,constants:Y,fileSheet:"diemDanhTP",fileName:"diemDanhTP"})):"xemThongKe"===e&&t(Object(C.c)({modalId:p.d.thongKeDiemDanhModal}))}}),Object(R.c)(f.a,{className:"form-selects",gutter:10,style:{marginTop:"7px"},children:[Object(R.b)(g.a,{sm:6,md:5,lg:5,children:V.getDayRender()}),Object(R.b)(g.a,{sm:4,md:5,lg:6,children:Object(R.b)(E.a,{label:"CT",form:I})}),Object(R.b)(g.a,{sm:14,md:14,lg:13,children:Object(R.c)(h.a,{layout:"inline",form:I,children:[Object(R.b)(h.a.Item,{name:Y.congNgay.id,children:Object(R.b)(v.a,{placeholder:"C\xf4ng ng\xe0y",min:0})}),Object(R.b)(x.MyButton,{onClick:function(){return te.apply(this,arguments)},children:"\u0110i\u1ec3m danh"})]})})]}),Object(R.b)("div",{className:"tabs-main",children:Object(R.b)("div",{className:"aside-main",children:Object(R.b)(N.a,{isEdit:ne,pagination:!0,constants:Y,actions:_,datas:ae,loading:Z,modalId:z,summary:function(e){return Object(R.b)(q,{pageData:e})},isSelection:!0})})}),Object(R.b)(B,{selectedTime:k}),Object(R.b)(X,{datas:ae})]})}}}]);