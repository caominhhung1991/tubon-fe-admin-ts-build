(this["webpackJsonptu-bon"]=this["webpackJsonptu-bon"]||[]).push([[9],{1041:function(e,t,n){"use strict";n.r(t);var a=n(40),i=n(0),o=n.n(i),c=n(56),u=n(6),r=n(716),l=n(719),d=n(8),s=n(729),h=n(725),b={getTableColumns:function(){return[Object(d.a)(Object(d.a)({},u.constants.stt),{},{fixed:!1}),s.a.maPhieuKho,Object(d.a)(Object(d.a)({},s.a.ngay),{},{defaultSortOrder:"descend",sortDirections:["descend"]}),s.a.tongTienPhieuKho,h.a.tenLoaiPhieuKho,s.a.loaiPhieuId,u.constants.capNhatRow]},getInputFields:function(){return[]},getExcelFields:function(){return[u.constants.active]}},f=n(717),O=n(414),m=n(59),v=n(360),j=n(496),p=n(65),g=n(61),C=n(34),L=n(777),y=n(778),M=n(25);var T=function(e){var t,n,a=e.selectedTime,i=e.dateTimePicker,o=Object(c.b)(),l=Object(c.c)((function(e){return e.account})).accountData,d=null===l||void 0===l||null===(t=l.paths)||void 0===t||null===(n=t.khoChaLua)||void 0===n?void 0:n.edit;return Object(M.c)(M.a,{children:[Object(M.b)(r.a,{header:Object(M.b)("div",{className:"font-weight-bold",children:Object(M.b)("span",{children:"Th\xf4ng Tin Trang "})}),body:Object(M.c)("div",{className:"form-input-aside",style:{padding:"5px"},children:[Object(M.b)("div",{children:(null===i||void 0===i?void 0:i.getMonthRender())||null}),Object(M.b)("div",{className:"mt-1",children:Object(M.b)(m.a,{icon:Object(M.b)(v.a,{}),onClick:function(){if(!d)return Object(C.l)();o(Object(u.openModal)({modalId:g.c.phieuKhoNhapChaLuaModal}))},block:!0,children:"Th\xeam phi\u1ebfu nh\u1eadp kho"})}),Object(M.b)("div",{className:"mt-1",children:Object(M.b)(m.a,{icon:Object(M.b)(j.a,{}),onClick:function(){if(!d)return Object(C.l)();o(Object(u.openModal)({modalId:g.c.phieuKhoXuatChaLuaModal}))},block:!0,children:"Th\xeam phi\u1ebfu xu\u1ea5t kho"})}),Object(M.b)("div",{})]}),footer:Object(M.b)("div",{children:Object(M.b)(m.a,{icon:Object(M.b)(p.a,{}),onClick:function(){o(Object(u.toggleAside)({tagPageId:g.c.phieuKhoChaLuaModal}))},children:"\u0110\xf3ng m\u1edf r\u1ed9ng"})})}),Object(M.b)(L.a,{onAfterAddFinish:function(){o(Object(O.b)(a))}}),Object(M.b)(y.a,{onAfterAddFinish:function(){o(Object(O.b)(a))}})]})},N=n(821),w=n(822),K="phieuKhoChaLuaModal";t.default=function(){var e,t,n=Object(c.b)(),i=Object(u.useDatePicker)(),d=Object(a.a)(i,2),h=d[0],m=d[1],v=Object(c.c)((function(e){return e.phieuKhoChaLua})),j=v.tabsData,p=v.phieuKhoChaLuaLoading,C=v.pageSize,L=v.phieuKhoChaLuas,y=Object(c.c)((function(e){var t;return null===(t=e.tagsPage)||void 0===t?void 0:t[K]})),I=Object(c.c)((function(e){return e.account})).accountData,x=null===I||void 0===I||null===(e=I.paths)||void 0===e||null===(t=e.phieuKhoChaLua)||void 0===t?void 0:t.edit;return o.a.useEffect((function(){n(Object(O.b)(h))}),[h]),Object(M.c)("div",{className:"phieuKhoChaLua-page",css:l.a,children:[Object(M.b)(r.b,{className:"tabs",options:j,activeKey:y?"aside":"",onTabClick:function(e){"aside"===e?n(Object(u.toggleAside)({tagPageId:K})):"taiExcel"===e&&n(Object(u.downloadExcel)({tableId:K,constants:b,fileSheet:"phieuKhoChaLuaSheet",fileName:"phieuKhoChaLuaName"}))}}),Object(M.c)("div",{className:"tabs-main",style:{marginTop:"10px"},children:[y&&Object(M.b)(T,{selectedTime:h,dateTimePicker:m}),Object(M.b)("div",{className:"aside-main",children:Object(M.b)(f.a,{isEdit:x,constants:b,datas:L,loading:p,modalId:K,rowClassName:function(e){return"xuat"===e.loaiPhieuId?"bg-gold-light":""},expandable:{expandedRowRender:function(e){return"xuat"===e.loaiPhieuId?Object(M.b)(N.a,{record:e}):"nhap"===e.loaiPhieuId?Object(M.b)(w.a,{record:e}):Object(M.b)("div",{children:e.id})},expandRowByClick:!1},isSelection:!1,pagination:!0,pageSize:C,onChange:function(e){n(Object(O.c)(e.pageSize))},onRow:function(e){return{onClick:function(){var t=Object(u.convertToMoment)(b.getInputFields(),e);x&&n(Object(u.openModal)({modalId:K,data:t}))}}},inputOptions:{onOpenEdit:function(e){var t=Object(u.convertToMoment)([s.a.ngay],e);"nhap"===(null===e||void 0===e?void 0:e.loaiPhieuId)?n(Object(u.openModal)({modalId:g.c.phieuKhoNhapChaLuaModal,data:t})):"xuat"===(null===e||void 0===e?void 0:e.loaiPhieuId)&&n(Object(u.openModal)({modalId:g.c.phieuKhoXuatChaLuaModal,data:t}))}}})})]})]})}},722:function(e,t,n){"use strict";n(0);var a=n(477),i=n(25),o=a.a.Summary,c=o.Row,u=o.Cell;t.a=function(e){var t,n=e.columns,a=e.dataSource;return Object(i.b)(c,{children:null===n||void 0===n||null===(t=n.map)||void 0===t?void 0:t.call(n,(function(e,t){var n=null===e||void 0===e?void 0:e.id,o=(null===e||void 0===e?void 0:e.colSpan)||0,c=(null===e||void 0===e?void 0:e.cellClassName)||"",r=(null===e||void 0===e?void 0:e.valueStyle)||{},l=(null===e||void 0===e?void 0:e.valueClassName)||"",d=null===e||void 0===e?void 0:e.render,s=(null===a||void 0===a?void 0:a[t])||{},h=(null===s||void 0===s?void 0:s[n])||"";return d&&(h=d(h,s,t)),Object(i.b)(u,{index:t,colSpan:o,className:c,children:Object(i.b)("div",{style:r,className:l,children:h})},n)}))})}},725:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return u}));var a=n(8),i={nguyenLieu:{id:"nguyenLieu",tenLoaiPhieuKho:"Nguy\xean li\u1ec7u",active:!0},ccdc:{id:"ccdc",tenLoaiPhieuKho:"CCDC",active:!0},thanhPham:{id:"thanhPham",tenLoaiPhieuKho:"Th\xe0nh ph\u1ea7m",active:!0}},o={sanXuat:{id:"sanXuat",tenLoaiPhieuKho:"S\u1ea3n xu\u1ea5t",active:!0},ban:{id:"ban",tenLoaiPhieuKho:"B\xe1n",active:!0}},c=Object(a.a)(Object(a.a)({},i),o),u={tenLoaiPhieuKho:{id:"tenLoaiPhieuKho",name:"T\xean lo\u1ea1i \u0110H",className:"text-small",width:110,isSearch:!0},getTableColumns:function(){return[]},getInputFields:function(){return[]}}},726:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(6),i={soLuong:{id:"soLuong",name:"S\u1ed1 l\u01b0\u1ee3ng",width:100,className:"text-small font-weight-bold",align:"right",sorter:Object(a.sortByNumber)("soLuong"),render:Object(a.renderNumberInput)("SoLuong")},donGia:{id:"donGia",name:"\u0110\u01a1n gi\xe1",width:100,className:"text-small font-weight-bold",align:"right",sorter:Object(a.sortByNumber)("donGia"),render:a.numberRender},thanhTien:{id:"thanhTien",name:"Th\xe0nh ti\u1ec1n",width:100,className:"text-small font-weight-bold",align:"right",isSearch:!0,sorter:Object(a.sortByNumber)("thanhTien"),render:a.numberRender}}},729:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(6),i={maPhieuKho:{id:"maPhieuKho",name:"M\xe3 phi\u1ebfu",width:100,className:"text-small",align:"center",isSearch:!0,sorter:Object(a.sortByText)("maPhieuKho"),form:{type:"input"}},ngay:{id:"ngay",name:"Ng\xe0y",width:100,className:"text-small font-weight-bold",align:"center",isSearch:!0,sorter:Object(a.sortByText)("ngay"),form:{type:"date-picker",rules:[{required:!0,message:"Ch\u01b0a nh\u1eadp"}]}},tongTienPhieuKho:{id:"tongTienPhieuKho",name:"T\u1ed5ng ti\u1ec1n",width:100,className:"text-small font-weight-bold",align:"right",render:a.numberRender},loaiPhieuId:{id:"loaiPhieuId",name:"Lo\u1ea1i phi\u1ebfu",width:90,className:"text-small font-weight-bold",isSearch:!0,align:"center"},getTableColumns:function(){return[]},getInputFields:function(){return[]}}},735:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n(0);var a=n(6),i=n(227),o=n(25);function c(e){var t=e.name,n=e.label,c=e.rules,u=e.disabled;return Object(o.b)(a.MyFormItem,{name:t,label:n,rules:c,children:Object(o.b)(i.a,{disabled:u,style:{width:"100%"}})})}},736:function(e,t,n){"use strict";function a(){return window.confirm("D\u1eef li\u1ec7u d\xe3 thay \u0111\u1ed5i, b\u1ea1n c\xf3 mu\u1ed1n tho\xe1t?")}function i(e){return window.confirm(e||"X\xe1c nh\u1eadn?")}n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}))},740:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n(0);var a=n(6),i=n(480),o=n(25);function c(e){var t=e.name,n=e.label,c=e.rules,u=e.disabled,r=e.onPressEnter;return Object(o.b)(a.MyFormItem,{name:t,label:n,rules:c,children:Object(o.b)(i.a,{disabled:u,style:{width:"100%"},onPressEnter:r})})}},743:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return d}));var a=n(8),i=n(6),o=n(368),c=n(124),u=n(159),r=n(726),l={getTableColumns:function(){return[i.constants.stt,o.a.tenNguyenVatLieuChaLua,Object(a.a)(Object(a.a)({},u.a.tenNhomMatHang),{},{className:"text-small"}),r.a.soLuong,Object(a.a)(Object(a.a)({},c.a.tenDonViTinh),{},{align:"center",className:"text-small"}),r.a.donGia,r.a.thanhTien,i.constants.editRow]},getInputFields:function(){return[i.constants.id]},getExcelFields:function(){return[i.constants.active]}},d={getTableColumns:function(){return[i.constants.stt,o.a.tenNguyenVatLieuChaLua,Object(a.a)(Object(a.a)({},u.a.tenNhomMatHang),{},{className:"text-small"}),r.a.soLuong,Object(a.a)(Object(a.a)({},c.a.tenDonViTinh),{},{className:"text-small"}),r.a.donGia,r.a.thanhTien]}}},744:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return d}));var a=n(8),i=n(6),o=n(368),c=n(726),u=n(124),r=n(159),l={getTableColumns:function(){return[Object(a.a)(Object(a.a)({},i.constants.stt),{},{fixed:!1}),o.a.tenNguyenVatLieuChaLua,r.a.tenNhomMatHang,c.a.soLuong,u.a.tenDonViTinh,c.a.donGia,c.a.thanhTien,i.constants.deleteRowButton]},getInputFields:function(){return[]},getExcelFields:function(){return[i.constants.stt,i.constants.active]}},d={getTableColumns:function(){return[Object(a.a)(Object(a.a)({},i.constants.stt),{},{fixed:!1}),o.a.tenNguyenVatLieuChaLua,c.a.soLuong,c.a.donGia,c.a.thanhTien]}}},750:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(8),i=n(725),o=function(e){return function(){var t,n;if(!(null===e||void 0===e?void 0:e.loaiPhieuKhoId))return Object(a.a)(Object(a.a)({},e),{},{tenLoaiPhieuKho:""});if((null===e||void 0===e||null===(t=e.loaiPhieuKhoId)||void 0===t?void 0:t.length)&&"string"!==typeof e.loaiPhieuKhoId)n=e.loaiPhieuKhoId.map((function(e){var t=(null===i.b||void 0===i.b?void 0:i.b[e])||{};return"".concat(t.tenLoaiPhieuKho||"")})).join(", ");else{var o=(null===i.b||void 0===i.b?void 0:i.b[e.loaiPhieuKhoId])||{};n="".concat(o.tenLoaiPhieuKho||"")}return Object(a.a)(Object(a.a)({},e),{},{tenLoaiPhieuKho:n})}}},763:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));n(0);var a=n(6),i=n(480),o=n(34),c=n(25);function u(e){var t=e.name,n=e.label,u=e.rules,r=e.onPressEnter;return Object(c.b)(a.MyFormItem,{name:t,label:n,rules:u,children:Object(c.b)(i.a,{style:{width:"100%"},onPressEnter:r,formatter:o.a.formatter,parser:o.a.parser})})}},772:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(8),i=n(6),o=n(729),c=n(725),u={ngay:{id:"ngay",name:"Ng\xe0y",width:100,className:"text-small",form:{type:"date-picker",rules:[{required:!0,message:"Ch\u01b0a nh\u1eadp"}]}},getTableColumns:function(){return[Object(a.a)(Object(a.a)({},i.constants.stt),{},{fixed:!1}),o.a.maPhieuKho,Object(a.a)(Object(a.a)({},o.a.ngay),{},{defaultSortOrder:"ascend",sortDirections:["ascend"]}),o.a.tongTienPhieuKho,c.a.tenLoaiPhieuKho,i.constants.capNhatRow,i.constants.deleteRowButton,i.constants.createdAt,i.constants.createdBy,i.constants.updatedAt,i.constants.updatedBy]},getInputFields:function(){return[i.constants.id,this.ngay]},getExcelFields:function(){return[this.ngay,i.constants.active]}}},777:function(e,t,n){"use strict";var a=n(5),i=n.n(a),o=n(9),c=n(40),u=n(0),r=n.n(u),l=n(6),d=n(478),s=n(56),h=n(772),b=n(61),f=n(34),O=n(13),m=n(8),v=n(59),j=n(55),p=n(719),g=n(743),C=n(717),L=n(376),y=n(762),M=n(740),T=n(377),N=n(752),w=n(763),K=n(727),I=n(726),x=n(25),P=b.c.phieuKhoNhapChaLuaChiTietModal,S="nguyenVatLieuChaLuaId";var F=function(e){var t=Object(s.b)(),n=d.a.useForm(),a=Object(c.a)(n,1)[0],u=Object(s.c)((function(e){return e.form})),h=u.modal,b=u.datas,f=r.a.useMemo((function(){var e;return!!(null===h||void 0===h||null===(e=h[P])||void 0===e?void 0:e.open)}),[h[P]]),O=null===b||void 0===b?void 0:b[P];function m(){return v.apply(this,arguments)}function v(){return(v=Object(o.a)(i.a.mark((function e(){var n,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.validateFields();case 2:n=e.sent,o=Object(l.convertMomentToString)(g.a.getInputFields(),n),o=t(Object(T.c)(o)),t(Object(L.d)({convertedData:o,nameOfId:"nguyenVatLieuChaLuaId"})),a.resetFields(),Object(N.a)(S);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.useEffect((function(){f||a.resetFields()}),[f]),r.a.useEffect((function(){a.setFieldsValue(O)}),[O]),Object(x.b)(l.MyModal,{title:Object(x.b)("div",{children:"Nguy\xean v\u1eadt li\u1ec7u, s\u1ed1 l\u01b0\u1ee3ng"}),visible:f,onClose:function(){t(Object(l.closeModal)({modalId:P}))},onOkModal:m,width:900,modalId:P,datas:b,children:Object(x.c)(l.MyForm,{form:a,labelCol:{span:8},wrapperCol:{span:16},children:[Object(x.b)(K.a,{name:"id",label:"ID",disabled:!0}),Object(x.b)(y.a,{rules:[{required:!0}],isAddNew:!0}),Object(x.b)(M.a,{name:I.a.soLuong.id,label:I.a.soLuong.name,onPressEnter:m}),Object(x.b)(w.a,{name:I.a.donGia.id,label:I.a.donGia.name,onPressEnter:m})]})})},k=n(722),V=n(368),D=n(159),E=n(124),A=b.c.phieuDiChoTuBonModal;var R=function(e){var t=e.pageData,n=Object(s.c)((function(e){return e.hideColumns})),a=null===n||void 0===n?void 0:n[A||""],i=r.a.useMemo((function(){var e=[l.constants.stt,V.a.tenNguyenVatLieuChaLua,D.a.tenNhomMatHang,I.a.soLuong,E.a.tenDonViTinh,I.a.donGia],t=[I.a.thanhTien],n=[l.constants.editRow];return[{id:0,colSpan:0+e.reduce((function(e,t){var n=t.id;return e+((null===a||void 0===a?void 0:a[n])?0:1)}),0),cellClassName:"text-center font-weight-bold text-danger"},{id:1,colSpan:t.reduce((function(e,t){var n=t.id;return e+((null===a||void 0===a?void 0:a[n])?0:1)}),0),cellClassName:"text-right font-weight-bold text-small text-danger",render:function(e){return Object(l.formatNumber)(e)}},{id:2,colSpan:n.reduce((function(e,t){var n=t.id;return e+((null===a||void 0===a?void 0:a[n])?0:1)}),0)}]}),[a]),o=r.a.useMemo((function(){return t.reduce((function(e,t){var n=e.thanhTien+(t.thanhTien||0);return Object(m.a)(Object(m.a)({},e),{},{thanhTien:n})}),{tong:"T\u1ed5ng ti\u1ec1n",thanhTien:0})}),[t]),c=r.a.useMemo((function(){return["tong","thanhTien"].map((function(e,t){return Object(O.a)({},t,o[e])}))}),[o]);return Object(x.b)(k.a,{columns:i,dataSource:c})},X=b.c.phieuKhoNhapChaLuaChiTietModal;var B=function(e){var t=Object(s.b)(),n=Object(s.c)((function(e){return e.phieuKhoNhapChaLuaChiTiet})).phieuKhoNhapChaLuaChiTiets,a=Object(s.c)((function(e){return e.nguyenVatLieuChaLua})).nguyenVatLieuChaLuas,i=r.a.useMemo((function(){return Object.values(n||{}).reduce((function(e,t){var n=(null===a||void 0===a?void 0:a[t.id])||{},i=t.soLuong,o=void 0===i?0:i,c=t.donGia,u=void 0===c?0:c,r=Math.round(o*u);return Object(m.a)(Object(m.a)({},e),{},Object(O.a)({},t.id,Object(m.a)(Object(m.a)(Object(m.a)({},n),t),{},{thanhTien:r})))}),{})}),[n,a]);return Object(x.c)("div",{className:"phieuKhoNhapChaLuaChiTiet-page",css:p.a,children:[Object(x.b)("div",{style:{marginBottom:"7px"},children:Object(x.b)(v.a,{icon:Object(x.b)(j.a,{}),type:"primary",onClick:function(){t(Object(l.openModal)({modalId:X}))},children:"Th\xeam m\u1eb7t h\xe0ng, s\u1ed1 l\u01b0\u1ee3ng"})}),Object(x.b)(C.a,{isEdit:!0,constants:g.a,datas:i,modalId:X,isSelection:!1,pagination:!1,inputOptions:{onDeleteItem:function(e){t(Object(L.b)(e))}},summary:function(e){return Object(x.b)(R,{pageData:e})}}),Object(x.b)(F,{})]})},G=n(735),q=n(31),H=n.n(q),z=n(725);var J=function(e){var t=e.form,n=e.name,a=e.mode,i=e.label,o=e.labelCol,c=e.wrapperCol,u=e.rules,d=e.onAfterSelect,s=e.disabled,h=r.a.useMemo((function(){return Object.values(z.c).filter((function(e){return e.active})).map((function(e){var t="".concat(e.tenLoaiPhieuKho);return{value:e.id,label:t}}))}),[z.c]),b=Object(x.b)(l.MyFormItem,{label:i||"Lo\u1ea1i phi\u1ebfu nh\u1eadp",type:"select",name:n||"loaiPhieuKhoId",innerProps:{mode:a,showSearch:!0,allowClear:!0,filterOption:l.onSelectSearch,onChange:function(e){null===d||void 0===d||d(e)},disabled:s},options:h,rules:u||[]});return t?Object(x.b)(x.a,{children:Object(x.b)(l.MyForm,{form:t,labelCol:o||{span:8},wrapperCol:c||{span:16},children:b})}):b},Q=n(750),U=n(393),W=n(729),Y=b.c.phieuKhoNhapChaLuaModal;t.a=function(e){var t,n,a=e.onAfterAddFinish,u=Object(s.b)(),b=d.a.useForm(),O=Object(c.a)(b,1)[0],m=Object(s.c)((function(e){return e.form})),v=m.modal,j=m.datas,p=null===j||void 0===j?void 0:j[Y],g=Object(s.c)((function(e){return e.account})).accountData,C=null===g||void 0===g||null===(t=g.paths)||void 0===t||null===(n=t.phieuKhoNhapChaLua)||void 0===n?void 0:n.edit,y=r.a.useMemo((function(){var e;return!!(null===v||void 0===v||null===(e=v[Y])||void 0===e?void 0:e.open)}),[v[Y]]);function M(){return(M=Object(o.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C){e.next=2;break}return e.abrupt("return",Object(f.l)());case 2:if(window.confirm("X\xe1c nh\u1eadn c\u1eadp nh\u1eadt?")){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,O.validateFields();case 6:t=e.sent,n=Object(l.convertMomentToString)([h.a.ngay],t),n=u(Object(Q.a)(n)),n=u(Object(L.c)(n)),u(Object(U.e)(n)),u(Object(l.closeModal)({modalId:Y})),null===a||void 0===a||a(n);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.useEffect((function(){y||(O.resetFields(),u(Object(L.e)({})))}),[y]),r.a.useEffect((function(){p?(u(Object(L.e)((null===p||void 0===p?void 0:p.phieuKhoNhapChaLuaChiTiets)||{})),O.setFieldsValue(p)):O.setFieldsValue({ngay:H()(),loaiPhieuKhoId:z.c.nguyenLieu.id})}),[p]),Object(x.c)(l.MyModal,{title:Object(x.b)("div",{children:"Phi\u1ebfu Nh\u1eadp Kho Ch\u1ea3 L\u1ee5a"}),visible:y,onClose:function(){u(Object(l.closeModal)({modalId:Y}))},onOkModal:function(){return M.apply(this,arguments)},width:1e3,modalId:Y,datas:j,children:[Object(x.c)(l.MyForm,{form:O,labelCol:{span:6},wrapperCol:{span:18},children:[Object(x.b)(K.a,{name:l.constants.id.id,label:l.constants.id.name,disabled:!0}),Object(x.b)(K.a,{name:W.a.maPhieuKho.id,label:W.a.maPhieuKho.name}),Object(x.b)(G.a,{name:"ngay",label:"Ng\xe0y",rules:[{required:!0}]}),Object(x.b)(J,{rules:[{required:!0}]})]}),Object(x.b)(B,{})]})}},778:function(e,t,n){"use strict";var a=n(5),i=n.n(a),o=n(9),c=n(40),u=n(0),r=n.n(u),l=n(6),d=n(478),s=n(56),h=n(61),b=n(392),f=n(34),O=n(727),m=n(729),v=n(735),j=n(725),p=n(25);var g=function(e){var t=e.form,n=e.name,a=e.mode,i=e.label,o=e.labelCol,c=e.wrapperCol,u=e.rules,d=e.onAfterSelect,s=e.disabled,h=r.a.useMemo((function(){return Object.values(j.d).filter((function(e){return e.active})).map((function(e){var t="".concat(e.tenLoaiPhieuKho);return{value:e.id,label:t}}))}),[j.d]),b=Object(p.b)(l.MyFormItem,{label:i||"Lo\u1ea1i phi\u1ebfu xu\u1ea5t",type:"select",name:n||"loaiPhieuKhoId",innerProps:{mode:a,showSearch:!0,allowClear:!0,filterOption:l.onSelectSearch,onChange:function(e){null===d||void 0===d||d(e)},disabled:s},options:h,rules:u||[]});return t?Object(p.b)(p.a,{children:Object(p.b)(l.MyForm,{form:t,labelCol:o||{span:8},wrapperCol:c||{span:16},children:b})}):b},C=n(13),L=n(8),y=n(59),M=n(55),T=n(193),N=n(719),w=n(744),K=n(717),I=n(242),x=n(762),P=n(740),S=n(726),F=n(752),k=n(141),V=h.c.phieuKhoXuatChaLuaChiTietModal;var D=function(e){var t=Object(s.b)(),n=d.a.useForm(),a=Object(c.a)(n,1)[0],u=Object(s.c)((function(e){return e.form})),h=u.modal,b=u.datas,f=r.a.useMemo((function(){var e;return!!(null===h||void 0===h||null===(e=h[V])||void 0===e?void 0:e.open)}),[h[V]]),m=null===b||void 0===b?void 0:b[V];function v(){return j.apply(this,arguments)}function j(){return(j=Object(o.a)(i.a.mark((function e(){var n,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.validateFields();case 2:n=e.sent,o=Object(l.convertMomentToString)(w.a.getInputFields(),n),o=t(Object(k.c)(o)),t(Object(I.e)({convertedData:o,nameOfId:"nguyenVatLieuChaLuaId"})),a.resetFields(),Object(F.a)("nguyenVatLieuChaLuaId");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.useEffect((function(){f||a.resetFields()}),[f]),r.a.useEffect((function(){a.setFieldsValue(m)}),[m]),Object(p.b)(l.MyModal,{title:Object(p.b)("div",{children:"Nguy\xean Li\u1ec7u V\xe0 S\u1ed1 L\u01b0\u1ee3ng"}),visible:f,onClose:function(){t(Object(l.closeModal)({modalId:V}))},onOkModal:v,width:900,modalId:V,datas:b,children:Object(p.c)(l.MyForm,{form:a,labelCol:{span:6},wrapperCol:{span:18},children:[Object(p.b)(O.a,{name:"id",label:"id",disabled:!0}),Object(p.b)(x.a,{rules:[{required:!0}],isAddNew:!0,onAfterSelect:function(e,t){a.setFieldsValue(t)},onAfterAddFinish:function(e,t){a.setFieldsValue(t)}}),Object(p.b)(P.a,{name:S.a.soLuong.id,label:S.a.soLuong.name,onPressEnter:v})]})})},E=n(736),A=n(722),R=n(368),X=n(159),B=n(124),G=h.c.phieuDiChoTuBonModal;var q=function(e){var t=e.pageData,n=Object(s.c)((function(e){return e.hideColumns})),a=null===n||void 0===n?void 0:n[G||""],i=r.a.useMemo((function(){var e=[l.constants.stt,R.a.tenNguyenVatLieuChaLua,X.a.tenNhomMatHang,S.a.soLuong,B.a.tenDonViTinh,S.a.donGia],t=[S.a.thanhTien],n=[l.constants.editRow];return[{id:0,colSpan:1+e.reduce((function(e,t){var n=t.id;return e+((null===a||void 0===a?void 0:a[n])?0:1)}),0),cellClassName:"text-center font-weight-bold text-danger"},{id:1,colSpan:t.reduce((function(e,t){var n=t.id;return e+((null===a||void 0===a?void 0:a[n])?0:1)}),0),cellClassName:"text-right font-weight-bold text-small text-danger",render:function(e){return Object(l.formatNumber)(e)}},{id:2,colSpan:n.reduce((function(e,t){var n=t.id;return e+((null===a||void 0===a?void 0:a[n])?0:1)}),0)}]}),[a]),o=r.a.useMemo((function(){return t.reduce((function(e,t){var n=e.thanhTien+(t.thanhTien||0);return Object(L.a)(Object(L.a)({},e),{},{thanhTien:n})}),{tong:"T\u1ed5ng ti\u1ec1n",thanhTien:0})}),[t]),c=r.a.useMemo((function(){return["tong","thanhTien"].map((function(e,t){return Object(C.a)({},t,o[e])}))}),[o]);return Object(p.b)(A.a,{columns:i,dataSource:c})},H=h.c.phieuKhoXuatChaLuaChiTietModal;var z=function(e){var t=Object(s.b)(),n=Object(s.c)((function(e){return e.nguyenVatLieuChaLua})).nguyenVatLieuChaLuas,a=Object(s.c)((function(e){return e.phieuKhoXuatChaLuaChiTiet})).phieuKhoXuatChaLuaChiTiets,i=Object(s.c)((function(e){return e.table})).selectedRows,o=r.a.useMemo((function(){return Object(l.onCallbackDataSource)("tenNguyenVatLieuChaLua",Object.values(a||{}))}),[a]),c=r.a.useMemo((function(){return Object.values(a||{}).reduce((function(e,t){var a=(null===n||void 0===n?void 0:n[t.id])||{},i=t.soLuong,o=void 0===i?0:i,c=t.donGia,u=void 0===c?0:c,r=Math.round(o*u);return Object(L.a)(Object(L.a)({},e),{},Object(C.a)({},t.id,Object(L.a)(Object(L.a)(Object(L.a)({},a),t),{},{thanhTien:r})))}),{})}),[a,n]);return Object(p.c)("div",{className:"phieuKhoXuatChaLuaChiTiet-page",css:N.a,children:[Object(p.c)("div",{style:{marginBottom:"7px"},children:[Object(p.b)(y.a,{icon:Object(p.b)(M.a,{}),type:"primary",onClick:function(){t(Object(l.openModal)({modalId:H}))},children:"Th\xeam nguy\xean li\u1ec7u, s\u1ed1 l\u01b0\u1ee3ng"}),Object(p.b)(y.a,{icon:Object(p.b)(T.a,{}),type:"dashed",danger:!0,onClick:function(){var e=(null===i||void 0===i?void 0:i[H])||[];if(0===e.length)return Object(f.h)("Ch\u01b0a ch\u1ecdn m\u1eb7t h\xe0ng!");Object(E.b)("X\xe1c nh\u1eadn x\xf3a m\u1eb7t h\xe0ng \u0111\xe3 ch\u1ecdn?")&&(t(Object(I.c)({phieuKhoXuatChaLuaChiTietDataArray:e})),t(Object(l.onChangeSelectedRowKeys)({tableId:H,selectedRowKeys:[],selectedRows:[]})))},children:"X\xf3a \u0111\xe3 ch\u1ecdn"})]}),Object(p.b)(K.a,{isEdit:!0,constants:w.a,onCallbackDataSource:function(e){return Object(l.onCallbackDataSource)("tenNguyenVatLieuChaLua",e)},datas:c,modalId:H,isSelection:!0,pagination:!1,inputOptions:{onDelete:function(e){t(Object(I.b)(e))},openEditSoLuong:function(e){t(Object(l.openModal)({modalId:h.c.openEditSoLuong,data:e}))}},summary:function(e){return Object(p.b)(q,{pageData:e})}}),Object(p.b)(l.SoLuongInputModal,{modalId:h.c.openEditSoLuong,soLuongName:"soLuong",titleId:"tenNguyenVatLieuChaLua",dataSource:o,onOk:function(e){t(Object(I.e)({convertedData:e}))}}),Object(p.b)(D,{})]})},J=n(750),Q=h.c.phieuKhoXuatChaLuaModal;t.a=function(e){var t,n,a=e.onAfterAddFinish,u=d.a.useForm(),h=Object(c.a)(u,1)[0],j=Object(s.b)(),C=Object(s.c)((function(e){return e.form})),L=C.modal,y=C.datas,M=Object(s.c)((function(e){return e.account})).accountData,T=null===M||void 0===M||null===(t=M.paths)||void 0===t||null===(n=t.phieuKhoXuatChaLua)||void 0===n?void 0:n.edit,N=r.a.useMemo((function(){var e;return!!(null===L||void 0===L||null===(e=L[Q])||void 0===e?void 0:e.open)}),[L[Q]]),w=null===y||void 0===y?void 0:y[Q];function K(){return(K=Object(o.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T){e.next=2;break}return e.abrupt("return",Object(f.l)());case 2:if(Object(E.b)("X\xe1c nh\u1eadn th\xeam phi\u1ebfu xu\u1ea5t?")){e.next=4;break}return e.abrupt("return",null);case 4:return e.next=6,h.validateFields();case 6:t=e.sent,n=Object(l.convertMomentToString)([m.a.ngay],t),n=j(Object(J.a)(n)),n=j(Object(I.d)(n)),j(Object(b.e)(n)),j(Object(l.closeModal)({modalId:Q})),null===a||void 0===a||a(n);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.useEffect((function(){var e=Object(l.convertToMoment)([m.a.ngay],w);h.setFieldsValue(e),j(Object(I.f)((null===e||void 0===e?void 0:e.phieuKhoXuatChaLuaChiTiets)||{}))}),[w]),r.a.useEffect((function(){N||(h.resetFields(),j(Object(I.f)({})))}),[N]),Object(p.c)(l.MyModal,{title:Object(p.b)("div",{children:"Phi\u1ebfu Kho Xu\u1ea5t Ch\u1ea3 L\u1ee5a"}),visible:N,onClose:function(){j(Object(l.closeModal)({modalId:Q}))},onOkModal:function(){return K.apply(this,arguments)},width:999,modalId:Q,datas:y,children:[Object(p.c)(l.MyForm,{form:h,labelCol:{span:6},wrapperCol:{span:18},children:[Object(p.b)(O.a,{name:l.constants.id.id,label:l.constants.id.name,disabled:!0}),Object(p.b)(O.a,{name:m.a.maPhieuKho.id,label:m.a.maPhieuKho.name}),Object(p.b)(v.a,{name:"ngay",label:"Ng\xe0y",rules:[{required:!0}]}),Object(p.b)(g,{rules:[{required:!0}]})]}),Object(p.b)(z,{})]})}},821:function(e,t,n){"use strict";var a=n(13),i=n(8),o=n(0),c=n.n(o),u=n(744),r=n(717),l=n(56),d=n(25);t.a=function(e){var t=e.record,n=Object(l.c)((function(e){return e.nguyenVatLieuChaLua})).nguyenVatLieuChaLuas,o=c.a.useMemo((function(){return(null===t||void 0===t?void 0:t.phieuKhoXuatChaLuaChiTiets)||{}}),[t]),s=c.a.useMemo((function(){return Object.values(o||{}).reduce((function(e,t){var o=(null===n||void 0===n?void 0:n[t.id])||{},c=t.soLuong,u=void 0===c?0:c,r=t.donGia,l=void 0===r?0:r,d=Math.round(u*l);return Object(i.a)(Object(i.a)({},e),{},Object(a.a)({},t.id,Object(i.a)(Object(i.a)(Object(i.a)({},o),t),{},{thanhTien:d})))}),{})}),[o,n]);return Object(d.b)(r.a,{constants:u.b,datas:s})}},822:function(e,t,n){"use strict";var a=n(13),i=n(8),o=n(0),c=n.n(o),u=n(743),r=n(717),l=n(56),d=n(25);t.a=function(e){var t=e.record,n=Object(l.c)((function(e){return e.nguyenVatLieuChaLua})).nguyenVatLieuChaLuas,o=c.a.useMemo((function(){return(null===t||void 0===t?void 0:t.phieuKhoNhapChaLuaChiTiets)||{}}),[t]),s=c.a.useMemo((function(){return Object.values(o||{}).reduce((function(e,t){var o=(null===n||void 0===n?void 0:n[t.id])||{},c=t.soLuong,u=void 0===c?0:c,r=t.donGia,l=void 0===r?0:r,d=Math.round(u*l);return Object(i.a)(Object(i.a)({},e),{},Object(a.a)({},t.id,Object(i.a)(Object(i.a)(Object(i.a)({},o),t),{},{thanhTien:d})))}),{})}),[o,n]);return Object(d.b)(r.a,{constants:u.b,datas:s})}}}]);