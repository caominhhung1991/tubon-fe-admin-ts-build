(this["webpackJsonptu-bon"]=this["webpackJsonptu-bon"]||[]).push([[25],{733:function(n,t,a){},744:function(n,t,a){"use strict";a.d(t,"a",(function(){return d}));var e=a(12),c=a(29),i=a(9),o=a(316),r={nhomGiaBanMatHangId:{id:"nhomGiaBanMatHangId",name:"nhomGiaBanMatHangId"},tenNhomGiaBanMatHang:{id:"tenNhomGiaBanMatHang",name:"Nh\xf3m gi\xe1 b\xe1n",width:100,className:"text-small font-weight-bold"},getTableColumns:function(){return[c.a.stt,c.a.active,c.a.editRow]},getInputFields:function(){return[]}},d={tenKhachHang:{id:"tenKhachHang",name:"T\xean KH",className:"text-small font-weight-bold",width:100,align:"",isSearch:!0,form:{required:!0,type:"input"}},tenDayDu:{id:"tenDayDu",name:"T\xean \u0111\u1ea7y \u0111\u1ee7",className:"text-small",width:110,align:"",isSearch:!0,sorter:Object(i.sortByText)("tenDayDu"),form:{type:"input"}},diaChi:{id:"diaChi",name:"\u0110\u1ecba ch\u1ec9",className:"text-small",width:180,isSearch:!0,form:{type:"text-area"}},getTableColumns:function(){return[c.a.stt,this.tenKhachHang,r.tenNhomGiaBanMatHang,Object(e.a)(Object(e.a)({},o.a.tenNhomMatHang),{},{width:150}),this.diaChi,c.a.active,c.a.editRow]},getInputFields:function(n){return[this.tenKhachHang,this.diaChi]},getExcelFields:function(){return[c.a.stt,this.tenKhachHang,r.tenNhomGiaBanMatHang,o.a.nhomMatHangId,o.a.tenNhomMatHang,this.diaChi]}}},765:function(n,t,a){"use strict";var e=a(5),c=a.n(e),i=a(12),o=a(8),r=a(42),d=a(0),u=a.n(d),l=a(9),b=a(315),s=a(488),h=a(458),g=a(60),O=a(29),f=a(57),j=a(227),m=a(17),v=O.d.openEditGiaBanMatHang;t.a=function(n){var t=n.dataSource,a=n.onOk,e=Object(f.c)((function(n){return n.form})),O=e.modal,p=e.datas,H=null===p||void 0===p?void 0:p[v],M=Object(f.b)(),y=Object(d.useRef)(null),D=Object(b.useForm)(),I=Object(r.a)(D,1)[0];u.a.useEffect((function(){return I.setFieldsValue(H),(null===y||void 0===y?void 0:y.current)&&y.current.focus(),function(){I.resetFields()}}),[H]);var N=u.a.useMemo((function(){var n;return!!(null===O||void 0===O||null===(n=O[v])||void 0===n?void 0:n.open)}),[O[v]]);function T(){return w.apply(this,arguments)}function w(){return(w=Object(o.a)(c.a.mark((function n(){var e,o,r;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,I.validateFields();case 2:e=n.sent,o=e.giaBanMatHang,null===a||void 0===a||a(Object(i.a)(Object(i.a)({},H),{},{giaBanMatHang:o})),(r=null===t||void 0===t?void 0:t[(null===H||void 0===H?void 0:H.index)+1])?(I.resetFields(),M(Object(j.c)({modalId:v,data:r}))):M(Object(j.a)({modalId:v}));case 7:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return Object(m.b)(l.MyModal,{title:Object(m.c)("div",{children:["Gi\xe1 B\xe1n M\u1eb7t H\xe0ng - ",(null===H||void 0===H?void 0:H.tenMatHang)||""]}),visible:N,width:700,modalId:v,datas:p,onOkModal:T,onClose:function(){return M(Object(j.a)({modalId:v}))},children:Object(m.c)(l.MyForm,{form:I,labelCol:{span:8},wrapperCol:{span:16},children:[Object(m.b)(l.MyFormItem,{name:"giaBanMatHang",label:"Gi\xe1 b\xe1n:",children:Object(m.b)(h.a,{ref:y,min:0,style:{width:"100%"},onPressEnter:T,autoFocus:!0})}),Object(m.b)(l.MyFormItem,{label:"Ch\u1ee9c n\u0103ng",children:Object(m.b)(g.a,{type:"primary",onClick:T,icon:Object(m.b)(s.a,{}),children:"L\u01b0u"})})]})})}},972:function(n,t,a){"use strict";a.r(t);var e=a(5),c=a.n(e),i=a(8),o=a(42),r=a(0),d=a.n(r),u=a(57),l=a(704),b=a(46),s=a(29),h=a(705),g=a(12),O=a(715),f=a(744),j={getTableColumns:function(){return[Object(g.a)(Object(g.a)({},s.a.stt),{},{fixed:!1}),O.a.donHangId,Object(g.a)(Object(g.a)({},f.a.tenKhachHang),{},{width:200}),O.a.ngayGiao,O.a.tongTienDonHang,O.a.ngayDat,s.f.tenTrangThai,s.a.editRow]},getInputFields:function(){return[]},getExcelFields:function(){return[s.a.active]}},m=a(703),v=a(11),p=a(20),H=a(21),M=a(36),y=a.n(M),D=a(9),I=function(n){Object(p.a)(a,n);var t=Object(H.a)(a);function a(){var n;Object(v.a)(this,a);for(var e=arguments.length,c=new Array(e),i=0;i<e;i++)c[i]=arguments[i];return(n=t.call.apply(t,[this].concat(c))).pathDatas=["quanLyHangXuat","datas"],n.pathDeleted=["quanLyHangXuat","deleted"],n.initData={inputText:"",inputNumber:0,time:y()()},n}return a}(D.AppClass),N=a(702),T=a(395),w=a(350),x=a(351),C=a(60),S=a(66),k=a(17);function F(n){var t,a=n.dateTimePicker,e=Object(u.b)();return Object(k.b)(k.a,{children:Object(k.b)(l.a,{header:Object(k.b)("div",{className:"font-weight-bold",children:Object(k.b)("span",{children:"Th\xf4ng Tin Trang "})}),body:Object(k.b)("div",{className:"form-input-aside",style:{padding:"5px"},children:Object(k.b)("div",{children:(null===a||void 0===a||null===(t=a.getMonthRender)||void 0===t?void 0:t.call(a))||null})}),footer:Object(k.b)("div",{children:Object(k.b)(C.a,{icon:Object(k.b)(S.a,{}),onClick:function(){e(Object(x.b)({tagPageId:s.d.danhSachDHNModal}))},children:"\u0110\xf3ng m\u1edf r\u1ed9ng"})})})})}var B=a(41),E=a(710),G=a(15),X="/quan-ly-hang-xuat/tao-don-hang-xuat",L=a(13),R=a(711),K=a(729),P=s.d.danhSachDHNModal,q=Object(r.memo)((function(n){var t=n.pageData,a=Object(u.c)((function(n){return n.hideColumns})),e=null===a||void 0===a?void 0:a[P||""],c=d.a.useMemo((function(){var n=[s.a.stt,O.a.donHangId,O.a.ngayGiao,K.b.tenNhaCungCap],t=[O.a.tongTienDonHang],a=[O.a.ngayDat,s.f.tenTrangThai,s.a.capNhatRow];return[{id:0,colSpan:2+n.reduce((function(n,t){var a=t.id;return n+((null===e||void 0===e?void 0:e[a])?0:1)}),0),cellClassName:"text-center font-weight-bold text-danger"},{id:1,colSpan:t.reduce((function(n,t){var a=t.id;return n+((null===e||void 0===e?void 0:e[a])?0:1)}),0),cellClassName:"text-right font-weight-bold text-small text-danger",render:function(n){return Object(D.formatNumber)(n)}},{id:2,colSpan:a.reduce((function(n,t){var a=t.id;return n+((null===e||void 0===e?void 0:e[a])?0:1)}),0)}]}),[e]),i=d.a.useMemo((function(){return t.reduce((function(n,t){var a=n.tongTienDonHang+(t.tongTienDonHang||0);return Object(g.a)(Object(g.a)({},n),{},{tongTienDonHang:a})}),{tong:"T\u1ed5ng ti\u1ec1n",tongTienDonHang:0})}),[t]),o=d.a.useMemo((function(){return["tong","tongTienDonHang"].map((function(n,t){return Object(L.a)({},t,i[n])}))}),[i]);return Object(k.b)(R.a,{columns:c,dataSource:o})})),z=a(456),A=a(216),V=a(61),J=a(227),Q=a(110),U=a(315),W=a(721),Y=a(793),Z=a(210),$=a(794),_=a(765),nn=a(382),tn=s.d.donHangXuatModal;var an=function(n){var t=n.donHangXuatData,a=Object(u.b)(),e=Object(u.c)((function(n){return n.donHangXuat})).loading,c=Object(u.c)((function(n){return n.chiTietDonHang})).chiTietDonHangs,i=Object(U.useForm)(),r=Object(o.a)(i,1)[0];d.a.useEffect((function(){return a(Object(Z.h)((null===t||void 0===t?void 0:t.chiTietDonHangs)||{})),function(){a(Object(Z.h)({}))}}),[t]);var l=d.a.useMemo((function(){return c?Object.values(c).map((function(n){var t=n.soLuongThuc,a=void 0===t?0:t,e=n.giaBanMatHang,c=void 0===e?0:e,i=Math.round(a*c);return Object(g.a)(Object(g.a)({},n),{},{thanhTien:i})})).reduce((function(n,t){return Object(g.a)(Object(g.a)({},n),{},Object(L.a)({},t.id,t))}),{}):{}}),[c]),b=d.a.useMemo((function(){return Object(nn.a)("tenMatHang",Object.values(l))}),[l]);return Object(k.c)(k.a,{children:[Object(k.b)(m.a,{onCallbackDataSource:function(n){return Object(nn.a)("tenMatHang",n)},constants:W.d,datas:l,loading:e,modalId:tn,form:r,pageSize:50,summary:function(n){return Object(k.b)(Y.a,{pageData:n})},inputOptions:{openEditGiaBanMatHang:function(n){a(Object(J.c)({modalId:s.d.openEditGiaBanMatHang,data:n}))},openEditSoLuongThuc:function(n){a(Object(J.c)({modalId:s.d.openEditSoLuongThuc,data:n}))}}}),Object(k.b)(_.a,{dataSource:b,onOk:function(n){a(Object(Z.e)(n)),a(Object(Q.e)(!0))}}),Object(k.b)($.a,{dataSource:b,onOk:function(n){a(Object(Z.g)(n)),a(Object(Q.e)(!0))}})]})},en=a(828),cn=s.d.danhSachDHNModal,on=function(n){var t,a,e=Object(u.b)(),r=Object(u.c)((function(n){return n.form})),l=r.modal,b=r.datas,h=Object(u.c)((function(n){return n.donHang})).donHangDirty,O=Object(u.c)((function(n){return n.danhSachDHX})).donHangXuatData,f=Object(u.c)((function(n){return n.account})).accountData,j=null===f||void 0===f||null===(t=f.paths)||void 0===t||null===(a=t.danhSachDHN)||void 0===a?void 0:a.edit,m=z.a.useForm(),v=Object(o.a)(m,1)[0],p=null===b||void 0===b?void 0:b[cn],H=d.a.useMemo((function(){var n;return!!(null===l||void 0===l||null===(n=l[cn])||void 0===n?void 0:n.open)}),[l[cn]]);function M(){if(h&&!window.confirm("\u0110\u01a1n h\xe0ng \u0111\xe3 thay \u0111\u1ed5i, b\u1ea1n c\xf3 mu\u1ed1n tho\xe1t?"))return null;e(J.a({modalId:cn})),e(Object(Q.e)(!1))}function I(){return N.apply(this,arguments)}function N(){return(N=Object(i.a)(c.a.mark((function n(){var t,a,i;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(j){n.next=2;break}return n.abrupt("return",Object(B.e)());case 2:if(window.confirm("X\xe1c nh\u1eadn l\u01b0u \u0111\u01a1n h\xe0ng?")){n.next=4;break}return n.abrupt("return",null);case 4:return n.next=6,v.validateFields();case 6:t=n.sent,a=t.ngayGiao,i=a.format("L"),e(Object(T.g)(Object(g.a)(Object(g.a)({},O),{},{ngayGiao:i}))),e(J.a({modalId:cn})),e(Object(Q.e)(!1));case 12:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return d.a.useEffect((function(){return e(Object(T.c)(p)),function(){return Object(G.g)("donHangXuatData")}}),[p]),d.a.useEffect((function(){if(O){var n=y()(null===O||void 0===O?void 0:O.ngayGiao,"L");v.setFieldsValue({ngayGiao:n})}else v.resetFields()}),[O]),(null===O||void 0===O?void 0:O.trangThaiId)===s.h.daHuy.trangThaiId?Object(k.b)(D.MyModal,{title:Object(k.c)("div",{children:["\u0110\u01a1n \u0111\u1eb7t h\xe0ng nh\xe0 cung c\u1ea5p: ",null===O||void 0===O?void 0:O.tenKhachHang]}),visible:H,onClose:M,onOkModal:I,width:1200,maskClosable:!h,modalId:cn,datas:b,children:Object(k.b)("div",{children:"\u0110\u01a1n h\xe0ng \u0111\xe3 h\u1ee7y"})}):Object(k.c)(D.MyModal,{title:Object(k.c)("div",{children:["\u0110\u01a1n b\xe1n h\xe0ng: ",null===O||void 0===O?void 0:O.tenKhachHang]}),visible:H,onClose:M,onOkModal:I,width:1200,maskClosable:!h,modalId:cn,datas:b,children:[Object(k.c)(D.MyForm,{form:v,labelCol:{span:4},wrapperCol:{span:20},children:[Object(k.b)(D.MyFormItem,{label:"Ng\xe0y giao: ",name:"ngayGiao",rules:[{required:!0}],children:Object(k.b)(A.a,{style:{width:"100%"}})}),Object(k.b)(D.MyFormItem,{label:"Ch\u1ee9c n\u0103ng",children:Object(k.b)(C.a,{type:"primary",icon:Object(k.b)(V.a,{}),onClick:function(){return e(Object(J.c)({modalId:s.d.matHangAddSoLuongModal}))},children:"Th\xeam m\u1eb7t h\xe0ng"})})]}),Object(k.c)("div",{className:"mt-1",children:[Object(k.b)("div",{className:"font-weight-bold",style:{marginBottom:"7px"},children:"Chi Ti\u1ebft \u0110\u01a1n H\xe0ng:"}),Object(k.b)(an,{donHangXuatData:O})]}),Object(k.b)(en.a,{giatMatHangName:"giaBanMatHang",onAfterAddFinish:function(n){console.log(n),e(Object(Z.b)(n)),e(Object(Q.e)(!0))}})]})},rn=a(795),dn=a(83),un=function(n){var t=n.donHangXuatData,a=d.a.useState({}),e=Object(o.a)(a,2),c=e[0],i=e[1],r=Object(U.useForm)(),u=Object(o.a)(r,1)[0];d.a.useEffect((function(){i((null===t||void 0===t?void 0:t.chiTietDonHangs)||{})}),[t]);var l=d.a.useMemo((function(){return c?Object.values(c).map((function(n){"L\xe1 chanh"===n.tenMatHang&&console.log(n);var t=n.soLuongThuc,a=void 0===t?0:t,e=n.giaBanMatHang,c=void 0===e?0:e,i=Math.round(a*c);return Object(g.a)(Object(g.a)({},n),{},{thanhTien:i})})).reduce((function(n,t){return Object(g.a)(Object(g.a)({},n),{},Object(L.a)({},t.id,t))}),{}):{}}),[c]);return Object(k.b)(k.a,{children:Object(k.b)(m.a,{onCallbackDataSource:function(n){var t=n.map((function(n,t){var a=Object(D.xoaDauVietNam)(n.tenMatHang);return Object(g.a)(Object(g.a)({},n),{},{index:t,searchName:a})}));return Object(dn.orderBy)(t,"searchName")},constants:W.d,datas:l,form:u,pageSize:50})})},ln=a(466),bn=(a(733),a(493)),sn=a(371),hn=s.d.importModal;var gn=function(n){var t=n.modalId,a=n.loading,e=n.onCapNhatDuLieu,o=d.a.useRef(null),r=d.a.useRef(null),l=Object(u.b)(),b=Object(u.c)((function(n){return n.form})),s=b.modal,h=b.datas,g=Object(u.c)((function(n){return n.importExcel})).sheetHTMLs;t=t||hn;var O=d.a.useMemo((function(){var n;return!!(null===s||void 0===s||null===(n=s[t||""])||void 0===n?void 0:n.open)}),[s[t]]);function f(){return(f=Object(i.a)(c.a.mark((function n(){var a,e,i;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(null===o||void 0===o?void 0:o.current)){n.next=6;break}if(e=null===(a=o.current)||void 0===a?void 0:a.files[0],i=e&&e.name?e.name:"",l(Object(sn.a)(i))){n.next=5;break}return n.abrupt("return");case 5:l(Object(sn.c)(e,t));case 6:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return d.a.useEffect((function(){O&&r.current&&(r.current.innerHTML=(null===g||void 0===g?void 0:g[t||""])||"")}),[g,r,t,O]),Object(k.b)(D.MyModal,{title:Object(k.b)("div",{children:"Import Excel"}),visible:O,onClose:function(){l(J.a({modalId:t}))},width:1200,modalId:t,datas:h,footer:null,children:Object(k.c)("div",{children:[Object(k.b)("input",{ref:o,type:"file",style:{border:"1px solid lightgray",width:"300px"}}),Object(k.b)(C.a,{icon:Object(k.b)(bn.a,{}),onClick:function(){return f.apply(this,arguments)},type:"primary",children:"T\u1ea3i file excel l\xean"}),Object(k.c)("div",{style:{padding:"10px 0"},children:[Object(k.b)("div",{children:"C\xe1c ch\u1ee9c n\u0103ng:"}),Object(k.b)("div",{className:"mt-1",children:e?Object(k.b)(C.a,{type:"dashed",danger:!0,loading:a,onClick:e,children:"C\u1eadp nh\u1eadt d\u1eef li\u1ec7u"}):null})]}),Object(k.b)("div",{className:"import-excel",ref:r})]})})},On=s.d.danhSachDHNModal;t.default=function(){var n,t,a=Object(u.b)(),e=Object(b.u)(),r=Object(u.c)((function(n){return n.danhSachDHX})),g=r.tabsData,O=r.loading,f=r.pageSize,v=r.danhSachDHNs,p=Object(u.c)((function(n){return n.table})).selectedRows,H=Object(u.c)((function(n){var t;return null===(t=n.tagsPage)||void 0===t?void 0:t[On]})),M=Object(E.a)(),y=Object(o.a)(M,2),D=y[0],C=y[1],S=Object(u.c)((function(n){return n.account})).accountData,L=null===S||void 0===S||null===(n=S.paths)||void 0===n||null===(t=n.danhSachDHN)||void 0===t?void 0:t.edit,R=Object(N.a)({Instance:I,onPending:T.f,addSelectedId:T.a,onDelete:T.e});return d.a.useEffect((function(){return a(Object(T.d)(D)),function(){Object(G.g)("danhSachDHM")}}),[D]),Object(k.c)("div",{className:"danhSachDHN-page",css:h.a,children:[Object(k.b)(l.b,{className:"tabs",options:g,activeKey:H?"aside":"",onTabClick:function(n){if("add"===n){if(!L)return Object(B.e)();e(X)}else if("add-express"===n){if(!L)return Object(B.e)();a(Object(J.c)({modalId:s.d.importDonHangXuatModal}))}else"aside"===n?a(Object(x.b)({tagPageId:On})):"print"===n?a(Object(J.c)({modalId:s.e.inDonHang})):"taiExcel"===n&&a(Object(w.b)({tableId:On,constants:j,fileSheet:"danhSachDHNSheet",fileName:"danhSachDHNName"}))}}),Object(k.c)("div",{className:"tabs-main",style:{marginTop:"10px"},children:[H&&Object(k.b)(F,{dateTimePicker:C}),Object(k.b)("div",{className:"aside-main",children:Object(k.b)(m.a,{constants:j,actions:R,datas:v,loading:O,modalId:On,isEdit:L,expandable:{expandedRowRender:function(n){return Object(k.b)(un,{donHangXuatData:n})}},isSelection:!0,pagination:!0,pageSize:f,onChange:function(n){return a(Object(T.h)(n.pageSize))},summary:function(n){return Object(k.b)(q,{pageData:n})},rowClassName:function(n){return n.trangThaiId===s.h.daHuy.trangThaiId?"bg-danger":n.trangThaiId===s.h.chuaNhan.trangThaiId?"bg-gold-light":""}})})]}),Object(k.b)(on,{}),Object(k.b)(rn.a,{modalId:s.e.inDonHang,title:"In \u0110\u01a1n \u0110\u1eb7t H\xe0ng",onPrint:function(n){var t=null===p||void 0===p?void 0:p[On];if(!t)return Object(B.b)("Ch\u01b0a ch\u1ecdn \u0111\u01a1n h\xe0ng");a(Object(ln.a)(t,n)),a(Object(J.a)({modalId:s.e.inDonHang}))}}),Object(k.b)(gn,{loading:O,modalId:s.d.importDonHangXuatModal,onCapNhatDuLieu:Object(i.a)(c.a.mark((function n(){return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(window.confirm("X\xe1c nh\u1eadn c\u1eadp nh\u1eadt?")){n.next=2;break}return n.abrupt("return");case 2:a(Object(J.a)({modalId:s.d.matHangImportModal}));case 3:case"end":return n.stop()}}),n)})))})]})}}}]);