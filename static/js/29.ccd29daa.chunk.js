(this["webpackJsonptu-bon"]=this["webpackJsonptu-bon"]||[]).push([[29],{1022:function(n,e,t){"use strict";t.r(e);var a=t(20),o=t(8),c=t(40),i=t(0),r=t.n(i),l=t(56),u=t(6),d=t(716),s=t(61),b=t(719),g=t(217),f={getTableColumns:function(){return[g.a.ngayGiao,g.a.tongTienDonHang]},getInputFields:function(){return[]},getExcelFields:function(){return[g.a.ngayGiao,g.a.tongTienDonHang]}},v=t(717),O=t(12),j=t(18),m=t(19),p=function(n){Object(j.a)(t,n);var e=Object(m.a)(t);function t(){var n;Object(O.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=e.call.apply(e,[this].concat(o))).pathDatas=["congNoNgayTuBon","datas"],n.pathDeleted=["congNoNgayTuBon","deleted"],n.initData={},n}return t}(u.AppClass),h=t(715),y=t(427),T=t(59),N=t(65),C=t(764),S=t(25);var x=function(n){var e=n.dateTimePicker,t=Object(l.b)();return Object(S.b)(S.a,{children:Object(S.b)(d.a,{header:Object(S.b)("div",{className:"font-weight-bold",children:Object(S.b)("span",{children:"Th\xf4ng Tin Trang "})}),body:Object(S.c)("div",{className:"form-input-aside",style:{padding:"5px"},children:[Object(S.b)("div",{children:(null===e||void 0===e?void 0:e.getMonthRender())||null}),Object(S.b)(C.a,{})]}),footer:Object(S.b)("div",{children:Object(S.b)(T.a,{icon:Object(S.b)(N.a,{}),onClick:function(){t(Object(u.toggleAside)({tagPageId:s.c.congNoNgayTuBonModal}))},children:"\u0110\xf3ng m\u1edf r\u1ed9ng"})})})})},M=t(34),w=t(13),D=t(722),I=s.c.congNoNgayTuBonModal;var A=function(n){var e=n.pageData,t=Object(l.c)((function(n){return n.congNoNgayTuBon})).filteredKhachHangsFromDonHangs,c=Object(l.c)((function(n){return n.hideColumns})),i=null===c||void 0===c?void 0:c[I||""],d=r.a.useMemo((function(){return Object.values(t||{}).map((function(n,e){return{id:2+e,colSpan:1,cellClassName:"text-right font-weight-bold text-small",render:function(n){return Object(u.formatNumber)(n)}}}))}),[t]),s=r.a.useMemo((function(){var n=[g.a.ngayGiao],e=[g.a.tongTienDonHang];return[{id:0,colSpan:0+n.reduce((function(n,e){var t=e.id;return n+((null===i||void 0===i?void 0:i[t])?0:1)}),0),cellClassName:"text-center font-weight-bold text-danger"},{id:1,colSpan:e.reduce((function(n,e){var t=e.id;return n+((null===i||void 0===i?void 0:i[t])?0:1)}),0),cellClassName:"text-right font-weight-bold text-small text-danger",render:function(n){return Object(u.formatNumber)(n)}}].concat(Object(a.a)(d))}),[i,d]),b=r.a.useMemo((function(){return e.reduce((function(n,e){var a=n.tongTienDonHang+(e.tongTienDonHang||0),c=Object.values(t||{}).reduce((function(n,t){var a=t.id,c=((null===n||void 0===n?void 0:n[a])||0)+((null===e||void 0===e?void 0:e[a])||0);return Object(o.a)(Object(o.a)({},n),{},Object(w.a)({},a,c))}),n);return Object(o.a)(Object(o.a)(Object(o.a)({},n),c),{},{tongTienDonHang:a})}),{tong:"T\u1ed5ng ti\u1ec1n",tongTienDonHang:0})}),[e,t]),f=r.a.useMemo((function(){return["tong","tongTienDonHang"].concat(Object(a.a)(Object.values(t||{}).map((function(n){return n.id})))).map((function(n,e){return Object(w.a)({},e,b[n])}))}),[b,t]);return Object(S.b)(D.a,{columns:s,dataSource:f})},F=s.c.congNoNgayTuBonModal;e.default=function(){var n,e,t=Object(l.b)(),i=Object(u.useDatePicker)(),s=Object(c.a)(i,2),g=s[0],O=s[1],j=Object(l.c)((function(n){return n.congNoNgayTuBon})),m=j.tabsData,T=j.congNoNgayTuBonLoading,N=j.pageSize,C=j.congNoNgayTuBonsTheoCongTy,w=j.filteredKhachHangsFromDonHangs,D=Object(l.c)((function(n){var e;return null===(e=n.tagsPage)||void 0===e?void 0:e[F]})),I=Object(l.c)((function(n){return n.congTy})).congTyId,B=Object(l.c)((function(n){return n.dsKhachHang})).dsKhachHangs,H=Object(l.c)((function(n){return n.account})).accountData,k=null===H||void 0===H||null===(n=H.paths)||void 0===n||null===(e=n.congNoNgayTuBon)||void 0===e?void 0:e.edit,E=Object(h.a)({Instance:p,onPending:y.d,addSelectedId:y.a,isEdit:k});r.a.useEffect((function(){B&&Object.values(B).length>0&&t(Object(y.c)(g,I))}),[g,B,I]);var P=r.a.useMemo((function(){return Object.values(w||{}).map((function(n){return{id:n.id,width:100,align:"right",className:"text-small",name:n.tenKhachHang,render:u.numberRender}}))}),[w]),K=r.a.useMemo((function(){return Object(o.a)(Object(o.a)({},f),{},{getTableColumns:function(){return[].concat(Object(a.a)(f.getTableColumns()),Object(a.a)(P))},getExcelFields:function(){var n;return[].concat(Object(a.a)((null===f||void 0===f||null===(n=f.getExcelFields)||void 0===n?void 0:n.call(f))||[]),Object(a.a)(P))}})}),[P]);return Object(S.c)("div",{className:"congNoNgayTuBon-page",css:b.a,children:[Object(S.b)(d.b,{className:"tabs",options:m,activeKey:D?"aside":"",onTabClick:function(n){if("add"===n){if(!k)return Object(M.l)();var e=new p;t(Object(u.openModal)({modalId:F,data:e.initData}))}else"aside"===n?t(Object(u.toggleAside)({tagPageId:F})):"taiExcel"===n&&t(Object(u.downloadExcel)({tableId:F,constants:K,pageDatas:C,fileSheet:"congNoNgayTuBonSheet",fileName:"congNoNgayTuBonName"}))}}),Object(S.c)("div",{className:"tabs-main",style:{marginTop:"10px"},children:[D&&Object(S.b)(x,{dateTimePicker:O}),Object(S.b)("div",{className:"aside-main",children:Object(S.b)(v.a,{isEdit:k,constants:K,actions:E,datas:C,loading:T,modalId:F,isSelection:!1,pagination:!0,pageSize:N,onChange:function(n){t(Object(y.e)(n.pageSize))},summary:function(n){return Object(S.b)(A,{pageData:n})}})})]})]})}},718:function(n,e,t){"use strict";t.d(e,"a",(function(){return c}));var a=t(0),o=(t(333),t(158)),c=(t(78),t(215),t(123),t(240),t(332),t(362),function(n,e){var t=arguments;if(null==e||!o.d.call(e,"css"))return a.createElement.apply(void 0,t);var c=t.length,i=new Array(c);i[0]=o.a,i[1]=Object(o.c)(n,e);for(var r=2;r<c;r++)i[r]=t[r];return a.createElement.apply(null,i)})},720:function(n,e,t){"use strict";function a(n,e){if(null==n)return{};var t,a,o=function(n,e){if(null==n)return{};var t,a,o={},c=Object.keys(n);for(a=0;a<c.length;a++)t=c[a],e.indexOf(t)>=0||(o[t]=n[t]);return o}(n,e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);for(a=0;a<c.length;a++)t=c[a],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(o[t]=n[t])}return o}t.d(e,"a",(function(){return a}))},722:function(n,e,t){"use strict";t(0);var a=t(477),o=t(25),c=a.a.Summary,i=c.Row,r=c.Cell;e.a=function(n){var e,t=n.columns,a=n.dataSource;return Object(o.b)(i,{children:null===t||void 0===t||null===(e=t.map)||void 0===e?void 0:e.call(t,(function(n,e){var t=null===n||void 0===n?void 0:n.id,c=(null===n||void 0===n?void 0:n.colSpan)||0,i=(null===n||void 0===n?void 0:n.cellClassName)||"",l=(null===n||void 0===n?void 0:n.valueStyle)||{},u=(null===n||void 0===n?void 0:n.valueClassName)||"",d=null===n||void 0===n?void 0:n.render,s=(null===a||void 0===a?void 0:a[e])||{},b=(null===s||void 0===s?void 0:s[t])||"";return d&&(b=d(b,s,e)),Object(o.b)(r,{index:e,colSpan:c,className:i,children:Object(o.b)("div",{style:l,className:u,children:b})},t)}))})}},764:function(n,e,t){"use strict";var a=t(0),o=t.n(a),c=t(59),i=t(110),r=t(6),l=t(56),u=t(177),d=t(5),s=t.n(d),b=t(9),g=t(374),f=t(715),v=t(389),O=t(61),j=t(25),m=O.c.congTyModal,p=function(n){var e=n.onAfterAddFinish,t=Object(f.a)({Instance:v.a,onPending:u.f,addSelectedId:u.a}),a=Object(l.b)(),c=Object(l.c)((function(n){return n.form})),i=c.modal,d=c.datas,O=o.a.useMemo((function(){var n;return!!(null===i||void 0===i||null===(n=i[m])||void 0===n?void 0:n.open)}),[i[m]]);function p(){return(p=Object(b.a)(s.a.mark((function n(o,c){var i,l,u;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=!0,l=Object(r.convertMomentToString)(g.a.getInputFields(),c),!c){n.next=16;break}if(null===o||void 0===o?void 0:o.id){n.next=11;break}return n.next=6,a(t.onAddAsync({validatedValues:l}));case 6:i=n.sent,null===e||void 0===e||e(null===(u=i)||void 0===u?void 0:u.id),i=Boolean(i),n.next=16;break;case 11:return n.t0=Boolean,n.next=14,a(t.onUpdateAsync({currentData:o,validatedValues:l}));case 14:n.t1=n.sent,i=(0,n.t0)(n.t1);case 16:i&&a(Object(r.closeModal)({modalId:m}));case 17:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return Object(j.b)(r.MyModal,{form:!0,title:"CongTy",visible:O,onClose:function(){a(Object(r.closeModal)({modalId:m}))},onOkModal:function(n,e){return p.apply(this,arguments)},formOptions:Object(r.getFormItemFields)(g.a.getInputFields()),formProps:{labelCol:{span:8},wrapperCol:{span:16}},width:700,modalId:m,datas:d})},h=t(55);e.a=function(n){var e,t,a=n.form,d=n.name,s=n.mode,b=n.label,g=n.labelCol,f=n.wrapperCol,v=n.rules,m=n.isEdit,y=n.isAddNew,T=n.onAfterSelect,N=n.onAfterAddFinish,C=n.disabled,S=Object(l.b)(),x=Object(l.c)((function(n){return n.congTy})).congTys,M=Object(l.c)((function(n){return n.account})).accountData,w=(null===M||void 0===M||null===(e=M.paths)||void 0===e||null===(t=e.congTy)||void 0===t?void 0:t.edit)||m,D=o.a.useMemo((function(){return Object.values(x).filter((function(n){return n.active})).map((function(n){var e="".concat(n.tenCongTy);return{value:n.id,label:e}}))}),[x]),I=Object(j.b)(r.MyFormItem,{label:b||"C\xf4ng ty",type:"select",name:d||"congTyId",innerProps:{mode:s,showSearch:!0,allowClear:!0,filterOption:r.onSelectSearch,onChange:function(n){S(Object(u.a)(n)),null===T||void 0===T||T(n)},disabled:C,notFoundContent:w?Object(j.b)("div",{children:y?Object(j.b)(c.a,{icon:Object(j.b)(h.a,{}),type:"primary",onClick:function(){return S(Object(r.openModal)({modalId:O.c.congTyModal}))},children:"Th\xeam"}):null}):Object(j.b)(i.a,{})},options:D,rules:v||[]});return a?Object(j.c)(j.a,{children:[Object(j.b)(r.MyForm,{form:a,labelCol:g||{span:8},wrapperCol:f||{span:16},children:I}),w&&Object(j.b)(p,{onAfterAddFinish:function(n){a.setFieldsValue({congTyId:n})}})]}):Object(j.c)(j.a,{children:[I,w&&Object(j.b)(p,{onAfterAddFinish:function(n){function e(e){return n.apply(this,arguments)}return e.toString=function(){return n.toString()},e}((function(n){null===N||void 0===N||N(n)}))})]})}}}]);