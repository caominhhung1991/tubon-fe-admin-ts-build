(this["webpackJsonptu-bon"]=this["webpackJsonptu-bon"]||[]).push([[23],{1013:function(n,t,e){"use strict";e.r(t);var a=e(5),c=e.n(a),o=e(9),i=e(40),r=e(0),u=e.n(r),d=e(56),l=e(712),s=e(59),b=e(44),h=e(64),g=e(714),O=e(8),j=e(7),f=e(724),v=e(766),m=e(751),p={getTableColumns:function(){return[f.a.daThanhToan,Object(O.a)(Object(O.a)({},j.constants.stt),{},{fixed:!1}),f.a.donHangId,Object(O.a)(Object(O.a)({},v.a.tenKhachHang),{},{width:200}),Object(O.a)(Object(O.a)({},f.a.ngayGiao),{},{defaultSortOrder:"descend",sortDirections:["descend"]}),m.a.tenLoaiDonHang,f.a.tongTienDonHang,j.constants.editRow,h.e.tenTrangThai,j.constants.updatedAt,j.constants.updatedBy,j.constants.createdAt,j.constants.createdBy]},getInputFields:function(){return[]},getExcelFields:function(){return[j.constants.active]}},H={getTableColumns:function(){return[Object(O.a)(Object(O.a)({},j.constants.stt),{},{fixed:!1}),f.a.donHangId,Object(O.a)(Object(O.a)({},v.a.tenKhachHang),{},{width:200}),Object(O.a)(Object(O.a)({},m.a.tenLoaiDonHang),{},{width:100,align:"center"}),Object(O.a)(Object(O.a)({},f.a.ngayGiao),{},{sorter:Object(j.sortByText)("ngayGiao")}),f.a.ngayDat]},getInputFields:function(){return[]}},M=e(713),y=e(12),T=e(18),D=e(19),C=function(n){Object(T.a)(e,n);var t=Object(D.a)(e);function e(){var n;Object(y.a)(this,e);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(n=t.call.apply(t,[this].concat(c))).pathDatas=["quanLyHangXuat","datas"],n.pathDeleted=["quanLyHangXuat","deleted"],n.initData={},n}return e}(j.AppClass),x=e(711),I=e(243),w=e(50),N=e(149),S=e(510),k=e(65),L=e(13),F=e(15),A=e(14),V=e(31),B=e.n(V),E=e(86),G=e(181),X=["dieuHanh","khoCom","donDatHangs","datas"],R=["xuongDauGiay","dieuHanh","khoCom","donDatHangs","datas"];var P=e(795),K=e(245),q=e(25),_=h.c.layDonHangOBDModal;var z=function(n){var t=Object(d.b)(),e=Object(d.c)((function(n){return n.form})),a=e.modal,i=e.datas,r=Object(d.c)((function(n){return n.table})).selectedRows,l=Object(d.c)((function(n){return n.donHang})),b=l.donDatHangOBDs,g=l.loading,f=Object(d.c)((function(n){return n.donHangXuat})).loading,v=u.a.useMemo((function(){var n;return!!(null===a||void 0===a||null===(n=a[_])||void 0===n?void 0:n.open)}),[a[_]]);function p(n){return Object.values((null===n||void 0===n?void 0:n.matHangConThieus)||{}).map((function(n){return Object(q.c)("span",{className:"mt-1",style:{marginRight:"10px"},children:[null===n||void 0===n?void 0:n.tenMatHang,";"]},n.id)}))}function y(){return(y=Object(o.a)(c.a.mark((function n(){var e;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(window.confirm("X\xe1c nh\u1eadn t\u1ea1o \u0111\u01a1n h\xe0ng?")){n.next=2;break}return n.abrupt("return",null);case 2:return e=(null===r||void 0===r?void 0:r[_])||[],n.next=5,t(Object(K.d)(e));case 5:t(Object(j.closeModal)({modalId:h.c.layDonHangOBDModal}));case 6:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return u.a.useEffect((function(){v&&t(function(){var n=Object(o.a)(c.a.mark((function n(t,e){var a,o,i,r,u,d,l,s,b,h,g,f,v,p;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t(Object(E.d)(!0)),a=e(),o=a.donViTinh.donViTinhs,i=a.dsMatHang.dsMatHangs,r=a.account.accountData,u=Object.values(i),n.next=8,t(Object(G.b)());case 8:return d=n.sent,n.next=11,t(Object(G.c)());case 11:return l=n.sent,s=null===r||void 0===r?void 0:r.email,b=Object(F.c)(A.g),h=Object(F.h)(b,X.join("/")),n.next=17,Object(F.b)(h);case 17:g=n.sent,f=g.val(),v=Object.values(f).filter((function(n){var t=n.vendorId;return"ac"===t||"OSAC_GIA_VI"===t})).map((function(n){var t=n.id,e=n.ngayGiao,a=n.createdAt,c=n.datas,i=n.vendorId,r="ac"===i?"osac_binh_duong":"-Mzik6cg0jcQtLf-LyiT",b="ac"===i?"Osac B\xecnh D\u01b0\u01a1ng":"OSAC - GIA V\u1eca",h="ac"===i?"":m.b.giaVi.id,g="ac"===i?"":m.b.giaVi.tenLoaiDonHang,f="ac"===i?d:l,v={},p=Object.values(c).reduce((function(n,t){var e,a=t.name,c=t.tongDinhLuong,i=t.vendorId,r=t.quantitative,d=Object(j.xoaDauVietNam)(a).trim(),l=u.find((function(n){return Object(j.xoaDauVietNam)(n.tenMatHang).trim()===d}));if(l){var s,b=(null===f||void 0===f||null===(s=f[l.id])||void 0===s?void 0:s.giaBanMatHang)||0;return Object(O.a)(Object(O.a)({},n),{},Object(L.a)({},l.id,Object(O.a)(Object(O.a)({},l),{},{soLuong:c,soLuongThuc:c,giaBanMatHang:b})))}var h="ac"===i?"rauCuQua":"giaVi",g="ac"===i?"Rau, c\u1ee7, qu\u1ea3":"Gia v\u1ecb",m=r,p=(null===o||void 0===o||null===(e=o[m])||void 0===e?void 0:e.tenDonViTinh)||m,H={id:d,tenMatHang:a,nhomMatHangId:h,tenNhomMatHang:g,donViTinhId:m,tenDonViTinh:p,matHangConThieu:!0};return v=Object(O.a)(Object(O.a)({},v),{},Object(L.a)({},d,H)),Object(O.a)(Object(O.a)({},n),{},Object(L.a)({},H.id,Object(O.a)(Object(O.a)({},H),{},{soLuong:c,soLuongThuc:c,giaBanMatHang:0})))}),{});return{id:t,loaiDonHangId:h,tenLoaiDonHang:g,khachHangId:r,tenKhachHang:b,ngayDat:B()(a).format("L"),ngayGiao:e=B()(e).format("L"),trangThaiId:"choXacNhan",tenTrangThai:"Ch\u1edd x\xe1c nh\u1eadn",nguoiTao:s,chiTietDonHangs:p,matHangConThieus:v}})),p=v.reduce((function(n,t){return Object(O.a)(Object(O.a)({},n),{},Object(L.a)({},t.id,t))}),{}),t(Object(E.f)(p)),t(Object(E.d)(!1));case 23:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}())}),[v]),Object(q.c)(j.MyModal,{title:Object(q.b)("div",{children:"L\u1ea5y \u0110H \u0110\u1eb7t Osac B\xecnh D\u01b0\u01a1ng"}),visible:v,onClose:function(){return t(Object(j.closeModal)({modalId:_}))},width:1200,modalId:_,datas:i,footer:null,children:[Object(q.b)("div",{style:{marginBottom:"10px"},children:Object(q.b)(s.a,{loading:f||g,type:"primary",onClick:function(){return y.apply(this,arguments)},children:"T\u1ea1o \u0111\u01a1n h\xe0ng \u0111\xe3 ch\u1ecdn"})}),Object(q.b)(M.a,{constants:H,datas:b,loading:f||g,modalId:_,pagination:!0,isSelection:!0,expandable:{expandedRowRender:function(n){return Object(q.c)("div",{children:[Object(q.c)("div",{style:{marginBottom:"15px"},children:[Object(q.b)("strong",{children:"M\u1eb7t h\xe0ng b\u1ecb thi\u1ebfu:"})," ",p(n)]}),Object(q.b)(P.a,{donHangXuatData:n})]})}}})]})},J=h.c.layDonHangODGModal;var Q=function(n){var t=Object(d.b)(),e=Object(d.c)((function(n){return n.form})),a=e.modal,i=e.datas,r=Object(d.c)((function(n){return n.table})).selectedRows,l=Object(d.c)((function(n){return n.donHang})),b=l.donDatHangODGs,h=l.loading,g=Object(d.c)((function(n){return n.donHangXuat})).loading,f=u.a.useMemo((function(){var n;return!!(null===a||void 0===a||null===(n=a[J])||void 0===n?void 0:n.open)}),[a[J]]);function v(n){return Object.values((null===n||void 0===n?void 0:n.matHangConThieus)||{}).map((function(n){return Object(q.c)("span",{className:"mt-1",style:{marginRight:"10px"},children:[null===n||void 0===n?void 0:n.tenMatHang,";"]},n.id)}))}return u.a.useEffect((function(){f&&t(function(){var n=Object(o.a)(c.a.mark((function n(t,e){var a,o,i,r,u,d,l,s,b,h,g,f,v,p;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t(Object(E.d)(!0)),a=e(),o=a.donViTinh.donViTinhs,i=a.dsMatHang.dsMatHangs,r=a.account.accountData,u=Object.values(i),n.next=8,t(Object(G.b)());case 8:return d=n.sent,n.next=11,t(Object(G.c)());case 11:return l=n.sent,s=null===r||void 0===r?void 0:r.email,b=Object(F.c)(A.g),h=Object(F.h)(b,R.join("/")),n.next=17,Object(F.b)(h);case 17:g=n.sent,f=g.val(),v=Object.values(f||{}).filter((function(n){var t=n.nhaCungCapId;return"ac"===t||"OSAC_GIA_VI"===t})).map((function(n){var t=n.id,e=n.ngayGiao,a=n.createdAt,c=n.datas,i=n.nhaCungCapId,r="ac"===i?"":m.b.giaVi.id,b="ac"===i?"":m.b.giaVi.tenLoaiDonHang,h="ac"===i?d:l,g={},f=Object.values(c).reduce((function(n,t){var e,a=t.name,c=t.tongDinhLuong,i=t.nhaCungCapId,r=t.donViTinhId,d=Object(j.xoaDauVietNam)(a).trim(),l=u.find((function(n){return Object(j.xoaDauVietNam)(n.tenMatHang).trim()===d}));if(l){var s,b=(null===h||void 0===h||null===(s=h[l.id])||void 0===s?void 0:s.giaBanMatHang)||0;return Object(O.a)(Object(O.a)({},n),{},Object(L.a)({},l.id,Object(O.a)(Object(O.a)({},l),{},{soLuong:c,soLuongThuc:c,giaBanMatHang:b})))}var f="ac"===i?"rauCuQua":"giaVi",v="ac"===i?"Rau, c\u1ee7, qu\u1ea3":"Gia v\u1ecb",m=(null===o||void 0===o||null===(e=o[r])||void 0===e?void 0:e.tenDonViTinh)||r,p={id:d,tenMatHang:a,nhomMatHangId:f,tenNhomMatHang:v,donViTinhId:r,tenDonViTinh:m,matHangConThieu:!0};return g=Object(O.a)(Object(O.a)({},g),{},Object(L.a)({},d,p)),Object(O.a)(Object(O.a)({},n),{},Object(L.a)({},p.id,Object(O.a)(Object(O.a)({},p),{},{soLuong:c,soLuongThuc:c,giaBanMatHang:0})))}),{});return{id:t,loaiDonHangId:r,tenLoaiDonHang:b,khachHangId:"osac_dau_giay",tenKhachHang:"Osac D\u1ea7u Gi\xe2y",ngayDat:B()(a).format("L"),ngayGiao:e=B()(e).format("L"),trangThaiId:"choXacNhan",tenTrangThai:"Ch\u1edd x\xe1c nh\u1eadn",nguoiTao:s,chiTietDonHangs:f,matHangConThieus:g}})),p=v.reduce((function(n,t){return Object(O.a)(Object(O.a)({},n),{},Object(L.a)({},t.id,t))}),{}),t(Object(E.g)(p)),t(Object(E.d)(!1));case 23:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}())}),[f]),Object(q.c)(j.MyModal,{title:Object(q.b)("div",{children:"L\u1ea5y \u0110H \u0110\u1eb7t Osac D\u1ea7u Gi\xe2y"}),visible:f,onClose:function(){return t(Object(j.closeModal)({modalId:J}))},width:1200,modalId:J,datas:i,footer:null,children:[Object(q.b)("div",{style:{marginBottom:"10px"},children:Object(q.b)(s.a,{loading:g||h,type:"primary",onClick:Object(o.a)(c.a.mark((function n(){var e;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(window.confirm("X\xe1c nh\u1eadn t\u1ea1o \u0111\u01a1n h\xe0ng?")){n.next=2;break}return n.abrupt("return",null);case 2:return e=(null===r||void 0===r?void 0:r[J])||[],n.next=5,t(Object(K.d)(e));case 5:t(Object(j.closeModal)({modalId:J}));case 6:case"end":return n.stop()}}),n)}))),children:"T\u1ea1o \u0111\u01a1n h\xe0ng \u0111\xe3 ch\u1ecdn"})}),Object(q.b)(M.a,{constants:H,datas:b,loading:g||h,modalId:J,pagination:!0,isSelection:!0,expandable:{expandedRowRender:function(n){return Object(q.c)("div",{children:[Object(q.c)("div",{style:{marginBottom:"15px"},children:[Object(q.b)("strong",{children:"M\u1eb7t h\xe0ng b\u1ecb thi\u1ebfu:"})," ",v(n)]}),Object(q.b)(P.a,{donHangXuatData:n})]})}}})]})},U=e(72);function W(n){var t,e,a,i=n.dateTimePicker,r=Object(d.b)(),u=Object(d.c)((function(n){return n.danhSachDHX})).danhSachDHXs,b=Object(d.c)((function(n){return n.account})),g=b.accountData,O=b.isDev,f=null===g||void 0===g||null===(t=g.paths)||void 0===t||null===(e=t.danhSachDHX)||void 0===e?void 0:e.edit,v=Object(d.c)((function(n){return n.danhSachDHX})),m=v.xemTatCaDonHang,p=v.xemDonHangDaHuy;function H(){return(H=Object(o.a)(c.a.mark((function n(){var t,e,a,o;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t=Object.values(u),t=(t=Object(U.orderBy)(t,"dayId")).filter((function(n){return"daHuy"!==n.trangThaiId})),e=Object(w.a)(t),n.prev=4,e.s();case 6:if((a=e.n()).done){n.next=13;break}return o=a.value,console.log(null===o||void 0===o?void 0:o.tenKhachHang),n.next=11,r(Object(G.g)(o));case 11:n.next=6;break;case 13:n.next=18;break;case 15:n.prev=15,n.t0=n.catch(4),e.e(n.t0);case 18:return n.prev=18,e.f(),n.finish(18);case 21:case"end":return n.stop()}}),n,null,[[4,15,18,21]])})))).apply(this,arguments)}return Object(q.c)(q.a,{children:[Object(q.b)(l.a,{header:Object(q.b)("div",{className:"font-weight-bold",children:Object(q.b)("span",{children:"Th\xf4ng Tin Trang "})}),body:Object(q.c)("div",{className:"form-input-aside",style:{padding:"5px"},children:[Object(q.b)("div",{children:(null===i||void 0===i||null===(a=i.getMonthRender)||void 0===a?void 0:a.call(i))||null}),Object(q.b)("div",{children:Object(q.b)(s.a,{icon:Object(q.b)(N.a,{}),onClick:function(){r(Object(I.n)(!m))},type:m?"primary":"dashed",danger:!0,children:"Xem h\u1ebft t\u1ea5t c\u1ea3 \u0111\u01a1n h\xe0ng"})}),Object(q.b)("div",{className:"mt-1",children:Object(q.b)(s.a,{icon:Object(q.b)(N.a,{}),onClick:function(){r(Object(I.m)(!p))},type:p?"primary":"dashed",danger:!0,children:"Xem \u0111\u01a1n h\xe0ng \u0111\xe3 h\u1ee7y"})}),f?Object(q.c)(q.a,{children:[Object(q.b)("div",{className:"mt-1",children:Object(q.b)(s.a,{type:"primary",ghost:!0,onClick:function(){r(Object(j.openModal)({modalId:h.c.layDonHangOBDModal}))},icon:Object(q.b)(S.a,{}),children:"L\u1ea5y \u0111\u01a1n \u0111\u1eb7t h\xe0ng Osac B\xecnh D\u01b0\u01a1ng"})}),Object(q.b)("div",{className:"mt-1",children:Object(q.b)(s.a,{type:"primary",ghost:!0,onClick:function(){r(Object(j.openModal)({modalId:h.c.layDonHangODGModal}))},icon:Object(q.b)(S.a,{}),children:"L\u1ea5y \u0111\u01a1n \u0111\u1eb7t h\xe0ng Osac D\u1ea7u Gi\xe2y"})})]}):null,O&&Object(q.b)(q.a,{children:Object(q.b)("div",{className:"mt-1",children:Object(q.b)(s.a,{onClick:function(){return H.apply(this,arguments)},icon:Object(q.b)(S.a,{}),children:"C\u1eadp nh\u1eadt gi\xe1 t\u1eebng kh\xe1ch h\xe0ng"})})})]}),footer:Object(q.b)("div",{children:Object(q.b)(s.a,{icon:Object(q.b)(k.a,{}),onClick:function(){return r(Object(j.toggleAside)({tagPageId:h.c.danhSachDHNModal}))},children:"\u0110\xf3ng m\u1edf r\u1ed9ng"})})}),Object(q.b)(z,{}),Object(q.b)(Q,{})]})}var Y=e(33),Z="/quan-ly-hang-xuat/tao-don-hang-xuat",$=e(718),nn=e(738),tn=h.c.danhSachDHNModal,en=Object(r.memo)((function(n){var t=n.pageData,e=Object(d.c)((function(n){return n.hideColumns})),a=null===e||void 0===e?void 0:e[tn||""],c=u.a.useMemo((function(){var n=[j.constants.stt,f.a.daThanhToan,f.a.donHangId,nn.a.tenNhaCungCap,m.a.tenLoaiDonHang,f.a.ngayGiao],t=[f.a.tongTienDonHang],e=[h.e.tenTrangThai,j.constants.capNhatRow,j.constants.updatedAt,j.constants.updatedBy,j.constants.createdAt,j.constants.createdBy];return[{id:0,colSpan:2+n.reduce((function(n,t){var e=t.id;return n+((null===a||void 0===a?void 0:a[e])?0:1)}),0),cellClassName:"text-center font-weight-bold text-danger"},{id:1,colSpan:t.reduce((function(n,t){var e=t.id;return n+((null===a||void 0===a?void 0:a[e])?0:1)}),0),cellClassName:"text-right font-weight-bold text-small text-danger",render:function(n){return Object(j.formatNumber)(n)}},{id:2,colSpan:e.reduce((function(n,t){var e=t.id;return n+((null===a||void 0===a?void 0:a[e])?0:1)}),0)}]}),[a]),o=u.a.useMemo((function(){return t.reduce((function(n,t){var e=n.tongTienDonHang+(t.tongTienDonHang||0);return Object(O.a)(Object(O.a)({},n),{},{tongTienDonHang:e})}),{tong:"T\u1ed5ng ti\u1ec1n",tongTienDonHang:0})}),[t]),i=u.a.useMemo((function(){return["tong","tongTienDonHang"].map((function(n,t){return Object(L.a)({},t,o[n])}))}),[o]);return Object(q.b)($.a,{columns:c,dataSource:i})})),an=e(474),cn=e(226),on=e(55),rn=e(332),un=e(218),dn=e(800),ln=e(834),sn=e(365),bn=e(764),hn=e(826),gn=e(723),On=h.c.matHangThayDoiModal;var jn=function(n){var t=n.modalId,e=n.onAfterOk,a=n.loaiTruMatHangs;t=t||On;var r=an.a.useForm(),l=Object(i.a)(r,1)[0],b=Object(d.b)(),h=Object(d.c)((function(n){return n.form})),g=h.modal,f=h.datas,v=null===f||void 0===f?void 0:f[t],m=u.a.useMemo((function(){var n;return!!(null===g||void 0===g||null===(n=g[t])||void 0===n?void 0:n.open)}),[g[t]]);function p(){b(Object(j.closeModal)({modalId:t})),l.resetFields()}function H(){return(H=Object(o.a)(c.a.mark((function n(){var t;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.validateFields();case 2:t=n.sent,null===e||void 0===e||e(t,v),p();case 5:case"end":return n.stop()}}),n)})))).apply(this,arguments)}var M=null===v||void 0===v?void 0:v.matHangConThieu;return Object(q.c)(j.MyModal,{title:Object(q.c)("div",{children:["Thay \u0111\u1ed5i t\xean m\u1eb7t h\xe0ng: ",null===v||void 0===v?void 0:v.tenMatHang]}),visible:m,onClose:p,width:700,modalId:t,datas:f,footer:null,children:[M?Object(q.c)("div",{className:"font-weight-bold",style:{marginBottom:"10px"},children:[Object(q.b)("span",{className:"text-danger",children:"*"})," M\u1eb7t h\xe0ng ",Object(q.b)("span",{className:"text-danger",children:null===v||void 0===v?void 0:v.tenMatHang})," kh\xf4ng t\xecm th\u1ea5y t\xean, c\xf3 th\u1ec3 \u0111\u1ed5i l\u1ea1i m\u1eb7t h\xe0ng kh\xe1c thay th\u1ebf ho\u1eb7c b\u1ea5m t\u1ea1o ",Object(q.b)("span",{className:"text-danger",children:'"T\u1ea1o m\u1eb7t h\xe0ng"'}),"."]}):null,Object(q.c)(j.MyForm,{form:l,children:[Object(q.b)(gn.a,{name:"id",label:"ID",disabled:!0}),Object(q.b)(bn.a,{loaiTruMatHangs:a,rules:[{required:!0}],isAddNew:!0,onAfterSelect:function(n,t){l.setFieldsValue(Object(O.a)(Object(O.a)({},t),{},{matHangId:n}))},onAfterAddFinish:function(n,t){l.setFieldsValue(Object(O.a)(Object(O.a)({},t),{},{matHangId:n}))}}),Object(q.c)(j.MyFormItem,{label:"Ch\u1ee9c n\u0103ng",children:[Object(q.b)(s.a,{type:"primary",onClick:function(){return H.apply(this,arguments)},children:"Thay th\u1ebf m\u1eb7t h\xe0ng"}),M?Object(q.b)(s.a,{icon:Object(q.b)(on.a,{}),type:"dashed",danger:!0,onClick:function(){if(!window.confirm("X\xe1c nh\u1eadn t\u1ea1o m\u1eb7t h\xe0ng?"))return null;b(Object(hn.a)(v)),b(Object(E.h)(!0)),p()},children:"T\u1ea1o m\u1eb7t h\xe0ng"}):null]})]})]})},fn=function(n){Object(T.a)(e,n);var t=Object(D.a)(e);function e(){var n;Object(y.a)(this,e);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(n=t.call.apply(t,[this].concat(c))).pathDatas=["chiTietDonHang","datas"],n.pathDeleted=["chiTietDonHang","deleted"],n.initData={},n}return e}(j.AppClass),vn=e(503),mn=e(476),pn=h.c.openEditVATMatHang;var Hn=function(n){var t=n.dataSource,e=n.onOk,a=Object(d.c)((function(n){return n.form})),l=a.modal,b=a.datas,h=null===b||void 0===b?void 0:b[pn],g=Object(d.b)(),f=Object(r.useRef)(null),v=Object(rn.useForm)(),m=Object(i.a)(v,1)[0];u.a.useEffect((function(){return m.setFieldsValue(h),(null===f||void 0===f?void 0:f.current)&&f.current.focus(),function(){m.resetFields()}}),[h]);var p=u.a.useMemo((function(){var n;return!!(null===l||void 0===l||null===(n=l[pn])||void 0===n?void 0:n.open)}),[l[pn]]);function H(){return M.apply(this,arguments)}function M(){return(M=Object(o.a)(c.a.mark((function n(){var a,o,i;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m.validateFields();case 2:a=n.sent,o=a.vat,null===e||void 0===e||e(Object(O.a)(Object(O.a)({},h),{},{vat:o})),(i=null===t||void 0===t?void 0:t[(null===h||void 0===h?void 0:h.index)+1])?(m.resetFields(),g(Object(j.openModal)({modalId:pn,data:i}))):g(Object(j.closeModal)({modalId:pn}));case 7:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return Object(q.b)(j.MyModal,{title:Object(q.c)("div",{children:["VAT M\u1eb7t H\xe0ng - ",(null===h||void 0===h?void 0:h.tenMatHang)||""]}),visible:p,width:700,modalId:pn,datas:b,onOkModal:H,onClose:function(){return g(Object(j.closeModal)({modalId:pn}))},children:Object(q.c)(j.MyForm,{form:m,labelCol:{span:8},wrapperCol:{span:16},children:[Object(q.b)(j.MyFormItem,{name:"vat",label:"VAT:",children:Object(q.b)(mn.a,{ref:f,min:0,style:{width:"100%"},onPressEnter:H,autoFocus:!0})}),Object(q.b)(j.MyFormItem,{label:"Ch\u1ee9c n\u0103ng",children:Object(q.b)(s.a,{type:"primary",onClick:H,icon:Object(q.b)(vn.a,{}),children:"L\u01b0u"})})]})})},Mn=e(159),yn=e(725),Tn=e(123),Dn=e(216),Cn=h.c.donHangNhapModal,xn=Object(r.memo)((function(n){var t=n.pageData,e=Object(d.c)((function(n){return n.hideColumns})),a=null===e||void 0===e?void 0:e[Cn||""],c=u.a.useMemo((function(){var n=[j.constants.stt,Dn.a.tenMatHang,Mn.a.tenNhomMatHang,yn.a.soLuong,yn.a.soLuongThuc,Tn.a.tenDonViTinh,Dn.a.giaNhapMatHang],t=[yn.a.thanhTien];return[{id:0,colSpan:0+n.reduce((function(n,t){var e=t.id;return n+((null===a||void 0===a?void 0:a[e])?0:1)}),0),cellClassName:"text-center font-weight-bold text-danger"},{id:1,colSpan:t.reduce((function(n,t){var e=t.id;return n+((null===a||void 0===a?void 0:a[e])?0:1)}),0),cellClassName:"text-right font-weight-bold text-small text-danger",render:function(n){return Object(j.formatNumber)(n)}},{id:2,colSpan:2},{id:3,colSpan:1,cellClassName:"text-right font-weight-bold text-small text-danger",render:function(n){return Object(j.formatNumber)(n)}},{id:4,colSpan:2}]}),[a]),o=u.a.useMemo((function(){return t.reduce((function(n,t){var e=n.thanhTien+(t.thanhTien||0),a=n.thanhTienSauVAT+(t.thanhTienSauVAT||0);return Object(O.a)(Object(O.a)({},n),{},{thanhTien:e,thanhTienSauVAT:a})}),{tong:"T\u1ed5ng ti\u1ec1n",thanhTien:0,thanhTienSauVAT:0})}),[t]),i=u.a.useMemo((function(){return["tong","thanhTien","","thanhTienSauVAT"].map((function(n,t){return Object(L.a)({},t,o[n])}))}),[o]);return Object(q.b)($.a,{columns:c,dataSource:i})})),In={getTableColumns:function(){return[Object(O.a)(Object(O.a)({},j.constants.stt),{},{fixed:!1}),Object(O.a)(Object(O.a)({},Dn.a.tenMatHang),{},{width:150,fixed:!1}),Object(O.a)(Object(O.a)({},Mn.a.tenNhomMatHang),{},{align:"center",isSearch:!1}),Object(O.a)({},yn.a.soLuong),Object(O.a)(Object(O.a)({},yn.a.soLuongThuc),{},{render:function(n,t,e,a){var c,o=(null===a||void 0===a||null===(c=a.inputOptions)||void 0===c?void 0:c.openEditSoLuongThuc)||U.noop;return o?Object(q.b)("div",{className:"hoverClassBG textDecorationUnderline",onClick:function(){return o(t)},children:n||"--"}):n}}),Object(O.a)(Object(O.a)({},Tn.a.tenDonViTinh),{},{align:"center",isSearch:!1,width:90}),Object(O.a)(Object(O.a)({},Dn.a.giaBanMatHang),{},{render:function(n,t,e,a){var c,o=(null===a||void 0===a||null===(c=a.inputOptions)||void 0===c?void 0:c.openEditGiaBanMatHang)||U.noop;return o?Object(q.b)("div",{className:"hoverClassBG textDecorationUnderline",onClick:function(){return o(t)},children:n?Object(j.formatNumber)(n):"--"}):Object(j.formatNumber)(n)}}),yn.a.thanhTien,yn.a.ghiChu,j.constants.editRow]},getInputFields:function(){return[]}},wn=h.c.donHangNhapModal,Nn=Object(r.memo)((function(n){var t=n.pageData,e=Object(d.c)((function(n){return n.hideColumns})),a=null===e||void 0===e?void 0:e[wn||""],c=u.a.useMemo((function(){var n=[j.constants.stt,Dn.a.tenMatHang,Mn.a.tenNhomMatHang,yn.a.soLuong,yn.a.soLuongThuc,Tn.a.tenDonViTinh,Dn.a.giaNhapMatHang],t=[yn.a.thanhTien],e=[yn.a.ghiChu,j.constants.editRow];return[{id:0,colSpan:0+n.reduce((function(n,t){var e=t.id;return n+((null===a||void 0===a?void 0:a[e])?0:1)}),0),cellClassName:"text-center font-weight-bold text-danger"},{id:1,colSpan:t.reduce((function(n,t){var e=t.id;return n+((null===a||void 0===a?void 0:a[e])?0:1)}),0),cellClassName:"text-right font-weight-bold text-small text-danger",render:function(n){return Object(j.formatNumber)(n)}},{id:2,colSpan:e.reduce((function(n,t){var e=t.id;return n+((null===a||void 0===a?void 0:a[e])?0:1)}),0)}]}),[a]),o=u.a.useMemo((function(){return t.reduce((function(n,t){var e=n.thanhTien+(t.thanhTien||0);return Object(O.a)(Object(O.a)({},n),{},{thanhTien:e})}),{tong:"T\u1ed5ng ti\u1ec1n",thanhTien:0})}),[t]),i=u.a.useMemo((function(){return["tong","thanhTien"].map((function(n,t){return Object(L.a)({},t,o[n])}))}),[o]);return Object(q.b)($.a,{columns:c,dataSource:i})})),Sn=h.c.donHangXuatModal;var kn=function(n){var t=n.donHangXuatData,e=n.pageConstants,a=n.loaiDonHangId,r=Object(rn.useForm)(),l=Object(i.a)(r,1)[0],s=Object(d.b)(),b=Object(d.c)((function(n){return n.donHangXuat})).loading,g=Object(d.c)((function(n){return n.chiTietDonHang})).chiTietDonHangs,f=Object(x.a)({Instance:fn,onDelete:un.d});function v(){return(v=Object(o.a)(c.a.mark((function n(t){return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:s(Object(un.h)(t)),s(Object(E.h)(!0));case 2:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function m(){return(m=Object(o.a)(c.a.mark((function n(t){return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:s(Object(un.j)(t)),s(Object(E.h)(!0));case 2:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function p(){return(p=Object(o.a)(c.a.mark((function n(t){return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:s(Object(un.k)(t)),s(Object(E.h)(!0));case 2:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function H(){return(H=Object(o.a)(c.a.mark((function n(t){return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:s(Object(un.g)(t)),s(Object(E.h)(!0));case 2:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function y(){return(y=Object(o.a)(c.a.mark((function n(t,e){return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:s(Object(un.c)(t,e)),s(Object(E.h)(!0));case 2:case"end":return n.stop()}}),n)})))).apply(this,arguments)}var T=u.a.useMemo((function(){return g?Object.values(g).map((function(n){var t=n.vat,e=void 0===t?0:t,a=n.soLuongThuc,c=void 0===a?0:a,o=n.giaBanMatHang,i=void 0===o?0:o,r=Math.round(c*i),u=Math.round(i+i*e/100),d=Math.round(u*c);return Object(O.a)(Object(O.a)({},n),{},{thanhTien:r,giaBanMatHangSauVAT:u,thanhTienSauVAT:d})})).reduce((function(n,t){return Object(O.a)(Object(O.a)({},n),{},Object(L.a)({},t.id,t))}),{}):{}}),[g]),D=u.a.useMemo((function(){return Object(sn.a)("tenMatHang",Object.values(T))}),[T]);return u.a.useEffect((function(){return s(Object(un.m)((null===t||void 0===t?void 0:t.chiTietDonHangs)||{})),function(){s(Object(un.m)({}))}}),[t]),Object(q.c)(q.a,{children:[Object(q.b)(M.a,{isEdit:!0,onCallbackDataSource:function(n){return Object(sn.a)("tenMatHang",n)},constants:e||In,datas:T,loading:b,modalId:Sn,form:l,pageSize:50,rowClassName:function(n){return(null===n||void 0===n?void 0:n.matHangConThieu)?"bg-blue-light":""},summary:function(n){return"giaVi"===a?Object(q.b)(xn,{pageData:n}):Object(q.b)(Nn,{pageData:n})},inputOptions:{openEditGiaBanMatHang:function(n){s(Object(j.openModal)({modalId:h.c.openEditGiaBanMatHang,data:n}))},openEditSoLuongThuc:function(n){s(Object(j.openModal)({modalId:h.c.openEditSoLuongThuc,data:n}))},openEditVATMatHang:function(n){s(Object(j.openModal)({modalId:h.c.openEditVATMatHang,data:n}))},openEditGhiChu:function(n){s(Object(j.openModal)({modalId:h.c.openEditGhiChu,data:n}))}},actions:f}),Object(q.b)(ln.a,{dataSource:D,onOk:function(n){return v.apply(this,arguments)}}),Object(q.b)(dn.a,{dataSource:D,onOk:function(n){return m.apply(this,arguments)}}),Object(q.b)(Hn,{dataSource:D,onOk:function(n){return p.apply(this,arguments)}}),Object(q.b)(jn,{loaiTruMatHangs:g,modalId:h.c.donHangXuatModal,onAfterOk:function(n,t){return y.apply(this,arguments)}}),Object(q.b)(j.GhiChuInputModal,{onOk:function(n){return H.apply(this,arguments)}})]})},Ln=e(801);var Fn=function(n){var t=n.form,e=n.name,a=n.mode,c=n.label,o=n.labelCol,i=n.wrapperCol,r=n.rules,d=n.onAfterSelect,l=n.disabled,s=u.a.useMemo((function(){return Object.values(m.b).filter((function(n){return n.active})).map((function(n){var t="".concat(n.tenLoaiDonHang);return{value:n.id,label:t}}))}),[m.b]),b=Object(q.b)(j.MyFormItem,{label:c||"Lo\u1ea1i \u0111\u01a1n h\xe0ng",type:"select",name:e||"loaiDonHangId",innerProps:{mode:a,showSearch:!0,allowClear:!0,filterOption:j.onSelectSearch,onChange:function(n){null===d||void 0===d||d(n)},disabled:l},options:s,rules:r||[]});return t?Object(q.b)(q.a,{children:Object(q.b)(j.MyForm,{form:t,labelCol:o||{span:8},wrapperCol:i||{span:16},children:b})}):b},An=function(n){return function(){var t,e;if(!(null===n||void 0===n?void 0:n.loaiDonHangId))return Object(O.a)(Object(O.a)({},n),{},{tenLoaiDonHang:""});if((null===n||void 0===n||null===(t=n.loaiDonHangId)||void 0===t?void 0:t.length)&&"string"!==typeof n.loaiDonHangId)e=n.loaiDonHangId.map((function(n){var t=(null===m.b||void 0===m.b?void 0:m.b[n])||{};return"".concat(t.tenLoaiDonHang||"")})).join(", ");else{var a=(null===m.b||void 0===m.b?void 0:m.b[n.loaiDonHangId])||{};e="".concat(a.tenLoaiDonHang||"")}return Object(O.a)(Object(O.a)({},n),{},{tenLoaiDonHang:e})}},Vn={getTableColumns:function(){return[Object(O.a)(Object(O.a)({},j.constants.stt),{},{fixed:!1}),Object(O.a)(Object(O.a)({},Dn.a.tenMatHang),{},{width:150,fixed:!1,isSearch:!1}),Object(O.a)(Object(O.a)({},Mn.a.tenNhomMatHang),{},{align:"center",isSearch:!1}),yn.a.soLuong,Object(O.a)(Object(O.a)({},yn.a.soLuongThuc),{},{render:function(n,t,e,a){var c,o=(null===a||void 0===a||null===(c=a.inputOptions)||void 0===c?void 0:c.openEditSoLuongThuc)||U.noop;return Object(q.b)("div",{className:"hoverClassBG",onClick:function(){return o(t)},children:n||"--"})}}),Object(O.a)(Object(O.a)({},Tn.a.tenDonViTinh),{},{className:"text-small",align:"center",isSearch:!1,width:90}),Object(O.a)(Object(O.a)({},Dn.a.giaBanMatHang),{},{className:"text-small",width:100,render:function(n,t,e,a){var c,o=(null===a||void 0===a||null===(c=a.inputOptions)||void 0===c?void 0:c.openEditGiaBanMatHang)||U.noop;return Object(q.b)("div",{className:"hoverClassBG",onClick:function(){return o(t)},children:n?Object(j.formatNumber)(n):"--"})}}),yn.a.thanhTien,Object(O.a)(Object(O.a)({},Dn.a.vat),{},{render:function(n,t,e,a){var c,o=(null===a||void 0===a||null===(c=a.inputOptions)||void 0===c?void 0:c.openEditVATMatHang)||U.noop;return Object(q.b)("div",{className:"hoverClassBG",onClick:function(){return o(t)},children:n||"--"})}}),Object(O.a)(Object(O.a)({},Dn.a.giaBanMatHangSauVAT),{},{className:"text-small"}),yn.a.thanhTienSauVAT,yn.a.ghiChu,j.constants.editRow]},getInputFields:function(){return[]}},Bn=h.c.danhSachDHXModal,En=function(n){var t,e,a=Object(d.b)(),r=Object(d.c)((function(n){return n.chiTietDonHang})).chiTietDonHangs,l=Object(d.c)((function(n){return n.form})),b=l.modal,g=l.datas,f=Object(d.c)((function(n){return n.donHang})).donHangDirty,v=Object(d.c)((function(n){return n.danhSachDHX})).donHangXuatData,p=Object(d.c)((function(n){return n.giaBanMatHang})).giaBanMatHangsByKhachHang,H=Object(d.c)((function(n){return n.account})).accountData,M=null===H||void 0===H||null===(t=H.paths)||void 0===t||null===(e=t.danhSachDHN)||void 0===e?void 0:e.edit,y=u.a.useState(null),T=Object(i.a)(y,2),D=T[0],C=T[1],x=an.a.useForm(),w=Object(i.a)(x,1)[0],N=null===g||void 0===g?void 0:g[Bn],S=u.a.useMemo((function(){var n;return!!(null===b||void 0===b||null===(n=b[Bn])||void 0===n?void 0:n.open)}),[b[Bn]]);function k(){if(f&&!window.confirm("\u0110\u01a1n h\xe0ng \u0111\xe3 thay \u0111\u1ed5i, b\u1ea1n c\xf3 mu\u1ed1n tho\xe1t?"))return null;a(Object(j.closeModal)({modalId:Bn})),a(Object(E.h)(!1))}function L(){return L=Object(o.a)(c.a.mark((function n(){var t,e,o,i,r;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(M){n.next=2;break}return n.abrupt("return",Object(Y.l)());case 2:if(window.confirm("X\xe1c nh\u1eadn l\u01b0u \u0111\u01a1n h\xe0ng?")){n.next=4;break}return n.abrupt("return",null);case 4:return n.next=6,w.validateFields();case 6:t=n.sent,e=t.ngayGiao,o=t.loaiDonHangId,i=e.format("L"),r=Object(O.a)(Object(O.a)({},v),{},{ngayGiao:i,loaiDonHangId:o}),r=a(An(r)),a(Object(I.k)(r)),a(Object(j.closeModal)({modalId:Bn})),a(Object(E.h)(!1));case 15:case"end":return n.stop()}}),n)}))),L.apply(this,arguments)}function F(){return(F=Object(o.a)(c.a.mark((function n(t){var e,o,i;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:o=(null===t||void 0===t?void 0:t.id)||(null===t||void 0===t?void 0:t.matHangId),i=(null===t||void 0===t?void 0:t.giaBanMatHang)?null===t||void 0===t?void 0:t.giaBanMatHang:(null===p||void 0===p||null===(e=p[o])||void 0===e?void 0:e.giaBanMatHang)||0,a(Object(un.b)(Object(O.a)(Object(O.a)({},t),{},{giaBanMatHang:i}))),a(Object(E.h)(!0));case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function V(){return(V=Object(o.a)(c.a.mark((function n(t){return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:C(t),a(Object(E.h)(!0));case 2:case"end":return n.stop()}}),n)})))).apply(this,arguments)}u.a.useEffect((function(){return a(Object(I.f)(N)),a(Object(G.f)(null===N||void 0===N?void 0:N.khachHangId)),function(){w.resetFields(),Object(A.j)("donHangXuatData"),Object(A.j)("giaBanMatHangByKhachHang")}}),[N]),u.a.useEffect((function(){if(v){var n=v.id,t=v.ngayGiao,e=v.loaiDonHangId,a=B()(t,"L");w.setFieldsValue({id:n,ngayGiao:a,loaiDonHangId:e}),C(e)}else w.resetFields()}),[v]);var X=u.a.useMemo((function(){return D===m.b.giaVi.id?Vn:In}),[D]);return(null===v||void 0===v?void 0:v.trangThaiId)===h.g.daHuy.trangThaiId?Object(q.b)(j.MyModal,{title:Object(q.c)("div",{children:["\u0110\u01a1n \u0111\u1eb7t h\xe0ng nh\xe0 cung c\u1ea5p: ",null===v||void 0===v?void 0:v.tenKhachHang]}),visible:S,onClose:k,width:1200,maskClosable:!f,modalId:Bn,datas:g,footer:null,children:Object(q.b)("div",{children:"\u0110\u01a1n h\xe0ng \u0111\xe3 h\u1ee7y"})}):Object(q.c)(j.MyModal,{title:Object(q.c)("div",{children:["\u0110\u01a1n b\xe1n h\xe0ng: ",null===v||void 0===v?void 0:v.tenKhachHang," - ",null===v||void 0===v?void 0:v.donHangId]}),visible:S,onClose:k,onOkModal:function(){return L.apply(this,arguments)},width:1200,maskClosable:!f,modalId:Bn,datas:g,children:[Object(q.c)(j.MyForm,{form:w,labelCol:{span:4},wrapperCol:{span:20},children:[Object(q.b)(gn.a,{name:"id",label:"ID",disabled:!0}),Object(q.b)(j.MyFormItem,{label:"Ng\xe0y giao: ",name:"ngayGiao",rules:[{required:!0}],children:Object(q.b)(cn.a,{style:{width:"100%"}})}),Object(q.b)(Fn,{onAfterSelect:function(n){return V.apply(this,arguments)}}),Object(q.b)(j.MyFormItem,{label:"Ch\u1ee9c n\u0103ng",children:Object(q.b)(s.a,{type:"primary",icon:Object(q.b)(on.a,{}),onClick:function(){a(Object(j.openModal)({modalId:h.c.openAddMatHangSoLuongModal}))},children:"Th\xeam m\u1eb7t h\xe0ng"})})]}),Object(q.c)("div",{className:"mt-1",children:[Object(q.b)("div",{className:"font-weight-bold",style:{marginBottom:"7px"},children:"Chi Ti\u1ebft \u0110\u01a1n H\xe0ng:"}),Object(q.b)(kn,{loaiDonHangId:D,donHangXuatData:v,pageConstants:X})]}),Object(q.b)(Ln.a,{loaiTruMatHangs:r,notAutoCloseAfterOk:!0,soLuongName:"soLuong",giaMatHangName:"giaBanMatHang",onAfterAddFinish:function(n){return F.apply(this,arguments)}})]})},Gn=e(867),Xn=e(508),Rn=e(373),Pn=e(868),Kn=h.c.importDonHangXuatModal;var qn=function(n){var t=an.a.useForm(),e=Object(i.a)(t,1)[0],a=u.a.useRef(null),r=u.a.useRef(null),l=Object(d.b)(),b=Object(d.c)((function(n){return n.form})),g=b.modal,O=b.datas,f=Object(d.c)((function(n){return n.importExcel})).sheetHTMLs,v=u.a.useMemo((function(){var n;return!!(null===g||void 0===g||null===(n=g[Kn||""])||void 0===n?void 0:n.open)}),[g[Kn]]);function m(){return(m=Object(o.a)(c.a.mark((function n(){var t,e,o;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(null===a||void 0===a?void 0:a.current)){n.next=6;break}if(e=null===(t=a.current)||void 0===t?void 0:t.files[0],o=e&&e.name?e.name:"",l(Object(j.checkFilenameExcel)(o))){n.next=5;break}return n.abrupt("return");case 5:l(Object(j.onConvertExcelFileToWorkBookExcel)(e,Kn));case 6:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function p(){return(p=Object(o.a)(c.a.mark((function n(){var t,a,o,i;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.validateFields();case 2:if(t=n.sent,a=t.ngayGiao,o=t.khachHangId,window.confirm("X\xe1c nh\u1eadn c\u1eadp nh\u1eadt?")){n.next=7;break}return n.abrupt("return");case 7:return i={ngayGiao:B()(a).format("L"),khachHangId:o},n.next=10,l(Object(Rn.c)(i));case 10:i=n.sent,l(Object(K.e)(i)),l(Object(j.closeModal)({modalId:h.c.importDonHangXuatModal}));case 13:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return u.a.useEffect((function(){v&&r.current&&(r.current.innerHTML=(null===f||void 0===f?void 0:f[Kn||""])||"")}),[f,r,Kn,v]),Object(q.b)(j.MyModal,{title:Object(q.b)("div",{children:"T\u1ea1o \u0110\u01a1n H\xe0ng Nhanh B\u1eb1ng Excel"}),visible:v,onClose:function(){l(Object(j.closeModal)({modalId:Kn}))},width:1200,modalId:Kn,datas:O,footer:null,children:Object(q.c)("div",{children:[Object(q.b)("input",{ref:a,type:"file",style:{border:"1px solid lightgray",width:"300px"}}),Object(q.b)(s.a,{icon:Object(q.b)(Xn.a,{}),onClick:function(){return m.apply(this,arguments)},type:"primary",children:"T\u1ea3i file excel l\xean"}),Object(q.b)("div",{style:{padding:"10px 0"},children:Object(q.c)(j.MyForm,{form:e,labelCol:{span:4},wrapperCol:{span:20},children:[Object(q.b)(j.MyFormItem,{label:"Ng\xe0y giao: ",name:"ngayGiao",rules:[{required:!0}],children:Object(q.b)(cn.a,{style:{width:"100%"}})}),Object(q.b)(Pn.a,{rules:[{required:!0}]}),Object(q.b)(j.MyFormItem,{label:"Ch\u1ee9c n\u0103ng",children:Object(q.b)(s.a,{type:"dashed",danger:!0,loading:!1,onClick:function(){return p.apply(this,arguments)},children:"T\u1ea1o \u0111\u01a1n h\xe0ng"})})]})}),Object(q.b)("div",{className:"import-excel",ref:r})]})})},_n=h.c.danhSachDHXModal;t.default=function(){var n,t,e=Object(d.b)(),a=Object(b.u)(),r=Object(d.c)((function(n){return n.danhSachDHX})),O=r.tabsData,f=r.loading,v=r.pageSize,m=r.danhSachDHXs,H=r.xemTatCaDonHang,y=r.xemDonHangDaHuy,T=Object(d.c)((function(n){return n.table})).selectedRows,D=Object(d.c)((function(n){var t;return null===(t=n.tagsPage)||void 0===t?void 0:t[_n]})),w=Object(j.useDatePicker)(),N=Object(i.a)(w,2),S=N[0],k=N[1],L=Object(d.c)((function(n){return n.account})).accountData,F=null===L||void 0===L||null===(n=L.paths)||void 0===n||null===(t=n.danhSachDHX)||void 0===t?void 0:t.edit,V=Object(x.a)({Instance:C,onPending:I.j,addSelectedId:I.a,onDelete:I.i,isEdit:F});function B(){return(B=Object(o.a)(c.a.mark((function n(t){var a;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=null===T||void 0===T?void 0:T[_n]){n.next=3;break}return n.abrupt("return",Object(Y.h)("Ch\u01b0a ch\u1ecdn \u0111\u01a1n h\xe0ng"));case 3:e(Object(Gn.a)(a,t)),e(Object(j.closeModal)({modalId:h.d.inDonHang}));case 5:case"end":return n.stop()}}),n)})))).apply(this,arguments)}u.a.useEffect((function(){return e(Object(I.g)(S)),function(){Object(A.j)("danhSachDHX")}}),[S]);var E=u.a.useMemo((function(){return m?e(Object(I.d)(m,H,y)):{}}),[m,H,y]);return Object(q.c)("div",{className:"danhSachDHX-page",css:g.a,children:[Object(q.b)(l.b,{className:"tabs",options:O,activeKey:D?"aside":"",onTabClick:function(n){if("add"===n){if(!F)return Object(Y.l)();a(Z)}else if("add-express"===n){if(!F)return Object(Y.l)();e(Object(j.openModal)({modalId:h.c.importDonHangXuatModal}))}else"aside"===n?e(Object(j.toggleAside)({tagPageId:_n})):"print"===n?e(Object(j.openModal)({modalId:h.d.inDonHang})):"taiExcel"===n&&e(Object(j.downloadExcel)({tableId:_n,constants:p,fileSheet:"danhSachDHXSheet",fileName:"danhSachDHXName"}))}}),Object(q.c)("div",{className:"tabs-main",style:{marginTop:"10px"},children:[D&&Object(q.b)(W,{dateTimePicker:k}),Object(q.b)("div",{className:"aside-main",children:Object(q.b)(M.a,{constants:p,actions:V,datas:E,loading:f,modalId:_n,isEdit:F,expandable:{expandedRowRender:function(n){return Object(q.c)("div",{children:[Object(q.b)(P.a,{donHangXuatData:n}),Object(q.b)(s.a,{onClick:function(){return console.log(n)},children:"Log console"})]})}},isSelection:!0,pagination:!0,pageSize:v,onChange:function(n){return e(Object(I.l)(n.pageSize))},summary:function(n){return Object(q.b)(en,{pageData:n})},rowClassName:function(n){return n.trangThaiId===h.g.daHuy.trangThaiId?"bg-danger":n.trangThaiId===h.g.chuaNhan.trangThaiId?"bg-gold-light":""}})})]}),Object(q.b)(En,{}),Object(q.b)(j.PrintModal,{modalId:h.d.inDonHang,title:"In \u0110\u01a1n \u0110\u1eb7t H\xe0ng",onPrint:function(n){return B.apply(this,arguments)}}),Object(q.b)(qn,{})]})}},718:function(n,t,e){"use strict";e(0);var a=e(473),c=e(25),o=a.a.Summary,i=o.Row,r=o.Cell;t.a=function(n){var t,e=n.columns,a=n.dataSource;return Object(c.b)(i,{children:null===e||void 0===e||null===(t=e.map)||void 0===t?void 0:t.call(e,(function(n,t){var e=null===n||void 0===n?void 0:n.id,o=(null===n||void 0===n?void 0:n.colSpan)||0,i=(null===n||void 0===n?void 0:n.cellClassName)||"",u=(null===n||void 0===n?void 0:n.valueStyle)||{},d=(null===n||void 0===n?void 0:n.valueClassName)||"",l=null===n||void 0===n?void 0:n.render,s=(null===a||void 0===a?void 0:a[t])||{},b=(null===s||void 0===s?void 0:s[e])||"";return l&&(b=l(b,s,t)),Object(c.b)(r,{index:t,colSpan:o,className:i,children:Object(c.b)("div",{style:u,className:d,children:b})},e)}))})}},723:function(n,t,e){"use strict";e.d(t,"a",(function(){return i}));e(0);var a=e(7),c=e(187),o=e(25);function i(n){var t=n.name,e=n.label,i=n.onPressEnter,r=n.rules,u=n.disabled;return Object(o.b)(a.MyFormItem,{name:t,label:e,rules:r,children:Object(o.b)(c.a,{disabled:u,onPressEnter:i})})}},738:function(n,t,e){"use strict";e.d(t,"a",(function(){return i}));var a=e(8),c=e(7),o=e(159),i={nhaCungCapId:{id:"nhaCungCapId",name:"nhaCungCapId"},tenNhaCungCap:{id:"tenNhaCungCap",name:"T\xean NCC",width:150,isSearch:!0,className:"text-small font-weight-bold",sorter:Object(c.sortByText)("tenNhaCungCap"),form:{type:"input",rules:[{required:!0,message:"Ch\u01b0a nh\u1eadp"}]}},nganhNgheKinhDoanh:{id:"nganhNgheKinhDoanh",name:"Ng\xe0nh ngh\u1ec1 KD",width:130,className:"text-small ",isSearch:!0,form:{type:"input"}},diaChiNhaCungCap:{id:"diaChiNhaCungCap",name:"\u0110\u1ecba ch\u1ec9",width:140,className:"text-small ",isSearch:!0,form:{type:"text-area"}},nguoiLienHe:{id:"nguoiLienHe",name:"Ng\u01b0\u1eddi li\xean h\u1ec7",width:100,className:"text-small ",form:{type:"input"}},soDienThoai:{id:"soDienThoai",name:"S\u1ed1 \u0110T",width:100,className:"text-small ",align:"center",form:{type:"input"}},getTableColumns:function(){return[Object(a.a)(Object(a.a)({},c.constants.stt),{},{fixed:!1}),this.tenNhaCungCap,Object(a.a)(Object(a.a)({},o.a.tenNhomMatHang),{},{width:170}),this.nganhNgheKinhDoanh,this.diaChiNhaCungCap,this.nguoiLienHe,this.soDienThoai,c.constants.active,c.constants.editRow]},getInputFields:function(){return[this.tenNhaCungCap,this.nganhNgheKinhDoanh,this.diaChiNhaCungCap,this.nguoiLienHe,this.soDienThoai]},getExcelFields:function(){return[this.tenNhaCungCap,this.nganhNgheKinhDoanh,this.diaChiNhaCungCap,this.nguoiLienHe,this.soDienThoai,c.constants.active]}}},764:function(n,t,e){"use strict";var a=e(8),c=e(20),o=e(0),i=e.n(o),r=e(59),u=e(110),d=e(7),l=e(56),s=e(754),b=e(55),h=e(64),g=e(72),O=e(365),j=e(25);t.a=function(n){var t,e,o=n.form,f=n.name,v=n.mode,m=n.label,p=n.labelCol,H=n.wrapperCol,M=n.rules,y=n.isEdit,T=n.isAddNew,D=n.onAfterSelect,C=n.onAfterAddFinish,x=n.disabled,I=n.matHangFilters,w=n.loaiTruMatHangs,N=n.defaultValues,S=Object(l.b)(),k=Object(l.c)((function(n){return n.dsMatHang})).dsMatHangs,L=Object(l.c)((function(n){return n.account})).accountData,F=(null===L||void 0===L||null===(t=L.paths)||void 0===t||null===(e=t.matHang)||void 0===e?void 0:e.edit)||y,A=i.a.useMemo((function(){var n=Object.values(k);return Object.values(N||{}).length>0&&(n=Object.values(N).reduce((function(n,t){var e=t.id,o=(null===k||void 0===k?void 0:k[e])||{};return[].concat(Object(c.a)(n),[Object(a.a)(Object(a.a)({},o),t)])}),[])),I&&(n=Object(g.filter)(n,I)),Object.values(w||{}).length>0&&(n=n.reduce((function(n,t){return(null===w||void 0===w?void 0:w[null===t||void 0===t?void 0:t.id])?n:[].concat(Object(c.a)(n),[t])}),[])),n=(n=Object(O.a)("tenMatHang",n)).filter((function(n){return n.active})).map((function(n){var t="".concat(n.tenMatHang," - ").concat(null===n||void 0===n?void 0:n.tenDonViTinh," - ").concat(null===n||void 0===n?void 0:n.tenNhomMatHang);return{value:n.id,label:t}})),n}),[k,w,N]),V=Object(j.b)(d.MyFormItem,{label:m||"M\u1eb7t h\xe0ng",type:"select",name:f||"matHangId",innerProps:{autoFocus:!0,mode:v,showSearch:!0,allowClear:!0,filterOption:d.onSelectSearch,onChange:function(n){var t=null===k||void 0===k?void 0:k[n];null===D||void 0===D||D(n,t)},disabled:x,notFoundContent:F?Object(j.b)("div",{children:T?Object(j.b)(r.a,{icon:Object(j.b)(b.a,{}),type:"primary",onClick:function(){return S(Object(d.openModal)({modalId:h.c.dsMatHangModal}))},children:"Th\xeam"}):null}):Object(j.b)(u.a,{})},options:A,rules:M||[]});return o?Object(j.c)(j.a,{children:[Object(j.b)(d.MyForm,{form:o,labelCol:p||{span:8},wrapperCol:H||{span:16},children:V}),F&&Object(j.b)(s.a,{onAfterAddFinish:function(n){o.setFieldsValue({matHangId:n})}})]}):Object(j.c)(j.a,{children:[V,F&&Object(j.b)(s.a,{onAfterAddFinish:function(n){function t(t,e){return n.apply(this,arguments)}return t.toString=function(){return n.toString()},t}((function(n,t){null===C||void 0===C||C(n,t)}))})]})}},800:function(n,t,e){"use strict";var a=e(5),c=e.n(a),o=e(8),i=e(9),r=e(40),u=e(0),d=e.n(u),l=e(7),s=e(332),b=e(503),h=e(476),g=e(59),O=e(64),j=e(56),f=e(25),v=O.c.openEditSoLuongThuc;t.a=function(n){var t=n.dataSource,e=n.onOk,a=Object(j.c)((function(n){return n.form})),O=a.modal,m=a.datas,p=null===m||void 0===m?void 0:m[v],H=Object(j.b)(),M=Object(u.useRef)(null),y=Object(s.useForm)(),T=Object(r.a)(y,1)[0];d.a.useEffect((function(){T.setFieldsValue(p),(null===M||void 0===M?void 0:M.current)&&M.current.focus()}),[p]);var D=d.a.useMemo((function(){var n;return!!(null===O||void 0===O||null===(n=O[v])||void 0===n?void 0:n.open)}),[O[v]]);function C(){return x.apply(this,arguments)}function x(){return(x=Object(i.a)(c.a.mark((function n(){var a,i,r;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,T.validateFields();case 2:a=n.sent,i=a.soLuongThuc,null===e||void 0===e||e(Object(o.a)(Object(o.a)({},p),{},{soLuongThuc:i})),(r=null===t||void 0===t?void 0:t[(null===p||void 0===p?void 0:p.index)+1])?(T.resetFields(),H(Object(l.openModal)({modalId:v,data:r}))):H(Object(l.closeModal)({modalId:v}));case 7:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return Object(f.b)(l.MyModal,{title:Object(f.c)("div",{children:["S\u1ed1 L\u01b0\u1ee3ng Th\u1ef1c - ",(null===p||void 0===p?void 0:p.tenMatHang)||""]}),visible:D,width:700,modalId:v,datas:m,onOkModal:C,onClose:function(){return H(Object(l.closeModal)({modalId:v}))},children:Object(f.c)(l.MyForm,{form:T,labelCol:{span:8},wrapperCol:{span:16},children:[Object(f.b)(l.MyFormItem,{name:"soLuongThuc",label:"S\u1ed1 l\u01b0\u1ee3ng th\u1ef1c:",children:Object(f.b)(h.a,{ref:M,min:0,style:{width:"100%"},onPressEnter:C,autoFocus:!0})}),Object(f.b)(l.MyFormItem,{label:"Ch\u1ee9c n\u0103ng",children:Object(f.b)(g.a,{type:"primary",onClick:C,icon:Object(f.b)(b.a,{}),children:"L\u01b0u"})})]})})}},801:function(n,t,e){"use strict";var a=e(5),c=e.n(a),o=e(9),i=e(40),r=e(0),u=e.n(r),d=e(7),l=e(56),s=e(474),b=e(476),h=e(64),g=e(764),O=e(25);t.a=function(n){var t=n.onAfterAddFinish,e=n.soLuongName,a=n.giaMatHangName,r=n.matHangFilters,j=n.notAutoCloseAfterOk,f=n.loaiTruMatHangs,v=n.defaultValues,m=n.soLuongLabel,p=n.giaMatHangLabel,H=n.modalId,M=s.a.useForm(),y=Object(i.a)(M,1)[0];m=m||"S\u1ed1 l\u01b0\u1ee3ng",p=p||"Gi\xe1 m\u1eb7t h\xe0ng",H=H||h.c.openAddMatHangSoLuongModal;var T=Object(l.b)(),D=Object(l.c)((function(n){return n.form})),C=D.modal,x=D.datas,I=u.a.useMemo((function(){var n;return!!(null===C||void 0===C||null===(n=C[H])||void 0===n?void 0:n.open)}),[C[H]]);function w(){return N.apply(this,arguments)}function N(){return(N=Object(o.a)(c.a.mark((function n(){var e;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,y.validateFields();case 2:e=n.sent,null===t||void 0===t||t(e),j||T(Object(d.closeModal)({modalId:H})),y.resetFields();case 6:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return Object(O.b)(d.MyModal,{title:Object(O.b)("div",{children:"Th\xeam M\u1eb7t H\xe0ng"}),visible:I,onClose:function(){T(Object(d.closeModal)({modalId:H})),y.resetFields()},onOkModal:w,width:700,modalId:H,datas:x,children:Object(O.c)(d.MyForm,{form:y,children:[Object(O.b)(g.a,{defaultValues:v,loaiTruMatHangs:f,matHangFilters:r,rules:[{required:!0}],isAddNew:!0,onAfterAddFinish:function(n){y.setFieldsValue({matHangId:n})}}),Object(O.b)(d.MyFormItem,{name:e,label:m,children:Object(O.b)(b.a,{style:{width:"100%"},onPressEnter:w})}),a?Object(O.b)(d.MyFormItem,{name:a,label:p,children:Object(O.b)(b.a,{style:{width:"100%"},onPressEnter:w})}):null]})})}},826:function(n,t,e){"use strict";e.d(t,"b",(function(){return N})),e.d(t,"a",(function(){return S}));var a=e(13),c=e(8),o=e(5),i=e.n(o),r=e(20),u=e(50),d=e(9),l=e(22),s=e(7),b=e(55),h=e(358),g=e(12),O=e(18),j=e(19),f=function(n){Object(O.a)(e,n);var t=Object(j.a)(e);function e(){var n;Object(g.a)(this,e);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(n=t.call.apply(t,[this].concat(c))).pathDatas=["quanLyMatHang","matHang","datas"],n.pathDeleted=["quanLyMatHang","matHang","deleted"],n.initData={},n}return e}(s.AppClass),v=e(14),m=e(64),p=e(31),H=e.n(p),M=e(362),y=e(361),T=e(33),D=e(370),C=e(383),x=e(218),I=[s.constantTabs.moRong,{label:"Th\xeam m\u1eb7t h\xe0ng",value:"add",Icon:b.a},s.constantTabs.taiExcel,{label:"Import excel",value:"import-excel",Icon:h.a}],w={loading:!1,selectedTab:I[0].value,pageSize:Number(localStorage.getItem("pageSize-mathang")||"25"),tabsData:I};Object(l.createSlice)({name:"matHang",initialState:w,reducers:{}}).reducer;function N(){return function(){var n=Object(d.a)(i.a.mark((function n(t,e){var a,c,o,d,l,s,b,h,g,O,j,p,C,x,I,w;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:Object(v.i)(),t(Object(D.d)(!0)),a=e(),c=a.importExcel.sheetJSONs,o=new f,d=(null===c||void 0===c?void 0:c[m.c.matHangImportModal])||[],l=1,s=Object(u.a)(d),n.prev=8,s.s();case 10:if((b=s.n()).done){n.next=24;break}return h=b.value,g=h.id,O=h.tenMatHang,j=h.giaBanMatHang,p=h.donViTinhId,C=h.nhomMatHangId,x=h.active,g=g||(H()().valueOf()+l).toString(),I={id:g,tenMatHang:O,giaBanMatHang:j,donViTinhId:p,nhomMatHangId:C,active:"TRUE"===x||"FALSE"!==x},I=t(Object(M.c)(I)),I=t(Object(y.c)(I)),w=[].concat(Object(r.a)(o.pathDatas),[g]),n.next=20,t(Object(v.k)(w,I));case 20:l+=1,Object(T.i)("\u0110\xe3 l\u01b0u: ".concat(O));case 22:n.next=10;break;case 24:n.next=29;break;case 26:n.prev=26,n.t0=n.catch(8),s.e(n.t0);case 29:return n.prev=29,s.f(),n.finish(29);case 32:t(Object(D.d)(!1));case 33:case"end":return n.stop()}}),n,null,[[8,26,29,32]])})));return function(t,e){return n.apply(this,arguments)}}()}function S(n){return function(){var t=Object(d.a)(i.a.mark((function t(e,o){var u,d,l,s,b,h,g,O,j,f,m,p,H;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=o(),d=u.chiTietDonHang.chiTietDonHangs,l=n.id,s=n.tenMatHang,b=n.donViTinhId,h=n.tenDonViTinh,g=n.nhomMatHangId,O=n.tenNhomMatHang,j=new C.a,f=[].concat(Object(r.a)(j.pathDatas),[l]),m={id:l,tenMatHang:s,donViTinhId:b,tenDonViTinh:h,nhomMatHangId:g,tenNhomMatHang:O,active:!0},t.next=8,e(Object(v.k)(f,m));case 8:p=Object(c.a)(Object(c.a)({},n),{},{matHangConThieu:!1}),H=Object(c.a)(Object(c.a)({},d),{},Object(a.a)({},l,p)),e(Object(x.l)(H));case 11:case"end":return t.stop()}}),t)})));return function(n,e){return t.apply(this,arguments)}}()}}}]);